<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>DNSä¹‹CNAME</title>
    <url>/p/b804.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>DNS çš„åŸç†å°±æ˜¯ä¸€å±‚å±‚ä»æ ¹åŸŸåé€’å½’æŸ¥è¯¢ï¼Œå…¶ä¸­è®©æˆ‘è§‰å¾—æœ‰ç–‘é—®çš„å°±æ˜¯ <strong>CNAME</strong>ã€‚</p><p>åå¤ä½¿ç”¨å‘½ä»¤æŸ¥è¯¢ä¸ƒç‰›çš„å®˜ç½‘ï¼Œæˆ‘çŸ¥é“ä»–ä»¬ä¸€å®šä¼šä½¿ç”¨ CDNï¼ŒCDN ä¹Ÿæ˜¯ CNAME ä½¿ç”¨æœ€å¤šçš„åœºæ™¯ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ dig qiniu.com</span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt; qiniu.com</span><br><span class="line">;; global options: +cmd</span><br><span class="line">;; Got answer:</span><br><span class="line">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 14562</span><br><span class="line">;; flags: qr rd ra; QUERY: 1, ANSWER: 3, AUTHORITY: 0, ADDITIONAL: 0</span><br><span class="line"></span><br><span class="line">;; QUESTION SECTION:</span><br><span class="line">;qiniu.com.			IN	A</span><br><span class="line"></span><br><span class="line">;; ANSWER SECTION:</span><br><span class="line">qiniu.com.		212	IN	CNAME	mid-lvs-public.qiniu.com.</span><br><span class="line">mid-lvs-public.qiniu.com. 212	IN	CNAME	jjh-lvs-public.qiniu.com.</span><br><span class="line">jjh-lvs-public.qiniu.com. 212	IN	A	180.97.147.243</span><br><span class="line"></span><br><span class="line">;; Query time: 72 msec</span><br><span class="line">;; SERVER: 223.5.5.5<span class="comment">#53(223.5.5.5)</span></span><br><span class="line">;; WHEN: Mon Aug 10 18:41:59 CST 2020</span><br><span class="line">;; MSG SIZE  rcvd: 101</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°è·¯å¾„æ˜¯è¿™æ ·å­çš„ <code>qiniu.com.</code> =&gt; <code>mid-lvs-public.qiniu.com.</code> =&gt; <code>jjh-lvs-public.qiniu.com.</code> =&gt; ç»™äº†ä¸€ä¸ª A è®°å½• <code>180.97.147.243</code>ã€‚</p><p>æœ€ç»ˆæˆ‘ä»¬çš„è¯·æ±‚è‚¯å®šä¹Ÿéƒ½æ˜¯å‘åˆ° A è®°å½•ä¸Šï¼Œä¹Ÿå°±æ˜¯å°† qiniu.com äº¤åˆ° <code>180.97.147.243</code>ï¼Œè¿™ä¸ª IP å¯¹åº”çš„æœåŠ¡æ¥å—åˆ°è¯·æ±‚æ‰å¼€å§‹å¾€å®¢æˆ·ç«¯åæ•°æ®ã€‚</p><p>CNAME æä¾›ä¸€ä¸ªçªé—¨å°†è§£æ A è®°å½•çš„æƒåˆ©äº¤åˆ°ä¸‹ä¸€ä¸ªåŸŸåä¸Šï¼Œå…·ä½“ä¸‹ä¸€ä¸ªåŸŸåå¯¹åº”çš„ ip å¯èƒ½ä»¥åä¼šå˜ï¼Œä½†æ˜¯å¯¹äºä¸Šä¸€ä¸ªåŸŸåæ‰€å¯¹åº”çš„åŸŸåä¸ä¼šå˜ï¼Œè¿™ä¸ªç‚¹å¾ˆåƒ JAVA ä¸­çš„ä¸€ä¸ªæ¥å£ï¼Œæ¥å£çš„å®ç°å¯èƒ½ä¼šå˜ï¼Œä½†æ˜¯æ¥å£åå’Œæ–¹æ³•åæå‰å°±ç¡®å®šå¥½äº†ã€‚</p><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ul><li><a href="https://en.wikipedia.org/wiki/CNAME_record" target="_blank" rel="noopener">wiki</a></li><li><a href="https://www.ruanyifeng.com/blog/2016/06/dns.html" target="_blank" rel="noopener">DNS åŸç†å…¥é—¨-é˜®ä¸€å³°</a></li><li><a href="https://draveness.me/dns-coredns/" target="_blank" rel="noopener">è¯¦è§£ DNS ä¸ CoreDNS çš„å®ç°åŸç†</a></li></ul><!-- rebuild by neat -->]]></content>
      <categories>
        <category>è®¡ç®—æœºåŸç†</category>
      </categories>
      <tags>
        <tag>DNS</tag>
        <tag>CNAME</tag>
      </tags>
  </entry>
  <entry>
    <title>å…³äº horizon å¤šå‰¯æœ¬é—®é¢˜</title>
    <url>/p/f584.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>ç³»ç»Ÿçš„æ•°æ®é‡ä¹Ÿæ¯”è¾ƒå°ï¼Œæ‰€ä»¥ horizon å§‹ç»ˆä¹Ÿåªèµ·äº†ä¸€ä»½ï¼Œä¹Ÿæ‹…å¿ƒ horizon èµ·äº†å¤šä»½ä¼šé€ æˆä»£ç é‡å¤æ‰§è¡Œã€‚</p><p>æ‰€ä»¥å°±åšäº†å¦‚ä¸‹å®éªŒï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker-compose scale laravel-horizon=10</span><br></pre></td></tr></table></figure><p>æœ¬åœ°çš„ä½¿ç”¨çš„æ˜¯ laradock ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“å°±å°† laravel-horizon æ‰©å±•äº† 10 ä¸ªå‰¯æœ¬ï¼Œ</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker-compose ps</span><br><span class="line">           Name                          Command               State                    Ports</span><br><span class="line">---------------------------------------------------------------------------------------------------------------</span><br><span class="line">laradock_docker-in-docker_1   dockerd-entrypoint.sh            Up      2375/tcp</span><br><span class="line">laradock_laravel-horizon_1    /usr/bin/supervisord -n -c ...   Up</span><br><span class="line">laradock_laravel-horizon_10   /usr/bin/supervisord -n -c ...   Up</span><br><span class="line">laradock_laravel-horizon_2    /usr/bin/supervisord -n -c ...   Up</span><br><span class="line">laradock_laravel-horizon_3    /usr/bin/supervisord -n -c ...   Up</span><br><span class="line">laradock_laravel-horizon_4    /usr/bin/supervisord -n -c ...   Up</span><br><span class="line">laradock_laravel-horizon_5    /usr/bin/supervisord -n -c ...   Up</span><br><span class="line">laradock_laravel-horizon_6    /usr/bin/supervisord -n -c ...   Up</span><br><span class="line">laradock_laravel-horizon_7    /usr/bin/supervisord -n -c ...   Up</span><br><span class="line">laradock_laravel-horizon_8    /usr/bin/supervisord -n -c ...   Up</span><br><span class="line">laradock_laravel-horizon_9    /usr/bin/supervisord -n -c ...   Up</span><br><span class="line">laradock_mysql_1              docker-entrypoint.sh mysqld      Up      0.0.0.0:3306-&gt;3306/tcp, 33060/tcp</span><br><span class="line">laradock_nginx_1              /bin/bash /opt/startup.sh        Up      0.0.0.0:443-&gt;443/tcp, 0.0.0.0:80-&gt;80/tcp</span><br><span class="line">laradock_php-fpm_1            docker-php-entrypoint php-fpm    Up      9000/tcp</span><br><span class="line">laradock_redis_1              docker-entrypoint.sh redis ...   Up      0.0.0.0:6379-&gt;6379/tcp</span><br><span class="line">laradock_workspace_1          /sbin/my_init                    Up      0.0.0.0:2222-&gt;22/tcp</span><br></pre></td></tr></table></figure><p>åœ¨å·¥ç¨‹é‡Œé¢ <code>php artisan make:job TestJob</code> å†å®šä¹‰ä¸€ä¸ª jobï¼š</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">App</span>\<span class="title">Jobs</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Bus</span>\<span class="title">Queueable</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Contracts</span>\<span class="title">Queue</span>\<span class="title">ShouldQueue</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Foundation</span>\<span class="title">Bus</span>\<span class="title">Dispatchable</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Queue</span>\<span class="title">InteractsWithQueue</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Queue</span>\<span class="title">SerializesModels</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Support</span>\<span class="title">Facades</span>\<span class="title">Redis</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestJob</span> <span class="keyword">implements</span> <span class="title">ShouldQueue</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">use</span> <span class="title">Dispatchable</span>, <span class="title">InteractsWithQueue</span>, <span class="title">Queueable</span>, <span class="title">SerializesModels</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Create a new job instance.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Execute the job.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        cache()-&gt;increment(<span class="string">"test"</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡ŒJobï¼š</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">dispatch(<span class="keyword">new</span> TestJob);</span><br></pre></td></tr></table></figure><p>é€šè¿‡ <code>$ docker-compose up -d redis-webui</code> å¯ä»¥èµ·ä¸€ä¸ª web é¡µé¢ï¼Œé¡µé¢ä¸­å¯ä»¥çœ‹åˆ°å¯¹åº”çš„ key æ˜¯æ¯æ¬¡éƒ½åŠ ä¸€ï¼Œè€Œä¸æ˜¯åŠ åï¼Œæ‰€ä»¥è¿™é‡Œæ¨æµ‹æ˜¯ä»»åŠ¡è¢«ä¸€ä¸ª horizon è¿›ç¨‹æ¥å—åˆ°äº†ï¼Œå°±ä¼šåŠ é”ï¼Œé˜²æ­¢å…¶ä»–è¿›ç¨‹ç»§ç»­å»æ‰§è¡Œä»»åŠ¡ã€‚</p><p><img src="https://upload-images.jianshu.io/upload_images/1196536-411574f08593d24d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><!-- rebuild by neat -->]]></content>
      <categories>
        <category>laravel</category>
      </categories>
      <tags>
        <tag>laravel</tag>
        <tag>horizon</tag>
      </tags>
  </entry>
  <entry>
    <title>trap å‘½ä»¤</title>
    <url>/p/9c63.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>æˆ‘åœ¨é€šè¿‡ä¸ƒç‰›ç»™çš„å¯æ‰§è¡Œæ–‡ä»¶è¿›è¡Œæ¨é€æ–‡ä»¶åˆ° cdn çš„æ—¶å€™ï¼Œå‘ç°æ€»æ˜¯å‘½ä»¤è¡Œæ€»æ˜¯è¿”å› 1ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ qshell qupload2 --thread-count=5 --src-dir=.nuxt/dist/client --bucket=nalanda-cdn --overwrite=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line">Uploading ...</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> $? </span><br><span class="line">1</span><br></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œæœ‰ä¸ªæŠ€å·§ <code>$?</code> å¯ä»¥è¾“å‡ºä¸Šä¸€æ¡å‘½ä»¤çš„è¿”å›å€¼ã€‚</p></blockquote><p>æˆ‘è¿™è¾¹æœ‰ä¸ªé€»è¾‘æ˜¯åœ¨æ‰“åŒ…æˆåŠŸä¹‹åï¼Œå°† <strong>.nuxt/dist/client</strong> æ–‡ä»¶å¤¹ä¸‹é¢çš„å†…å®¹ä¸Šä¼ åˆ°ä¸ƒç‰›çš„ cdnï¼Œé™æ€æ–‡ä»¶å¯ä»¥æ›´å¿«çš„ä¸‹è½½è¿è¡Œï¼Œä½†æ˜¯è„šæœ¬æ¯æ¬¡éƒ½è¿”å› 1ï¼Œå¯¼è‡´ä¸‹é¢çš„è„šæœ¬æ— æ³•æ‰§è¡Œï¼Œæ‰€ä»¥æˆ‘æƒ³è¦æˆªè· exit 1 è¿™ä¸ªäº‹ä»¶ï¼Œå·§å¥½è®©æˆ‘çœ‹åˆ°äº† linux ä¸­å¦å¤–ä¸€ä¸ªå‘½ä»¤ <code>trap</code>ã€‚</p><p>trap æ˜¯å¯ä»¥æ•è· exit æ—¶å€™çš„ä¿¡å·ï¼Œæ€ªä¸å¾—æˆ‘ä»¥å‰ç¢°åˆ°è¿‡æ‰§è¡Œ <strong>CTRL + C</strong>ï¼Œåé¢è¿˜å¯ä»¥è¾“å‡ºä¸€æ®µå‘½ä»¤ï¼Œæé†’æˆ‘é€€å‡ºæˆåŠŸï¼›ä»¥åŠ skaffold dev åœ¨æˆ‘æ‰§è¡Œ <strong>CTRL + C</strong>ï¼Œå®ƒä¼šå°†å·²ç»éƒ¨ç½²çš„èµ„æºè¿›è¡Œæ¸…ç†ï¼ŒåŸç†éƒ½æ˜¯åŠ«æŒäº†ä¿¡å·é‡ï¼Œå¯ä»¥åšä¸€äº›ç‰¹æ®Šçš„æ“ä½œã€‚</p><p>æ‰€ä»¥è¿™é‡Œæˆ‘å°±è¦åŠ«æŒä¸€ä¸‹ qshell qupload2 æ‰§è¡ŒæˆåŠŸçš„æ—¶å€™å°† SIGHUP å˜æˆæ­£å¸¸çš„ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">trap</span> <span class="string">"echo 'EXIT 1'"</span> SIGHUP</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒä¸ªå­—æ®µå¯ä»¥éšä¾¿å†™ä¸€æ®µè„šæœ¬ï¼Œä»€ä¹ˆéƒ½ä¸æ‰§è¡Œï¼Œå¯ä»¥ç•™ç©ºã€‚</p><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ul><li><a href="https://blog.csdn.net/Maybe_Lee/article/details/78604927" target="_blank" rel="noopener">shellè„šæœ¬ä¸­åˆ¤æ–­ä¸Šä¸€ä¸ªå‘½ä»¤æ˜¯å¦æ‰§è¡ŒæˆåŠŸ</a></li><li><a href="https://man.linuxde.net/trap" target="_blank" rel="noopener">trapå‘½ä»¤</a></li></ul><!-- rebuild by neat -->]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>trap</tag>
        <tag>skaffold</tag>
      </tags>
  </entry>
  <entry>
    <title>phpredis</title>
    <url>/p/7fed.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>php ä¸­æ“ä½œ redis ä¸€èˆ¬ä½¿ç”¨ phpredis è¿™ä¸ªæ‰©å±•ï¼Œredis ä¸­æ˜¯å¯ä»¥æ‰§è¡Œ lua è„šæœ¬ï¼Œä»Šå¤©æ¥è§¦çš„ä¸€ä¸ª<code>åˆ†å¸ƒå¼é”</code>æ¡†æ¶æ­£æ˜¯åˆ©ç”¨äº† lua è„šæœ¬æ“ä½œ redis å¯ä»¥ä¿æŒåŸå­æ€§ã€‚</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">unLock</span><span class="params">()</span> : <span class="title">bool</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $lua = <span class="string">&lt;&lt;&lt;LUA</span></span><br><span class="line"><span class="string">                local hashVal = redis.call("GET", KEYS[1]);</span></span><br><span class="line"><span class="string">                if (hashVal ~=  ARGV[1]) then</span></span><br><span class="line"><span class="string">                    return 0;</span></span><br><span class="line"><span class="string">                end;</span></span><br><span class="line"><span class="string">                </span></span><br><span class="line"><span class="string">                return redis.call("DEL", KEYS[1]);</span></span><br><span class="line"><span class="string">LUA;</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            $eval = <span class="keyword">$this</span>-&gt;getConnection()-&gt;eval($lua, [<span class="keyword">$this</span>-&gt;key, <span class="keyword">$this</span>-&gt;value], <span class="number">1</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> ($eval) &#123;</span><br><span class="line">                CLog::debug(</span><br><span class="line">                    <span class="string">'worker[%s] co[%s]successful release unlock'</span>,</span><br><span class="line">                    <span class="keyword">$this</span>-&gt;getWorkId(),</span><br><span class="line">                    Co::tid()</span><br><span class="line">                );</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> (bool) $eval;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable $e) &#123;</span><br><span class="line">            CLog::error($e-&gt;getMessage());</span><br><span class="line">            <span class="keyword">throw</span> $e;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>eval æ­£æ˜¯æ‰§è¡Œ lua è„šæœ¬çš„æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸º lua è„šæœ¬ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¼ è¿› lua ä¸­çš„kv å‚æ•°ï¼Œ<strong>ç¬¬ä¸‰ä¸ªå‚æ•°è¡¨ç¤ºæœ‰å‡ å¯¹å‚æ•°</strong>ã€‚</p><h1 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h1><ul><li><a href="https://www.cnblogs.com/taijun/p/5007329.html" target="_blank" rel="noopener">PHPä¸­ä½¿ç”¨redisæ‰§è¡Œluaè„šæœ¬ç¤ºä¾‹</a></li></ul><!-- rebuild by neat -->]]></content>
      <categories>
        <category>å¼€å‘ç¬”è®°</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title>Tengineä¸­åº”ç”¨ ngx_http_limit_req_module</title>
    <url>/p/7de5.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>nginx ä¸­å®‰è£… ngx_http_limit_req_module æ¨¡å—å„ç§æºç ç¼–è¯‘å®‰è£…è¿˜æ˜¯æ¯”è¾ƒå¤æ‚ï¼Œæ—¢ç„¶æœ‰ç°æˆçš„ Tengineï¼Œæ•…å°è¯•ä½¿ç”¨ Tengine æ›¿æ¢ nginxã€‚</p><p>ç”±äº Tengine å®Œå…¨å…¼å®¹ nginx è¯­æ³•ï¼Œåªéœ€è¦é¢å¤–è°ƒæ•´ä¸ªåˆ«å‚æ•°å°±èƒ½å˜æˆä¸€ä¸ªé«˜æ€§èƒ½æœåŠ¡ï¼Œå®˜æ–¹æ–‡æ¡£æ¯”è¾ƒå‘ï¼Œæœ‰ä¸ªåˆ«åœ°æ–¹å†™é”™äº†ï¼Œè¿™ä¹ˆå¤šå¹´è¿‡å»äº†ï¼Œä¹Ÿæ²¡äººå»ä¿®æ”¹ã€‚</p><p>é‡ç‚¹ï¼š</p><ul><li><code>limit_req_zone</code> éœ€è¦æ”¾åœ¨ conf çš„ http ä¸‹é¢ã€‚</li><li><code>limit_req</code> éœ€è¦æ”¾åœ¨ conf çš„ location ä¸‹é¢ã€‚</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">user  nginx;</span><br><span class="line"># This number should be, at maximum, the number of CPU cores on your system.</span><br><span class="line">worker_processes auto; # Tengine ä¸“æœ‰å†™æ³•ï¼Œç­‰äº cpu ä¸ªè¿›ç¨‹</span><br><span class="line">worker_cpu_affinity auto; # Tengine ä¸“æœ‰å†™æ³•ï¼Œè‡ªåŠ¨ç»‘å®š cpu è¿›ç¨‹äº²å’Œæ€§</span><br><span class="line"></span><br><span class="line">error_log  &#x2F;var&#x2F;log&#x2F;nginx&#x2F;error.log error;</span><br><span class="line">pid        &#x2F;var&#x2F;run&#x2F;nginx.pid;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    # The effective method, used on Linux 2.6+, optmized to serve many clients with each thread.</span><br><span class="line">    use epoll;</span><br><span class="line">    # Determines how many clients will be served by each worker process.</span><br><span class="line">    worker_connections 65535; # å»ºè®®è°ƒæ•´æœ€å¤§</span><br><span class="line">    # Accept as many connections as possible, after nginx gets notification about a new connection.</span><br><span class="line">    multi_accept on;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       &#x2F;etc&#x2F;nginx&#x2F;mime.types;</span><br><span class="line">    default_type  application&#x2F;octet-stream;</span><br><span class="line"></span><br><span class="line">    #long time</span><br><span class="line">    check_shm_size 5M;</span><br><span class="line">    # Allow the server to close the connection after a client stops responding.</span><br><span class="line">    reset_timedout_connection on;</span><br><span class="line">    client_header_timeout 15;</span><br><span class="line">    # Send the client a &quot;request timed out&quot; if the body is not loaded by this time.</span><br><span class="line">    client_body_timeout 10;</span><br><span class="line">    # If the client stops reading data, free up the stale client connection after this much time.</span><br><span class="line">    send_timeout 15;</span><br><span class="line">    # Timeout for keep-alive connections. Server will close connections after this time.</span><br><span class="line">    keepalive_timeout 30;</span><br><span class="line">    # Number of requests a client can make over the keep-alive connection.</span><br><span class="line">    keepalive_requests 30;</span><br><span class="line"></span><br><span class="line">    log_format  main  &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;</span><br><span class="line">                      &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;</span><br><span class="line">                      &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    client_body_buffer_size 128k;</span><br><span class="line">    client_max_body_size 10m;</span><br><span class="line">    proxy_read_timeout 180s;</span><br><span class="line"></span><br><span class="line">    # Compression.</span><br><span class="line">    gzip on;</span><br><span class="line">    gzip_min_length 10240;</span><br><span class="line">    gzip_proxied expired no-cache no-store private auth;</span><br><span class="line">    gzip_types text&#x2F;plain text&#x2F;css text&#x2F;xml text&#x2F;javascript application&#x2F;x-javascript application&#x2F;xml;</span><br><span class="line">    gzip_disable &quot;msie6&quot;;</span><br><span class="line"></span><br><span class="line">    # Sendfile copies data between one FD and other from within the kernel.</span><br><span class="line">    sendfile on;</span><br><span class="line">    # Don&#39;t buffer data-sends (disable Nagle algorithm).</span><br><span class="line">    tcp_nodelay on;</span><br><span class="line">    # Causes nginx to attempt to send its HTTP response head in one packet,  instead of using partial frames.</span><br><span class="line">    tcp_nopush on;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # Hide web server information</span><br><span class="line">    server_tokens off;</span><br><span class="line">    server_info off;</span><br><span class="line">    server_tag off;</span><br><span class="line"></span><br><span class="line">    # redirect server error pages to the static page</span><br><span class="line">    error_page 404             &#x2F;404.html;</span><br><span class="line">    error_page 500 502 503 504 &#x2F;50x.html;</span><br><span class="line"></span><br><span class="line"># å®šä¹‰ä¸€ä¸ªç©ºé—´å˜é‡ï¼Œå…è®¸æ¯ç§’è¯·æ±‚ 2 æ¬¡ï¼Œåˆ†é… 100m å†…å­˜å­˜å‚¨ipä¿¡æ¯</span><br><span class="line">    limit_req_zone $binary_remote_addr $request_uri zone&#x3D;req_limit:100m rate&#x3D;2r&#x2F;s;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># geo å®šä¹‰ ip åœ°å€ ï¼Œä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯æŒ‡å®šå•ä¸ªipï¼Œå¦å¤–ä¸€ç§æ˜¯å£°æ˜ rangesï¼ŒæŒ‡å®šipèŒƒå›´</span><br><span class="line">    geo $white_ip_single &#123;</span><br><span class="line">        default 0;</span><br><span class="line">        39.156.69.79 1;</span><br><span class="line">        39.156.69.80 1;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    geo $white_ip_range &#123;</span><br><span class="line">        ranges;</span><br><span class="line">        default 0;</span><br><span class="line">        39.156.69.79~39.156.69.255 1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    limit_req_whitelist geo_var_name&#x3D;white_ip_single geo_var_value&#x3D;1;</span><br><span class="line">    limit_req_whitelist geo_var_name&#x3D;white_ip_range geo_var_value&#x3D;1;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    upstream swoft-upstream &#123;</span><br><span class="line">        server swoft:18316;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">            server_name &quot;localhost&quot;;</span><br><span class="line">            listen 80 default_server;</span><br><span class="line">            listen [::]:80 default_server ipv6only&#x3D;on;</span><br><span class="line">            index index.html index.htm;</span><br><span class="line">            charset utf-8;</span><br><span class="line"></span><br><span class="line">            location &#x2F; &#123;</span><br><span class="line">            	# æ ¹æ®ä¸Šé¢å®šä¹‰çš„ zone é™åˆ¶è¯·æ±‚ ä½†æ˜¯å…è®¸æµ®åŠ¨ 5ä¸ªè¯·æ±‚</span><br><span class="line">                limit_req zone&#x3D;req_limit burst&#x3D;5;</span><br><span class="line">                # proxy_redirect  off;</span><br><span class="line">                proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">                proxy_set_header Host $host;</span><br><span class="line">                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">                proxy_http_version 1.1;</span><br><span class="line">              #  proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">              #  proxy_set_header Connection &quot;upgrade&quot;;</span><br><span class="line">                proxy_set_header Connection &quot;keep-alive&quot;;</span><br><span class="line">                proxy_pass http:&#x2F;&#x2F;swoft-upstream;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            location ~ &#x2F;\.(?!well-known).* &#123;</span><br><span class="line">                deny all;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç›´æ¥ç²˜è´´ conf æ–‡ä»¶äº†ï¼Œä¸è¿‡å¤šè§£é‡Šäº†ã€‚</p><h1 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h1><ul><li><a href="http://tengine.taobao.org/documentation_cn.html" target="_blank" rel="noopener">Tengineå®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://www.cnblogs.com/duanxz/p/3967033.html" target="_blank" rel="noopener">ngx_http_limit_req_moduleæ¨¡å—</a></li></ul><!-- rebuild by neat -->]]></content>
      <categories>
        <category>å¼€å‘ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Tengine</tag>
      </tags>
  </entry>
  <entry>
    <title>php7.4æ‰©å±•å¼€å‘</title>
    <url>/p/ca7e.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>php çš„åº•å±‚æ˜¯ç”± c/c++ å®ç°çš„ï¼Œæ‰€ä»¥ php æœ¬èº«å°±æ˜¯ä¸€å±‚çš®ï¼Œè€Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡å¼€å‘ä¸€äº›æ‰©å±•æ¥å¢å¼º phpã€‚å¯ä»¥é€šè¿‡ <code>php -m</code> æˆ– <code>phpinfo()</code>æ¥æŸ¥çœ‹ç¯å¢ƒä¸­å·²å®‰è£…çš„æ‰©å±•ï¼Œç›®å‰æœ€æ–°çš„ php ç‰ˆæœ¬ä¸º 7.4.6 ï¼Œæ‰€ä»¥ç›´æ¥ä»¥ php7.4 ä¸ºä¾‹ã€‚</p><h1 id="æŸ¥çœ‹-php-ç‰ˆæœ¬"><a href="#æŸ¥çœ‹-php-ç‰ˆæœ¬" class="headerlink" title="æŸ¥çœ‹ php ç‰ˆæœ¬"></a>æŸ¥çœ‹ php ç‰ˆæœ¬</h1><p>å› ä¸ºæœ¬åœ°çš„ php è¿è¡Œç¯å¢ƒæ˜¯é€šè¿‡ docker èµ·çš„ï¼Œè¿™é‡Œä¹Ÿå®‰åˆ©ä¸€æ³¢ <a href="https://laradock.io/" target="_blank" rel="noopener">laradock</a> ç¯å¢ƒæ¨¡æ¿ï¼Œæœ¬åœ°çš„æµ‹è¯•ç¯å¢ƒç”¨èµ·æ¥å®åœ¨æ˜¯å¾ˆèˆ’æœï¼Œåˆå¾ˆè‡ªç”±ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker-compose <span class="built_in">exec</span> workspace bash // é laradock å¿½ç•¥</span><br><span class="line">$ php -v</span><br><span class="line"></span><br><span class="line">PHP 7.4.0 (cli) (built: Nov 28 2019 07:26:50) ( NTS )</span><br><span class="line">Copyright (c) The PHP Group</span><br><span class="line">Zend Engine v3.4.0, Copyright (c) Zend Technologies</span><br><span class="line">    with Zend OPcache v7.4.0, Copyright (c), by Zend Technologies</span><br></pre></td></tr></table></figure><p>è¿™è¾¹ç¡®è®¤ä¸€ä¸‹è‡ªå·±çš„ php ç‰ˆæœ¬ç¡®å®ä¸º 7.4ã€‚</p><h1 id="ä¸‹è½½æºä»£ç "><a href="#ä¸‹è½½æºä»£ç " class="headerlink" title="ä¸‹è½½æºä»£ç "></a>ä¸‹è½½æºä»£ç </h1><p>æˆ‘ä»¬éœ€è¦ä¸‹è½½ php çš„å®˜æ–¹æºç ï¼Œé€‰æ‹©è‡ªå·±å¯¹åº”çš„ç‰ˆæœ¬ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl -O https://www.php.net/distributions/php-7.4.6.tar.bz2</span><br></pre></td></tr></table></figure><blockquote><p>ä¹Ÿå¯ä»¥é€šè¿‡å®˜ç½‘å»è·å–ï¼Œ<a href="https://www.php.net/downloads" target="_blank" rel="noopener">www.php.net</a>ï¼Œé”å®šè‡ªå·±çš„å¤§ç‰ˆæœ¬å³å¯ï¼Œä¾‹å¦‚ 7.2ã€7.3ã€7.4ã€‚</p></blockquote><p>è§£å‹æºç </p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ tar -jxvf php-7.4.6.tar.bz2</span><br></pre></td></tr></table></figure><h1 id="ç”Ÿæˆæ‰©å±•"><a href="#ç”Ÿæˆæ‰©å±•" class="headerlink" title="ç”Ÿæˆæ‰©å±•"></a>ç”Ÿæˆæ‰©å±•</h1><p>è¿›å…¥æºç ç›®å½•ä¸‹ ext ç›®å½•ï¼Œå¯ä»¥ä¸‹é¢æœ‰ä¸ª <code>ext_skel.php</code> æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶æ˜¯ç”¨æ¥ç”Ÿæˆæ‰©å±•å·¥ç¨‹çš„è„šæ‰‹æ¶å‘½ä»¤ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ext</span><br><span class="line">$ php ext_skel.php --ext foobar </span><br><span class="line"></span><br><span class="line">Copying config scripts... <span class="keyword">done</span></span><br><span class="line">Copying sources... <span class="keyword">done</span></span><br><span class="line">Copying tests... <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">Success. The extension is now ready to be compiled. To <span class="keyword">do</span> so, use the</span><br><span class="line">following steps:</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /path/to/php-src/foobar</span><br><span class="line">phpize</span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line"></span><br><span class="line">Don<span class="string">'t forget to run tests once the compilation is done:</span></span><br><span class="line"><span class="string">make test</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Thank you for using PHP!</span></span><br></pre></td></tr></table></figure><p>foobar ä¸ºæ‰©å±•åç§°ï¼Œfoobar æ–‡ä»¶å¤¹å°±æ˜¯éª¨æ¶å·¥ç¨‹äº†ï¼Œå¯¹äº php7 æ˜¯ä¸éœ€è¦å¯¹ php_foobar.h å’Œ foobar.c æ–‡ä»¶åšä»»ä½•å…¶ä»–å˜æ›´ï¼Œå¯ä»¥ç›´æ¥æ·»åŠ è‡ªå·±éœ€è¦çš„å‡½æ•°ã€‚</p><p>æ‰“å¼€ foobar.c æ‰¾ä¸€ä¸ªæœ‰åˆ©çš„ä½ç½®æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">PHP_FUNCTION(hello)</span><br><span class="line">&#123;</span><br><span class="line">    php_printf(<span class="string">"hello world2"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶å®æ¨¡ä»¿ä¸Šä¸‹çš„ foobar_test1 foobar_test2 ä¹Ÿå°±å¤§æ¦‚çŸ¥é“æ”¾åœ¨ä»€ä¹ˆä½ç½®äº†ï¼ŒPHP_FUNCTION å‡½æ•°ä¸Šä¸‹çš„æ³¨é‡Šç›®å‰æˆ‘ä¹Ÿä¸çŸ¥é“æœ‰å•¥ç”¨ï¼Œç»æµ‹è¯•ä¸å½±å“ä»£ç è¿è¡Œã€‚</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> zend_function_entry foobar_functions[] = &#123;</span><br><span class="line">	PHP_FE(hello,	<span class="literal">NULL</span>	) <span class="comment">// å¢åŠ è¿™ä¸€è¡Œ</span></span><br><span class="line">	PHP_FE(foobar_test1,		arginfo_foobar_test1)</span><br><span class="line">	PHP_FE(foobar_test2,		arginfo_foobar_test2)</span><br><span class="line">	PHP_FE_END</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå‡½æ•°åï¼Œç¬¬äºŒä¸ªä¸ºå‡½æ•°å‚æ•°å§(æš‚ä¸ç¡®å®š)ã€‚</p><h1 id="ç¼–è¯‘å®‰è£…"><a href="#ç¼–è¯‘å®‰è£…" class="headerlink" title="ç¼–è¯‘å®‰è£…"></a>ç¼–è¯‘å®‰è£…</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ phpize</span><br><span class="line">$ ./configure</span><br><span class="line">$ make</span><br></pre></td></tr></table></figure><p>ä¸€å¨ä¸€å¨è¾“å‡ºé£è¿‡ï¼Œç•™ä¸‹äº†ä¸€ä¸ª so æ–‡ä»¶ï¼Œmodules æ–‡ä»¶å¤¹ä¸‹å¯ä»¥çœ‹åˆ°è¿™ä¸ªäº§ç‰©ï¼Œå¦‚æœ php è¿è¡Œç¯å¢ƒå’Œä¸Šé¢çš„æ‰©å±•ç”Ÿæˆç¯å¢ƒæ˜¯ä¸€æ ·çš„ï¼Œæ‰§è¡Œ <code>make install</code> ï¼Œä¼šå°† so æ–‡ä»¶ç§»åŠ¨åˆ° php æ‰©å±•çš„é»˜è®¤æ–‡ä»¶è·¯å¾„ä¸‹ã€‚å¦‚æœåƒæˆ‘ä¸€æ ·ï¼Œä»–ä»¬ä¸æ˜¯ä¸€ä¸ªç¯å¢ƒä¹Ÿæ²¡æœ‰å…³ç³»ã€‚</p><h1 id="ini-æ·»åŠ æ‰©å±•"><a href="#ini-æ·»åŠ æ‰©å±•" class="headerlink" title="ini æ·»åŠ æ‰©å±•"></a>ini æ·»åŠ æ‰©å±•</h1><p>æ‰“å¼€ php.ini é…ç½®æ–‡ä»¶æœ€ä¸‹é¢æ·»åŠ ä¸€è¡Œ</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">extension&#x3D;foobar.so &#x2F;&#x2F; make install ä¹‹åå¯ä»¥ç›´æ¥å¡«å†™æ‰©å±•çš„æ–‡ä»¶å OR</span><br><span class="line">extension&#x3D;&#x2F;var&#x2F;www&#x2F;phpext&#x2F;ext&#x2F;foobar&#x2F;modules&#x2F;foobar.so &#x2F;&#x2F; å…¶å®ä¹Ÿå¯ä»¥å†™ç»å¯¹è·¯å¾„</span><br></pre></td></tr></table></figure><h1 id="ä»£ç è°ƒè¯•"><a href="#ä»£ç è°ƒè¯•" class="headerlink" title="ä»£ç è°ƒè¯•"></a>ä»£ç è°ƒè¯•</h1><ul><li>cli ç¯å¢ƒå¯ä»¥æ‰§è¡Œ <code>php -r &quot;hello();echo PHP_EOL;&quot;;</code></li><li>cgi ç¯å¢ƒå¯ä»¥åœ¨ä»£ç ä¸­æ‰§è¡Œ hello();</li></ul><p>éƒ½å¯ä»¥çœ‹åˆ°æœ€ç»ˆ â€œhello world2â€ è¾“å‡ºï¼Œè¿™å°±æ˜¯é€šè¿‡ c ä»£ç ç¼–å†™çš„è¾“å‡ºç»“æœã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>åªæ˜¯ä¸€ä¸ªç»ƒæ‰‹é¡¹ç›®å’Œä»€ä¹ˆ pdo gd ç±»çš„æ‰©å±•é‚£ä¸æ˜¯ä¸€ä¸ªå±‚æ¬¡çš„ã€‚æœ‰äº†æ‰©å±•å¼€å‘å°±èƒ½è°ƒç”¨æ›´åº•å±‚çš„ç³»ç»Ÿæ¥å£ï¼Œå’Œæ›´å¤æ‚çš„è®¡ç®—å‹ä»»åŠ¡ã€‚</p><h1 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h1><ul><li><a href="http://lukachen.com/archives/248/" target="_blank" rel="noopener">php æ‰©å±•å¼€å‘ ä»å…¥é—¨åˆ°æ”¾å¼ƒ(ä¸€)</a></li></ul><!-- rebuild by neat -->]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>phpæ‰©å±•</tag>
      </tags>
  </entry>
  <entry>
    <title>appä¸­ä½¿ç”¨h5æ”¯ä»˜</title>
    <url>/p/58ad.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>å› ä¸ºè‹¹æœçˆ¸çˆ¸çš„å„ç§å°é”ä¸é™åˆ¶ï¼Œå¯¼è‡´ app ä¸­å¦‚æœé›†æˆæ”¯ä»˜sdkä¸Šæ¶ä¼šå˜å¾—ååˆ†å›°éš¾ï¼Œæ€»ä¹‹æ˜¯æƒ³åŠæ³•å»æŠ½æˆã€‚ä¸ºäº†åº”å¯¹è¿™ç§æµæ°“æ”¿ç­–ï¼Œå„å° app å…¬å¸çº·çº·å·æ¢æ¢æŸ±ï¼Œé€šè¿‡ h5 æ”¯ä»˜ä»è€Œç»•å¼€ sdk æ”¯ä»˜ã€‚</p><p>å¸¸è§„çš„ä»€ä¹ˆç”³è¯·ç§˜é’¥ï¼Œé…ç½®å›è°ƒåœ°å€ç­‰æ“ä½œå…¨éƒ¨å¿½ç•¥äº†ï¼Œç›´æ¥è¿›å…¥æ ¸å¿ƒæ­¥éª¤</p><h1 id="æ”¯ä»˜å®æ”¯ä»˜"><a href="#æ”¯ä»˜å®æ”¯ä»˜" class="headerlink" title="æ”¯ä»˜å®æ”¯ä»˜"></a>æ”¯ä»˜å®æ”¯ä»˜</h1><h2 id="ä½¿ç”¨æ”¯ä»˜å®-h5-æ”¯ä»˜"><a href="#ä½¿ç”¨æ”¯ä»˜å®-h5-æ”¯ä»˜" class="headerlink" title="ä½¿ç”¨æ”¯ä»˜å® h5 æ”¯ä»˜"></a>ä½¿ç”¨æ”¯ä»˜å® h5 æ”¯ä»˜</h2><p>æ”¯ä»˜å®çš„ h5 æ”¯ä»˜ï¼Œè¿”å›ä¸€ä¸ª http é“¾æ¥ï¼Œæ˜¯å¯ä»¥ç›´æ¥åœ¨ webview ä¸­ä½¿ç”¨çš„ï¼Œurl ä¼šé‡å®šå‘æœ€ç»ˆæŒ‡å‘åˆ°æ”¯ä»˜å®çš„ä¸“å±åè®®ä¸Šã€‚è¿™é‡Œå»ºè®®ç›´æ¥åœ¨ app ä¸Šç›´æ¥é€šè¿‡ new webview æ–¹å¼å®ç°ã€‚</p><h1 id="å¾®ä¿¡æ”¯ä»˜"><a href="#å¾®ä¿¡æ”¯ä»˜" class="headerlink" title="å¾®ä¿¡æ”¯ä»˜"></a>å¾®ä¿¡æ”¯ä»˜</h1><h2 id="ä½¿ç”¨å¾®ä¿¡-h5-æ”¯ä»˜"><a href="#ä½¿ç”¨å¾®ä¿¡-h5-æ”¯ä»˜" class="headerlink" title="ä½¿ç”¨å¾®ä¿¡ h5 æ”¯ä»˜"></a>ä½¿ç”¨å¾®ä¿¡ h5 æ”¯ä»˜</h2><p>é€šè¿‡å¾®ä¿¡ h5 æ”¯ä»˜ä¹Ÿæ˜¯å¯ä»¥ç”Ÿæˆæ”¯ä»˜é“¾æ¥çš„ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥ä½¿ç”¨è¿™ä¸ª url çš„è¯ï¼Œä¸€å®šä¼šæŠ›ä¸€ä¸ªé”™è¯¯â€œå•†å®¶å‚æ•°æ ¼å¼æœ‰è¯¯ï¼Œè¯·è”ç³»å•†å®¶è§£å†³â€ï¼Œ<a href="https://pay.weixin.qq.com/wiki/doc/api/H5.php?chapter=15_4" target="_blank" rel="noopener">å¾®ä¿¡æ”¯ä»˜çš„é”™è¯¯è§£å†³æ–¹æ¡ˆ</a>ä¸­å·²ç»ç»™å‡ºäº†åŸå› ï¼Œå¾®ä¿¡åœ¨è¿™é‡Œæ ¡éªŒäº† http è¯·æ±‚ä¸­çš„ referer ï¼Œæˆ‘ä»¬ç›´æ¥æ‰“å¼€ url è¯·æ±‚å¤´ä¸­æ˜¯æ²¡æœ‰ referer å­—æ®µçš„ï¼Œæœ€å®¹æ˜“æƒ³åˆ°çš„æ˜¯é€šè¿‡ html ä¸­çš„ a æ ‡ç­¾è·³è½¬é¡µé¢ï¼Œa æ ‡ç­¾ä¼šé»˜è®¤æºå¸¦å½“å‰é¡µé¢çš„ä¸»æœºåœ°å€ã€‚</p><h2 id="ä½¿ç”¨ä¸­è½¬é¡µé¢"><a href="#ä½¿ç”¨ä¸­è½¬é¡µé¢" class="headerlink" title="ä½¿ç”¨ä¸­è½¬é¡µé¢"></a>ä½¿ç”¨ä¸­è½¬é¡µé¢</h2><p>æ‰€ä»¥å°±å†™äº†ä¸€ä¸ªç®€å•çš„ä¸­è½¬é¡µé¢ï¼Œé€»è¾‘å¾ˆç®€å•ï¼Œåœ¨ä¸­è½¬é“¾æ¥ä¸­æ·»åŠ ä¸€ä¸ª pay_url å­—æ®µï¼Œpay_url å°±æ˜¯å¾®ä¿¡ h5 æ”¯ä»˜ç”Ÿæˆçš„é“¾æ¥ï¼Œéœ€è¦è¿›è¡Œ encode ç¼–ç ä¸€ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ js é‡Œé¢é‡æ–°è§£ç ï¼Œè®¾ç½® a æ ‡ç­¾çš„ href ç†Ÿæ‚‰ï¼Œæ‰§è¡Œç‚¹å‡»è¿›è¡Œè·³è½¬ã€‚</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>æ­£åœ¨æ”¯ä»˜<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  æ­£åœ¨æ”¯ä»˜ã€‚ã€‚ã€‚</span><br><span class="line">	<span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">"a"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript"><span class="function"><span class="keyword">function</span> <span class="title">getQueryVariable</span><span class="params">(variable)</span></span></span></span><br><span class="line">&#123;</span><br><span class="line"><span class="javascript">       <span class="keyword">var</span> query = <span class="built_in">window</span>.location.search.substring(<span class="number">1</span>);</span></span><br><span class="line"><span class="actionscript">       <span class="keyword">var</span> vars = query.split(<span class="string">"&amp;"</span>);</span></span><br><span class="line"><span class="actionscript">       <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;vars.length;i++) &#123;</span></span><br><span class="line"><span class="actionscript">               <span class="keyword">var</span> pair = vars[i].split(<span class="string">"="</span>);</span></span><br><span class="line"><span class="actionscript">               <span class="keyword">if</span>(pair[<span class="number">0</span>] == variable)&#123;<span class="keyword">return</span> pair[<span class="number">1</span>];&#125;</span></span><br><span class="line">       &#125;</span><br><span class="line"><span class="actionscript">       <span class="keyword">return</span>(<span class="literal">false</span>);</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> payUrl=getQueryVariable(<span class="string">'pay_url'</span>)</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> decodePayUrl=<span class="built_in">decodeURIComponent</span>(payUrl)</span></span><br><span class="line"></span><br><span class="line"><span class="javascript"><span class="built_in">console</span>.log(payUrl)</span></span><br><span class="line"><span class="javascript"><span class="built_in">console</span>.log(decodePayUrl)</span></span><br><span class="line"></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.getElementById(<span class="string">'a'</span>).setAttribute(<span class="string">'href'</span>,decodePayUrl)</span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.getElementById(<span class="string">'a'</span>).click();</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="æŒ‚è½½ä¸­è½¬ç½‘é¡µ"><a href="#æŒ‚è½½ä¸­è½¬ç½‘é¡µ" class="headerlink" title="æŒ‚è½½ä¸­è½¬ç½‘é¡µ"></a>æŒ‚è½½ä¸­è½¬ç½‘é¡µ</h2><p>æ‰¾ä¸ªæœåŠ¡å™¨æˆ–è€… oss å°†é¡µé¢æ”¾è¿‡å»ï¼Œé…ç½®ä¸€ä¸ªåŸŸåï¼Œå› ä¸ºå¾®ä¿¡çš„ h5 æ”¯ä»˜æ˜¯ç»‘å®šäº†ä¸€ä¸ªä¸»åŸŸåï¼ŒäºŒçº§åŸŸåå…¶å®éƒ½æ˜¯å¯ä»¥ä½¿ç”¨ï¼Œå‡å¦‚æœ€ç»ˆé…ç½®ä¸º<code>pay.abc.com</code>ï¼Œé‚£ä¹ˆæˆ‘ä»¬æœ€ç»ˆçš„è·³è½¬é“¾æ¥ä¸º <a href="http://pay.abc.com?pay_url=http://wechatpay.com?xxxxxxã€‚" target="_blank" rel="noopener">http://pay.abc.com?pay_url=http://wechatpay.com?xxxxxxã€‚</a></p><h1 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h1><p>ä¸ç®¡æ˜¯å¾®ä¿¡æ”¯ä»˜è¿˜æ˜¯æ”¯ä»˜å®æ”¯ä»˜ï¼Œå…¶å®æƒ³ä»æµè§ˆå™¨å”¤é†’æ”¯ä»˜ appï¼Œéƒ½æ˜¯é€šè¿‡ç‰¹æœ‰ schema å”¤é†’çš„ï¼Œæ”¯ä»˜å®çš„åè®®æ˜¯ alipay://ï¼Œå¾®ä¿¡çš„åè®®æ˜¯ weixin://ï¼Œå…¶å®å’Œ http åè®®ä¸€æ ·ï¼Œä¾‹å¦‚ï¼š<a href="http://baidu.com" target="_blank" rel="noopener">http://baidu.com</a> ï¼Œæµè§ˆå™¨ä¼šæ•è· http åè®®ï¼Œæ”¯ä»˜å®å’Œå¾®ä¿¡éƒ½ä¼šæ•è·å±äºè‡ªå·±çš„åè®®ï¼Œè¿™ä¸€ç‚¹ä¸ç®¡åœ¨ android è¿˜æ˜¯ ios ä¸Šï¼Œä¹Ÿæ­£æ˜¯åˆ©ç”¨äº†è¿™ä¸€ç‚¹ï¼Œæ‰ä½¿æˆ‘ä»¬ app ä¸­å”¤é†’æ”¯ä»˜å®æˆ–è€…å¾®ä¿¡æˆä¸ºå¯èƒ½ã€‚å½“ç„¶åé¢å¾ˆå¯èƒ½ä¹Ÿè¢«é™åˆ¶ï¼Œåœ¨å°†æ¥ç›¸å½“é•¿çš„ä¸€æ®µæ—¶é—´æ˜¯ä¸ä¼šçš„ï¼Œæ­£æ˜¯è¿™äº›åè®®ä½¿å¾— h5 å’Œ app è¿›è¡Œäº¤äº’æ‰ä½¿å¾—å¦‚ä»Šç§»åŠ¨æ“ä½œç³»ç»Ÿæ›´åŠ ç¹è£ã€‚</p><h1 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h1><ul><li><a href="https://opendocs.alipay.com/open/203/107090/" target="_blank" rel="noopener">æ”¯ä»˜å®h5æ”¯ä»˜</a></li><li><a href="https://pay.weixin.qq.com/wiki/doc/api/H5.php?chapter=9_20&index=1" target="_blank" rel="noopener">å¾®ä¿¡h5æ”¯ä»˜</a></li></ul><!-- rebuild by neat -->]]></content>
      <categories>
        <category>å¼€å‘ç¬”è®°</category>
      </categories>
      <tags>
        <tag>æ”¯ä»˜</tag>
      </tags>
  </entry>
  <entry>
    <title>redisä¸­åˆ—è¡¨è¿‡æœŸæŠ€å·§</title>
    <url>/p/6c36.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>åœ¨æ“ä½œ redis çš„ list çš„æ—¶å€™ï¼Œå‘ç° list ä¸èƒ½è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">LPUSH languages python</span><br></pre></td></tr></table></figure><p>LPUSH å°†ä¸€ä¸ªå€¼æ¨é€åˆ°ä»¥ languages ä¸º key çš„åˆ—è¡¨ä¸­ï¼Œåœ¨ push çš„æ—¶å€™æ˜¯æ²¡æœ‰åŠæ³•è®¾ç½®è¿‡æœŸæ—¶é—´çš„ã€‚<br>æ‰€ä»¥éœ€è¦åœ¨ç¬¬ä¸€æ¬¡ push åè®¾ç½®è¿‡æœŸæ—¶é—´ã€‚</p><p>å†™å‡ºä¼ªä»£ç </p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$len&#x3D; LLEN languages</span><br><span class="line">if $len &#x3D;&#x3D; 0</span><br><span class="line">	LPUSH languages python</span><br><span class="line">	EXPIRE languages 100 </span><br><span class="line">ELSE</span><br><span class="line">	LPUSH languages python</span><br></pre></td></tr></table></figure><p>å‘ç°å¦‚æœè¿™æ ·æ“ä½œï¼Œæ¯æ¬¡éƒ½éœ€è¦è®¿é—® redis ä¸¤éï¼Œå½“ list ä¸­æ•°æ®è¿‡å¤šæ—¶å°±ä¼šæœ‰æ€§èƒ½é—®é¢˜ï¼Œç®€å•ä¼˜åŒ–äº†ä¸€ä¸‹ï¼Œå°±å¯ä»¥å°‘è®¿é—®ä¸€é redisã€‚</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$len&#x3D; LPUSH languages python</span><br><span class="line">if $len &#x3D;&#x3D; 1</span><br><span class="line">	EXPIRE languages 100</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„æ ¸å¿ƒç‚¹å°±æ˜¯ push å‡½æ•°ä¼šæ”¾ä¼šå½“å‰ list ä¸­ç›®å‰çš„åˆ—è¡¨é•¿åº¦ã€‚</p><h1 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h1><ul><li><a href="http://redisdoc.com/list/lpush.html" target="_blank" rel="noopener">LPUSH</a></li><li><a href="http://redisdoc.com/expire/expire.html" target="_blank" rel="noopener">EXPIRE</a></li></ul><!-- rebuild by neat -->]]></content>
      <categories>
        <category>å¼€å‘ç¬”è®°</category>
      </categories>
      <tags>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title>æµè§ˆå™¨ä¸­æ–‡ä»¶ä¸‹è½½</title>
    <url>/p/e350.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>â€œæµè§ˆå™¨â€å ªç§°æ˜¯è®¡ç®—æœºå†å²ä¸­ä¸€é¡¹ä¼Ÿå¤§çš„å‘æ˜ï¼äº’è”ç½‘æ—©æœŸçš„åº”ç”¨éƒ½æ˜¯ä¸“æœ‰åº”ç”¨ï¼Œéƒ½æ˜¯é’ˆå¯¹æŸä¸ªé¢†åŸŸç‰¹æ®Šåˆ¶ä½œçš„ç‰¹æ®Šåº”ç”¨ï¼Œè‡ªä»æœ‰äº†æµè§ˆå™¨ï¼Œäººä»¬å¯ä»¥çœ‹åˆ°æ›´è½»ä¾¿å’Œæ›´ä¸°å¯Œçš„å†…å®¹ï¼Œè¿™æ‰ç®—èµ°å…¥äº†å¯»å¸¸ç™¾å§“å®¶ã€‚</p><p>ä»Šå¤©å‘ç°æµè§ˆå™¨æœ‰ä¸ªè¡Œä¸ºä»¤æˆ‘ååˆ†ä¸è§£ï¼Œæœ‰äº›æ–‡ä»¶çš„é“¾æ¥æ”¾åœ¨æµè§ˆå™¨é‡Œé¢æ˜¯ç›´æ¥ä¸‹è½½çš„ï¼Œè€Œæœ‰äº›åˆ™è¢«æµè§ˆå™¨ç›´æ¥æ‰“å¼€è€Œæ²¡æœ‰ä¸‹è½½ã€‚</p><ul><li><p>ç›´æ¥ä¸‹è½½çš„é“¾æ¥</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;qcloudoss.xunjiepdf.com&#x2F;xunjiepdf&#x2F;temp&#x2F;20200413&#x2F;1568610660.pdf</span><br></pre></td></tr></table></figure></li><li><p>ç›´æ¥æ‰“å¼€çš„é“¾æ¥</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;file.zhile88.com&#x2F;file&#x2F;LkHL6RvF4g5gD8I0_jianlitongguanbibei.pdf</span><br></pre></td></tr></table></figure></li></ul><p>å¤§å®¶éƒ½æ˜¯ http è¯·æ±‚å‡­ä»€ä¹ˆä½ æ¯”æˆ‘ä¼˜ç§€ï¼Ÿ<br>éšåæˆ‘åˆ†åˆ« curl äº†ä¸€ä¸‹é“¾æ¥ï¼Œåˆ†æäº†ä»–ä»¬çš„åŒºåˆ«</p><ul><li>ç›´æ¥ä¸‹è½½çš„é“¾æ¥</li></ul><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl -I http://qcloudoss.xunjiepdf.com/xunjiepdf/temp/20200413/1568610660.pdf</span><br><span class="line"></span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Server: TencentCOS</span><br><span class="line">x-cos-storage-class: STANDARD</span><br><span class="line">x-cos-hash-crc64ecma: 4085129986793626390</span><br><span class="line">Content-Type: application/pdf</span><br><span class="line">Content-Disposition: attachment; filename*=<span class="string">"UTF-8''1568610660.pdf"</span></span><br><span class="line">Content-Language: zh-CN</span><br><span class="line">ETag: 617eabf18fced6cd1202b86f3e36656c</span><br><span class="line">x-cos-object-type: normal</span><br><span class="line">Accept-Ranges: bytes</span><br><span class="line">Last-Modified: Mon, 13 Apr 2020 15:52:14 GMT</span><br><span class="line">x-cos-request-type: head</span><br><span class="line">Content-Length: 69626</span><br></pre></td></tr></table></figure><ul><li>ç›´æ¥æ‰“å¼€çš„é“¾æ¥</li></ul><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl -I http://file.zhile88.com/file/LkHL6RvF4g5gD8I0_jianlitongguanbibei.pdf </span><br><span class="line"></span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Server: Tengine</span><br><span class="line">Content-Type: application/pdf</span><br><span class="line">Content-Length: 1440571</span><br><span class="line">Connection: keep-alive</span><br><span class="line">Date: Mon, 13 Apr 2020 06:57:25 GMT</span><br><span class="line">Accept-Ranges: bytes</span><br><span class="line">Access-Control-Allow-Origin: *</span><br><span class="line">Access-Control-Expose-Headers: X-Log, X-Reqid</span><br><span class="line">Access-Control-Max-Age: 2592000</span><br><span class="line">Cache-Control: public, max-age=36000000</span><br><span class="line">Content-Disposition: inline; filename=<span class="string">"LkHL6RvF4g5gD8I0_jianlitongguanbibei.pdf"</span>; filename*=utf-8<span class="string">''</span>LkHL6RvF4g5gD8I0_jianlitongguanbibei.pdf</span><br><span class="line">Content-Md5: HhhEZRBLWCJLirG+yhSOeg==</span><br><span class="line">Content-Transfer-Encoding: binary</span><br><span class="line">Etag: <span class="string">"Fpv0_h7Y9qe4Plhlp-UcAwMtqumy"</span></span><br><span class="line">Last-Modified: Mon, 13 Apr 2020 06:41:53 GMT</span><br><span class="line">... çœç•¥æ— å…³çš„header</span><br></pre></td></tr></table></figure><p>å¤´ä¿¡æ¯ä¸­ <code>Content-Disposition</code> ä¸€ä¸‹å°±å¸å¼•äº†æˆ‘ï¼Œä¸€ä¸ªæ˜¯ inlineï¼Œå¦ä¸€ä¸ªæ˜¯ attachmentï¼Œæ ¹æ® mozilla å®˜æ–¹æ–‡æ¡£æˆ‘å¾—åˆ°çš„ä¿¡æ¯å¦‚ä¸‹ï¼š</p><blockquote><p>åœ¨HTTPåœºæ™¯ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æˆ–è€…æ˜¯inlineï¼ˆé»˜è®¤å€¼ï¼Œè¡¨ç¤ºå›å¤ä¸­çš„æ¶ˆæ¯ä½“ä¼šä»¥é¡µé¢çš„ä¸€éƒ¨åˆ†æˆ–è€…æ•´ä¸ªé¡µé¢çš„å½¢å¼å±•ç¤ºï¼‰ï¼Œæˆ–è€…æ˜¯attachmentï¼ˆæ„å‘³ç€æ¶ˆæ¯ä½“åº”è¯¥è¢«ä¸‹è½½åˆ°æœ¬åœ°ï¼›å¤§å¤šæ•°æµè§ˆå™¨ä¼šå‘ˆç°ä¸€ä¸ªâ€œä¿å­˜ä¸ºâ€çš„å¯¹è¯æ¡†ï¼Œå°†filenameçš„å€¼é¢„å¡«ä¸ºä¸‹è½½åçš„æ–‡ä»¶åï¼Œå‡å¦‚å®ƒå­˜åœ¨çš„è¯ï¼‰ã€‚</p></blockquote><p>çœ‹åˆ°è¿™é‡Œä¸€ä¸‹å°±è§£å†³äº†æˆ‘çš„é—®é¢˜ï¼Œæµè§ˆå™¨è‡ªåˆ›å»ºä¹‹åˆåˆ°ç°åœ¨ï¼Œé™†é™†ç»­ç»­ä¹Ÿæ·»åŠ ç€è®¸è®¸å¤šå¤šçš„çº¦å®šå‚æ•°ã€‚ä¸ƒç‰›å¯¹äºéœ€è¦ä¸‹è½½çš„æ–‡ä»¶æ·»åŠ ä¸€ä¸ªå‚æ•°é…ç½®å³å¯ï¼Œä¸ƒç‰›çœŸğŸ‚ã€‚</p><h1 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h1><ul><li><a href="https://www.bilibili.com/video/av97883778/" target="_blank" rel="noopener">userAgent è§†é¢‘</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Disposition" target="_blank" rel="noopener">mozilla doc</a></li><li><a href="https://developer.qiniu.com/kodo/manual/1659/download-setting" target="_blank" rel="noopener">ä¸ƒç‰›ä¸‹è½½è®¾ç½®</a></li></ul><!-- rebuild by neat -->]]></content>
  </entry>
  <entry>
    <title>æ‰‹æ‘¸æ‰‹æ•™ä½ æ­å»º api ç½‘å…³</title>
    <url>/p/dbb5.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>ç°åœ¨çš„é¡¹ç›®æœ‰ä¸ªéœ€æ±‚ï¼Œéœ€è¦åˆ†ææ¯ä¸€æ¡ api çš„è¯·æ±‚æ—¶é—´ï¼Œç›®å‰çœ‹åˆ°ä¸€å¥—æ¯”è¾ƒå¥½çš„æ–¹æ¡ˆæ˜¯ <code>kong + Prometheus + Grafana</code>ï¼Œä¹‹å‰æ˜¯å¬è¯´è¿‡ kong æ‰©å±•æ€§æ¯”è¾ƒå¥½ï¼Œä½†ä¸€ç›´æ²¡æœ‰å®è·µçš„æœºä¼šï¼Œå€Ÿæ­¤æœºä¼šæ¥ç©ä¸€ç©æ ¸æ­¦å™¨ã€‚</p><p>æˆ‘ç†Ÿæ‚‰çš„æ–¹å¼è¿˜æ˜¯ dockerï¼Œè¿˜æ˜¯ç”¨å®ƒä»å¤´æ­å»ºè¿™ä¸€å¥—ç³»ç»Ÿã€‚</p><blockquote><p>ç«‹ä¸ª flagï¼Œä»Šå¹´å¿…é¡»å­¦ä¼š <strong>kubernetes</strong>ã€‚</p></blockquote><p>å‚è€ƒäº†å¤šç¯‡æ–‡ç« å„å–æ‰€é•¿ï¼Œç†é¡ºäº†å„ä¸ªè½¯ä»¶ä¹‹é—´å…³ç³»ä¹‹åï¼Œå‘ç°ç½‘ä¸Šçš„è¿™äº›æ–¹æ³•éƒ½è¿‡äºå¤æ‚ï¼Œå¾ˆå¤šæ–‡ç« ä¹Ÿæ˜¯ç›¸äº’æ‹¼å‡‘ï¼Œå®¹å™¨åŒ–ä¸åƒå®¹å™¨åŒ–ï¼Œå…¶å® kongã€Prometheusã€Grafana ä¹‹é—´çš„å…¼å®¹æ€§å·²ç»è¶³å¤Ÿå¥½äº†ï¼Œæˆ‘åœ¨æ“ä½œè¿‡ç¨‹ä¸­ç¡®å®ä¹Ÿè¸©äº†ä¸€äº›å‘ï¼Œä½†æ˜¯æˆ‘å·²ç»å¯ä»¥å°†ä»–ä»¬å½»åº•å®¹å™¨åŒ–éƒ¨ç½²äº†ã€‚</p><h1 id="è¿è¡Œ-kong"><a href="#è¿è¡Œ-kong" class="headerlink" title="è¿è¡Œ kong"></a>è¿è¡Œ kong</h1><h2 id="åˆ›å»ºå­ç½‘"><a href="#åˆ›å»ºå­ç½‘" class="headerlink" title="åˆ›å»ºå­ç½‘"></a>åˆ›å»ºå­ç½‘</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker network create kong-net</span><br></pre></td></tr></table></figure><h2 id="è¿è¡Œæ•°æ®åº“"><a href="#è¿è¡Œæ•°æ®åº“" class="headerlink" title="è¿è¡Œæ•°æ®åº“"></a>è¿è¡Œæ•°æ®åº“</h2><h3 id="åˆ›å»ºæ•°æ®åº“"><a href="#åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d --name kong-database \</span><br><span class="line">               --network=kong-net \</span><br><span class="line">               -p 5432:5432 \</span><br><span class="line">               -e <span class="string">"POSTGRES_USER=kong"</span> \</span><br><span class="line">               -e <span class="string">"POSTGRES_DB=kong"</span> \</span><br><span class="line">               -e <span class="string">"POSTGRES_PASSWORD=kong"</span> \</span><br><span class="line">               postgres:9.6</span><br></pre></td></tr></table></figure><h3 id="æ•°æ®åº“è¿ç§»"><a href="#æ•°æ®åº“è¿ç§»" class="headerlink" title="æ•°æ®åº“è¿ç§»"></a>æ•°æ®åº“è¿ç§»</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run --rm \</span><br><span class="line">     --network=kong-net \</span><br><span class="line">     -e <span class="string">"KONG_DATABASE=postgres"</span> \</span><br><span class="line">     -e <span class="string">"KONG_PG_HOST=kong-database"</span> \</span><br><span class="line">     -e <span class="string">"KONG_PG_PASSWORD=kong"</span> \</span><br><span class="line">     -e <span class="string">"KONG_CASSANDRA_CONTACT_POINTS=kong-database"</span> \</span><br><span class="line">     kong:1.5 kong migrations bootstrap</span><br></pre></td></tr></table></figure><h2 id="è¿è¡Œ-kong-1"><a href="#è¿è¡Œ-kong-1" class="headerlink" title="è¿è¡Œ kong"></a>è¿è¡Œ kong</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d --name kong \</span><br><span class="line">     --network=kong-net \</span><br><span class="line">     -e <span class="string">"KONG_DATABASE=postgres"</span> \</span><br><span class="line">     -e <span class="string">"KONG_PG_HOST=kong-database"</span> \</span><br><span class="line">     -e <span class="string">"KONG_PG_PASSWORD=kong"</span> \</span><br><span class="line">     -e <span class="string">"KONG_CASSANDRA_CONTACT_POINTS=kong-database"</span> \</span><br><span class="line">     -e <span class="string">"KONG_PROXY_ACCESS_LOG=/dev/stdout"</span> \</span><br><span class="line">     -e <span class="string">"KONG_ADMIN_ACCESS_LOG=/dev/stdout"</span> \</span><br><span class="line">     -e <span class="string">"KONG_PROXY_ERROR_LOG=/dev/stderr"</span> \</span><br><span class="line">     -e <span class="string">"KONG_ADMIN_ERROR_LOG=/dev/stderr"</span> \</span><br><span class="line">     -e <span class="string">"KONG_ADMIN_LISTEN=0.0.0.0:8001, 0.0.0.0:8444 ssl"</span> \</span><br><span class="line">     -p 8000:8000 \</span><br><span class="line">     -p 8443:8443 \</span><br><span class="line">     -p 8001:8001 \</span><br><span class="line">     -p 8444:8444 \</span><br><span class="line">     kong:1.5</span><br></pre></td></tr></table></figure><h2 id="è¿è¡Œ-kong-gui"><a href="#è¿è¡Œ-kong-gui" class="headerlink" title="è¿è¡Œ kong gui"></a>è¿è¡Œ kong gui</h2><h3 id="è¿è¡Œ-kong-dashboard"><a href="#è¿è¡Œ-kong-dashboard" class="headerlink" title="è¿è¡Œ kong-dashboard"></a><del>è¿è¡Œ kong-dashboard</del></h3><blockquote><p>å»ºè®®ç›´æ¥è·³è¿‡ï¼Œdashboard å¯ä»¥è¿è¡Œï¼Œä½†æ˜¯å‰ç«¯å°½æ˜¯æŠ¥é”™ï¼Œgithubä¸Šé¢çš„issueä¹Ÿæ²¡äººå¤„ç†ï¼Œåº”è¯¥æ˜¯ä¸ç»´æŠ¤äº†ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run 	--network=kong-net \</span><br><span class="line">			--name kong-dashboard \</span><br><span class="line">            -p 8080:8080 \</span><br><span class="line">            -d pgbi/kong-dashboard \</span><br><span class="line">            start --kong-url http://kong:8001 \</span><br><span class="line">            --basic-auth user1=password1</span><br></pre></td></tr></table></figure><h3 id="è¿è¡Œ-konga"><a href="#è¿è¡Œ-konga" class="headerlink" title="è¿è¡Œ konga"></a>è¿è¡Œ konga</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -p 8080:1337 \</span><br><span class="line">           --network kong-net \</span><br><span class="line">           --name konga \</span><br><span class="line">           -e <span class="string">"NODE_ENV=production"</span> \</span><br><span class="line">           -d pantsel/konga:0.14.7</span><br></pre></td></tr></table></figure><h2 id="è¿è¡Œ-prometheus"><a href="#è¿è¡Œ-prometheus" class="headerlink" title="è¿è¡Œ prometheus"></a>è¿è¡Œ prometheus</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker run --name prometheus \</span><br><span class="line">--network&#x3D;kong-net \</span><br><span class="line">-p 9090:9090 \</span><br><span class="line"> -v &#x2F;root&#x2F;prometheus&#x2F;prometheus.yml:&#x2F;etc&#x2F;prometheus&#x2F;prometheus.yml \</span><br><span class="line"> -d prom&#x2F;prometheus:v2.16.0</span><br></pre></td></tr></table></figure><p>prometheus.yml æ–‡ä»¶é…ç½®å¦‚ä¸‹</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">global:</span></span><br><span class="line">  <span class="attr">scrape_interval:</span>     <span class="string">15s</span> <span class="comment"># By default, scrape targets every 15 seconds.</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Attach these labels to any time series or alerts when communicating with</span></span><br><span class="line">  <span class="comment"># external systems (federation, remote storage, Alertmanager).</span></span><br><span class="line">  <span class="attr">external_labels:</span></span><br><span class="line">    <span class="attr">monitor:</span> <span class="string">'codelab-monitor'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># A scrape configuration containing exactly one endpoint to scrape:</span></span><br><span class="line"><span class="comment"># Here it's Prometheus itself.</span></span><br><span class="line"><span class="attr">scrape_configs:</span></span><br><span class="line">  <span class="comment"># The job name is added as a label `job=&lt;job_name&gt;` to any timeseries scraped from this config.</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">job_name:</span> <span class="string">'prometheus'</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Override the global default and scrape targets from this job every 5 seconds.</span></span><br><span class="line">    <span class="attr">scrape_interval:</span> <span class="string">5s</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">static_configs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">targets:</span> <span class="string">['kong:8001']</span></span><br></pre></td></tr></table></figure><p>æ ¸å¿ƒç‚¹å°±æ˜¯ä¸Šé¢çš„ targetsï¼Œç›¸ä¿¡å¾ˆå¤šåˆ†æç±»çš„æ–‡ç« éƒ½æ²¡æœ‰æåˆ°ã€‚</p><h2 id="è¿è¡Œ-grafana"><a href="#è¿è¡Œ-grafana" class="headerlink" title="è¿è¡Œ grafana"></a>è¿è¡Œ grafana</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker run -d --network&#x3D;kong-net --name&#x3D;grafana -p 3000:3000 grafana&#x2F;grafana:6.6.2</span><br></pre></td></tr></table></figure><p>è¿è¡Œä¹‹åï¼Œç›´æ¥æ·»åŠ ä¸€ä¸ª dashboard å³å¯ã€‚</p><h1 id="å°èŠ‚ä¸€ä¸‹"><a href="#å°èŠ‚ä¸€ä¸‹" class="headerlink" title="å°èŠ‚ä¸€ä¸‹"></a>å°èŠ‚ä¸€ä¸‹</h1><p>api ç»è¿‡ kongï¼Œä¼šç•™ä¸‹æ—¥å¿—ï¼Œprometheus é€šè¿‡ <code>kong:8001</code> ç«¯ç‚¹æ ‡å‡†åŒ–é‡‡é›†çš„æ—¥å¿—ï¼Œ<br>grafana é€šè¿‡ prometheus å¾—åˆ°æ ‡å‡†åçš„æ—¥å¿—è¿›è¡Œå±•ç¤ºã€‚</p><h1 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h1><ul><li><a href="https://konghq.com/" target="_blank" rel="noopener">kong å®˜ç½‘</a></li><li><a href="https://github.com/pantsel/konga" target="_blank" rel="noopener">konga github</a></li><li><a href="https://prometheus.io/docs/prometheus/latest/installation/" target="_blank" rel="noopener">Prometheus å®‰è£…</a></li><li><a href="">Grafana å®˜ç½‘</a></li><li><a href="https://blog.csdn.net/weixin_39560112/article/details/101849583" target="_blank" rel="noopener">Kongæ’ä»¶Prometheusçš„Grafanaå›¾å½¢åŒ–å±•ç¤º</a></li><li><a href="https://www.cnblogs.com/xiao987334176/p/9930517.html" target="_blank" rel="noopener">åŸºäºdocker æ­å»ºPrometheus+Grafana</a></li></ul><!-- rebuild by neat -->]]></content>
      <categories>
        <category>å¼€å‘ç¬”è®°</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>kong</tag>
        <tag>Prometheus</tag>
        <tag>Grafana</tag>
        <tag>konga</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¡ç®—æœºæ˜¯å¦‚ä½•å­˜å‚¨æ•°å­—çš„</title>
    <url>/p/bec1.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> a=<span class="number">12</span>;</span><br><span class="line"><span class="keyword">int</span> b=<span class="number">1.234</span>;</span><br></pre></td></tr></table></figure><p>é—®ï¼ša å’Œ b åœ¨è®¡ç®—æœºä¸­åˆ°åº•æ˜¯å¦‚ä½•å­˜å‚¨çš„ï¼Ÿ</p><p>ç­”ï¼šè½¬ä¸ºäºŒè¿›åˆ¶ï¼Ÿ</p><p>é—®ï¼šè½¬æˆäºŒè¿›åˆ¶å°±ç›´æ¥å­˜å‚¨äº†ï¼Ÿ</p><p>ç­”ï¼šâ€¦</p><p>é—®ï¼šå°æ•° b å¦‚ä½•è½¬æˆäºŒè¿›åˆ¶çš„ï¼Ÿ</p><p>ç­”ï¼šâ€¦</p><p>æˆ‘ä»¬æ—¥å¸¸æ›´å¤šçš„æ—¶å€™éƒ½åœ¨ä½¿ç”¨åè¿›åˆ¶çš„æ•°ï¼Œè¦çŸ¥é“æˆ‘ä»¬çš„ç¥–å…ˆå¯å‰å®³äº†ï¼Œåº”è¯¥å¾ˆé•¿ä¸€æ®µæ—¶é—´éƒ½åœ¨ä½¿ç”¨ 16 è¿›åˆ¶ã€‚è­¬å¦‚ä¸€ä¸ªæˆè¯­å«â€œåŠæ–¤å…«ä¸¤â€ï¼Œè§£é‡Šï¼šåŠæ–¤ã€å…«ä¸¤è½»é‡ç›¸ç­‰ï¼Œæ¯”å–»å½¼æ­¤ä¸ç›¸ä¸Šä¸‹ã€‚ç­‰ç­‰ï¼åŠæ–¤å’Œå…«ä¸¤æ€ä¹ˆç›¸ç­‰ï¼Œå¯¹çš„ï¼Œå®‹ä»£ä¸€æ–¤å°±æ˜¯ç­‰äºåå…­ä¸¤ï¼Œå½“ç„¶åŠæ–¤ç­‰äºå…«ä¸¤ã€‚</p><p>éƒ½çŸ¥é“è®¡ç®—æœºä½¿ç”¨çš„æ˜¯äºŒè¿›åˆ¶ï¼Œåªç”¨ 0 å’Œ 1 å°±èƒ½è¡¨ç¤ºæ•°å­—ï¼Œä½†æ˜¯è®¡ç®—æœºåˆ°åº•æ˜¯å¦‚ä½•è§£å†³æ•°å­—å­˜å‚¨çš„é—®é¢˜ï¼Ÿä¸‹é¢åˆ†åˆ«è®¨è®ºæ•´æ•°å’Œå°æ•°çš„å­˜å‚¨ï¼š</p><h1 id="å¦‚ä½•å­˜å‚¨æ•´æ•°"><a href="#å¦‚ä½•å­˜å‚¨æ•´æ•°" class="headerlink" title="å¦‚ä½•å­˜å‚¨æ•´æ•°"></a>å¦‚ä½•å­˜å‚¨æ•´æ•°</h1><p>å‡è®¾æˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ª 8 ä½çš„æ“ä½œç³»ç»Ÿï¼Œæœ€é«˜ä½æ˜¯ç¬¦å·ä½ï¼Œ1 è¡¨ç¤ºè´Ÿæ•°ï¼Œ0 è¡¨ç¤ºæ­£æ•°ï¼Œæ‰€ä»¥èƒ½è¡¨ç¤ºçš„æœ€å¤§çš„æ•´æ•°åŒºé—´ä¸º <strong>11111111 ~ 01111111 =&gt; -127 ~ 127</strong>ã€‚</p><p>ä½†æ˜¯åœ¨å­˜å‚¨è¡¨è¾¾çš„æ—¶å€™ä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œ10000000 å’Œ 00000000 ä¸¤ä¸ª 0 çš„é—®é¢˜ï¼Œ+0 å’Œ -0 åº”è¯¥ä¹Ÿæ˜¯ç›¸ç­‰çš„ï¼Œè¿™ç»™ç”µè·¯è®¾è®¡ä¸Šå¸¦æ¥äº†å¾ˆå¤šéº»çƒ¦å’Œå¤šä½™çš„è®¡ç®—è§„åˆ™ã€‚</p><h2 id="åè¿›åˆ¶è½¬æˆäºŒè¿›åˆ¶"><a href="#åè¿›åˆ¶è½¬æˆäºŒè¿›åˆ¶" class="headerlink" title="åè¿›åˆ¶è½¬æˆäºŒè¿›åˆ¶"></a>åè¿›åˆ¶è½¬æˆäºŒè¿›åˆ¶</h2><p>ç®€å•ç‚¹çš„è®°å¿†å°±æ˜¯ï¼šé™¤ 2 å–ä½™å†å€’åºã€‚</p><ul><li>12 / 2 = 6..0</li><li>6 / 2 = 3..0</li><li>3 / 2 = 1..1</li><li>1 / 2 = 0..1</li></ul><p>0011 å€’åº å³ä¸º 1100ï¼Œè½¬æˆå…«ä½å³åœ¨å‰é¢è¡¥0ï¼Œåˆ™ç»“æœä¸º 0000_1100ã€‚</p><blockquote><p>0000_1100 æ˜¯ java8 ä¸­çš„å†™æ³•ï¼Œæˆ‘è§‰å¾—çœ‹èµ·æ¥æ¯”è¾ƒèˆ’æœä¸”å‰åè¿è´¯ï¼Œ_ æ˜¯ä¸ºäº†çœ‹èµ·æ¥æ¯”è¾ƒæ¸…æ¥šäººä¸ºæ·»åŠ çš„ï¼Œåé¢æ²¿ç”¨è¿™ç§å†™æ³•ï¼Œ0000_1100 = 00001100= 0000 1100<br>éƒ½æ˜¯ç›¸ç­‰ã€‚</p></blockquote><h2 id="ä¸€ä¸ªå¤©æ‰çš„è®¾è®¡å¸ˆ"><a href="#ä¸€ä¸ªå¤©æ‰çš„è®¾è®¡å¸ˆ" class="headerlink" title="ä¸€ä¸ªå¤©æ‰çš„è®¾è®¡å¸ˆ"></a>ä¸€ä¸ªå¤©æ‰çš„è®¾è®¡å¸ˆ</h2><p>çœ‹äº†å¾ˆå¤šçš„æ–‡æ¡£æ²¡æœ‰æ‰¾åˆ°è§£å†³è¿™ä¸ªé—®é¢˜çš„ä½œè€…æ˜¯è°ï¼Ÿä¸ç®¡æ˜¯è°åæ­£æå‡ºäº†<code>è¡¥ç </code>è¿™ä¸ªæ¦‚å¿µï¼ŒçœŸçš„æ˜¯æœ‰æ•ˆçš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œä¸ä»…è§£å†³äº† 0 è¿™ä¸ªé—®é¢˜è¿˜å¸¦æ¥äº†ä¸€ä¸ªæ›´å¤§çš„ä¼˜ç‚¹ï¼Œåé¢è¡¥å……ã€‚</p><h2 id="æ­£æ•°çš„åŸç ã€åç ã€è¡¥ç "><a href="#æ­£æ•°çš„åŸç ã€åç ã€è¡¥ç " class="headerlink" title="æ­£æ•°çš„åŸç ã€åç ã€è¡¥ç "></a>æ­£æ•°çš„åŸç ã€åç ã€è¡¥ç </h2><p>æ­£æ•°åŸç  = åç  = è¡¥ç </p><ul><li>12 çš„åŸç æ˜¯ 0000_1100</li><li>12 çš„åç æ˜¯ 0000_1100</li><li>12 çš„è¡¥ç æ˜¯ 0000_1100</li></ul><p>è¿™é‡Œå¹¶æ²¡æœ‰åºŸè¯ï¼Œå°½æ˜¯ç§‘å­¦ã€‚</p><h2 id="è´Ÿæ•°çš„åŸç ã€åç ã€è¡¥ç "><a href="#è´Ÿæ•°çš„åŸç ã€åç ã€è¡¥ç " class="headerlink" title="è´Ÿæ•°çš„åŸç ã€åç ã€è¡¥ç "></a>è´Ÿæ•°çš„åŸç ã€åç ã€è¡¥ç </h2><p>åç  = åŸç ç¬¦å·ä½ä¸å˜å…¶ä»–ä½å–å</p><p>è¡¥ç  = åç  + 1</p><ul><li>-12 çš„åŸç æ˜¯ 1000_1100</li><li>-12 çš„åç æ˜¯ 1111_0011</li><li>-12 çš„è¡¥ç æ˜¯ 1111_0100</li></ul><h2 id="0-çš„å­˜å‚¨"><a href="#0-çš„å­˜å‚¨" class="headerlink" title="0 çš„å­˜å‚¨"></a>0 çš„å­˜å‚¨</h2><h3 id="0"><a href="#0" class="headerlink" title="+0"></a>+0</h3><ul><li>åŸç ï¼š0000_0000</li><li>åç ï¼š0000_0000</li><li>è¡¥ç ï¼š0000_0000</li></ul><h3 id="0-1"><a href="#0-1" class="headerlink" title="-0"></a>-0</h3><ul><li>åŸç ï¼š1000_0000</li><li>åç ï¼š1111_1111</li><li>è¡¥ç ï¼š0000_0000</li></ul><p>è¿™é‡Œåº”è¯¥æŠŠå‰é¢çš„é—®é¢˜éƒ½è§£å†³äº†å§ï¼Œè¡¥ç ä¸ä»…è§£å†³äº† +0 å’Œ -0 çš„é—®é¢˜ï¼Œè¿˜ç¥å¥‡çš„æŠŠç¬¦å·ä½éƒ½å»æ‰äº†ï¼Œè®¡ç®—æœºåœ¨è¿è¡Œçš„è¿‡ç¨‹ä¸­ä»è€Œå¯ä»¥æ›´ç®€å•çš„è¿›è¡Œè¿ç®—ã€‚</p><h2 id="å‡æ³•è¿ç®—"><a href="#å‡æ³•è¿ç®—" class="headerlink" title="å‡æ³•è¿ç®—"></a>å‡æ³•è¿ç®—</h2><p>ä¸ºäº†æ•ˆç‡ï¼Œè®¡ç®—æœºåº•å±‚è®¡ç®—çš„æ—¶å€™æ˜¯æ²¡æœ‰å‡æ³•è¿ç®—ï¼Œå‡æ³•è¿ç®—éƒ½è½¬æˆåŠ æ³•è¿ç®—ã€‚</p><p>12 - 12 =&gt; 12 + (-12) =&gt; 0000_1100 + 1111_0100 =&gt; 0000_0000</p><ul><li>0000_110<code>0</code> + 1111_010<code>0</code> = 0 + 0 = 0</li><li>0000_11<code>0</code>0 + 1111_01<code>0</code>0 = 0 + 0 = 0</li><li>0000_1<code>1</code>00 + 1111_0<code>1</code>00 = 1 + 1 = 0 è¿› 1</li><li>0000_<code>1</code>100 + 1111_<code>0</code>100 = 1+ 0 + è¿›1= 0 è¿› 1</li><li>000<code>0</code>_1100 + 111<code>1</code>_0100 = 0+ 1 + è¿›1= 0 è¿› 1</li><li>00<code>0</code>0_1100 + 11<code>1</code>1_0100 = 0+ 1 + è¿›1= 0 è¿› 1</li><li>0<code>0</code>00_1100 + 1<code>1</code>11_0100 = 0+ 1 + è¿›1= 0 è¿› 1</li><li><code>0</code>000_1100 + <code>1</code>111_0100 = 0+ 1 + è¿›1= 0 è¿› 1</li></ul><p>å› ä¸ºåªèƒ½å­˜å‚¨ 8 ä½ï¼Œæœ€åä¸€ä¸ªè¿› 1 çˆ†æ‰å°±å‰©ä¸‹ 0000_0000 äº†ã€‚</p><blockquote><p>è¿™é‡Œéƒ½æ˜¯ä»¥ 8 ä½è®¡ç®—æœºè¿›è¡Œä¸¾ä¾‹ï¼Œç°åœ¨çš„ 32 ä½æˆ–è€… 64 ä½è®¡ç®—æœºéƒ½æ˜¯åŒç†çš„ã€‚</p></blockquote><h1 id="å¦‚ä½•å­˜å‚¨æµ®ç‚¹æ•°"><a href="#å¦‚ä½•å­˜å‚¨æµ®ç‚¹æ•°" class="headerlink" title="å¦‚ä½•å­˜å‚¨æµ®ç‚¹æ•°"></a>å¦‚ä½•å­˜å‚¨æµ®ç‚¹æ•°</h1><p>ç›¸ä¿¡å¾ˆå¤šäººå°æ•°è½¬æˆäºŒè¿›åˆ¶éƒ½æ˜¯ä¸çŸ¥é“å¦‚ä½•è¿ç®—çš„ï¼Œæ›´åˆ«è°ˆå­˜å‚¨äº†ï¼Œä¸‹é¢æˆ‘å°±å¨“å¨“é“æ¥ã€‚</p><blockquote><p>æ–‡ç« åˆšå¼€å§‹ç¼–è¾‘çš„æ—¶å€™å°†æµ®ç‚¹æ•°ç§°ä¸ºå°æ•°ï¼Œç”±äºå‘ç°è¿™æ ·ä¸ä¸“ä¸šï¼Œå…¶å®å°æ•°ä¸ä¸€å®šéƒ½æ˜¯æµ®ç‚¹æ•°ï¼Œåœ¨é‚£ä¸ªæ²¡æœ‰æ ‡å‡†å„è‡ªä¸ºæ”¿çš„æ—©è®¡ç®—æœºæ—¶ä»£å…¶å®è¿˜æ˜¯æœ‰å®šç‚¹æ•°ï¼Œæ„Ÿå…´è¶£å¯ä»¥çœ‹å‚è€ƒæ–‡æ¡£ã€‚</p></blockquote><h2 id="æµ®ç‚¹æ•°è½¬æˆäºŒè¿›åˆ¶"><a href="#æµ®ç‚¹æ•°è½¬æˆäºŒè¿›åˆ¶" class="headerlink" title="æµ®ç‚¹æ•°è½¬æˆäºŒè¿›åˆ¶"></a>æµ®ç‚¹æ•°è½¬æˆäºŒè¿›åˆ¶</h2><p>1.234 åœ¨è®¡ç®—æœºä¸­è½¬æˆäºŒè¿›åˆ¶æ˜¯æŒ‰ç…§æ˜¯åˆ†æ•´æ•°éƒ¨åˆ†å’Œå°æ•°éƒ¨åˆ†è¿›è¡Œçš„ï¼Œæ•´æ•°éƒ¨åˆ†ä¸Šé¢ä»¥å‰è®²åˆ°ï¼Œè¿™é‡Œè¯´ä¸‹å°æ•°éƒ¨åˆ† 0.234 ä¸ºä¾‹ï¼š</p><p>ç®€å•ç‚¹çš„è®°å¿†å°±æ˜¯ï¼šä¹˜ 2 å–æ•´å†é¡ºåºã€‚</p><ul><li>0.234 * 2 = 0.468 =&gt; æ•´æ•°éƒ¨åˆ†ä¸º 0 =&gt; å– 0</li><li>0.468 * 2 = 0.936 =&gt; æ•´æ•°éƒ¨åˆ†ä¸º 0 =&gt; å– 0</li><li>0.936 * 2 = 1.872 =&gt; æ•´æ•°éƒ¨åˆ†ä¸º 1 =&gt; å– 1 (å¹¶å°†æ•´æ•°éƒ¨åˆ†æŠ¹å»)</li><li>0.872 * 2 = 1.744 =&gt; æ•´æ•°éƒ¨åˆ†ä¸º 1 =&gt; å– 1 (å¹¶å°†æ•´æ•°éƒ¨åˆ†æŠ¹å»)</li><li>0.744 * 2 = 1.488 =&gt; æ•´æ•°éƒ¨åˆ†ä¸º 1 =&gt; å– 1 (å¹¶å°†æ•´æ•°éƒ¨åˆ†æŠ¹å»)</li><li>0.488 * 2 = 0.976 =&gt; æ•´æ•°éƒ¨åˆ†ä¸º 0 =&gt; å– 0</li><li>0.976 * 2 = 1.952 =&gt; æ•´æ•°éƒ¨åˆ†ä¸º 1 =&gt; å– 1 (å¹¶å°†æ•´æ•°éƒ¨åˆ†æŠ¹å»)</li><li>0.952 * 2 = 1.904 =&gt; æ•´æ•°éƒ¨åˆ†ä¸º 1 =&gt; å– 1 (å¹¶å°†æ•´æ•°éƒ¨åˆ†æŠ¹å»)</li><li>0.904 * 2 = 1.808 =&gt; æ•´æ•°éƒ¨åˆ†ä¸º 1 =&gt; å– 1 (å¹¶å°†æ•´æ•°éƒ¨åˆ†æŠ¹å»)</li><li>0.808 * 2 = 1.616 =&gt; æ•´æ•°éƒ¨åˆ†ä¸º 1 =&gt; å– 1 (å¹¶å°†æ•´æ•°éƒ¨åˆ†æŠ¹å»)</li><li>0.616 * 2 = 1.232 =&gt; æ•´æ•°éƒ¨åˆ†ä¸º 1 =&gt; å– 1 (å¹¶å°†æ•´æ•°éƒ¨åˆ†æŠ¹å»)</li><li>0.232 * 2 = 0.464 =&gt; æ•´æ•°éƒ¨åˆ†ä¸º 0 =&gt; å– 0</li><li>â€¦</li></ul><p>ä¸‹é¢å°±ä¸å†™ä¸‹å»äº†ç»“æœæ˜¯ 0.001110111110â€¦ï¼Œå†™çš„è¶Šé•¿ç²¾åº¦è¶Šé«˜ã€‚</p><p>å¯è§æµ®ç‚¹æ•°å­˜å‚¨å¿…å°†æ˜¯ä¸€ä¸ªå¤´ç–¼çš„é—®é¢˜ï¼Œæµ®ç‚¹æ•°åº•å±‚çš„é€»è¾‘è‚¯å®šä¹Ÿæ˜¯æ¯”æ•´æ•°æ›´ä¸ºå¤æ‚ã€‚</p><h2 id="IEEE754-æ ‡å‡†"><a href="#IEEE754-æ ‡å‡†" class="headerlink" title="IEEE754 æ ‡å‡†"></a>IEEE754 æ ‡å‡†</h2><p>ç”µæ°”ç”µå­å·¥ç¨‹å¸ˆå­¦ä¼šï¼ˆè‹±è¯­ï¼šInstitute of Electrical and Electronics Engineersï¼‰ç®€ç§°ä¸º IEEEï¼ŒIEEE754æ˜¯ä¸“é—¨è§„å®šæµ®ç‚¹æ•°è¯¥å¦‚ä½•å­˜å‚¨çš„ä¸€ä¸ªæ ‡å‡†ï¼Œè§„å®šäº†å››ç§è¡¨ç¤ºæµ®ç‚¹æ•°å€¼çš„æ–¹å¼ï¼šå•ç²¾ç¡®åº¦ï¼ˆ32ä½ï¼‰ã€åŒç²¾ç¡®åº¦ï¼ˆ64ä½ï¼‰ã€å»¶ä¼¸å•ç²¾ç¡®åº¦ï¼ˆ43æ¯”ç‰¹ä»¥ä¸Šï¼Œå¾ˆå°‘ä½¿ç”¨ï¼‰ä¸å»¶ä¼¸åŒç²¾ç¡®åº¦ï¼ˆ79æ¯”ç‰¹ä»¥ä¸Šï¼Œé€šå¸¸ä»¥80ä½å®ç°ï¼‰ã€‚</p><h3 id="ä»»æ„ä¸€ä¸ªæµ®ç‚¹æ•°éƒ½å¯ä»¥è¡¨ç¤ºä¸ºï¼š"><a href="#ä»»æ„ä¸€ä¸ªæµ®ç‚¹æ•°éƒ½å¯ä»¥è¡¨ç¤ºä¸ºï¼š" class="headerlink" title="ä»»æ„ä¸€ä¸ªæµ®ç‚¹æ•°éƒ½å¯ä»¥è¡¨ç¤ºä¸ºï¼š"></a>ä»»æ„ä¸€ä¸ªæµ®ç‚¹æ•°éƒ½å¯ä»¥è¡¨ç¤ºä¸ºï¼š</h3><p>$$ V = (-1)^s \times M \times 2^E $$</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">(<span class="number">-1</span>)^s è¡¨ç¤ºç¬¦å·ä½ï¼Œå½“ s=<span class="number">0</span>ï¼ŒV ä¸ºæ­£æ•°ï¼›å½“ s=<span class="number">1</span>ï¼ŒV ä¸ºè´Ÿæ•°ã€‚</span><br><span class="line">M è¡¨ç¤ºæœ‰æ•ˆæ•°å­—ï¼Œå¤§äºç­‰äº <span class="number">1</span>ï¼Œå°äº <span class="number">2</span>ã€‚</span><br><span class="line"><span class="number">2</span>^E è¡¨ç¤ºæŒ‡æ•°ä½ã€‚</span><br></pre></td></tr></table></figure><p>ä¾‹å­ï¼šV = 0.234(åè¿›åˆ¶) = 0.001110111110(äºŒè¿›åˆ¶) = 1.110111110 * 2^-3 ï¼Œåˆ™ s=0 ï¼ŒM= 1.110111110ï¼ŒE=-3ã€‚</p><h3 id="IEEE754-è§„å®šï¼š"><a href="#IEEE754-è§„å®šï¼š" class="headerlink" title="IEEE754 è§„å®šï¼š"></a>IEEE754 è§„å®šï¼š</h3><p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/75/General_floating_point_frac.svg/490px-General_floating_point_frac.svg.png" alt="IEEE 754æµ®ç‚¹æ•°çš„ä¸‰ä¸ªåŸŸ
"></p><ul><li><p>å¯¹äº 32 ä½çš„æµ®ç‚¹æ•°ï¼Œæœ€é«˜çš„ 1 ä½æ˜¯ç¬¦å·ä½ sï¼Œæ¥ç€çš„ 8 ä½æ˜¯æŒ‡æ•° Eï¼Œå‰©ä¸‹çš„ 23 ä½ä¸ºæœ‰æ•ˆæ•°å­— Mã€‚</p></li><li><p>å¯¹äº 64 ä½çš„æµ®ç‚¹æ•°ï¼Œæœ€é«˜çš„ 1 ä½æ˜¯ç¬¦å·ä½ sï¼Œæ¥ç€çš„ 11 ä½æ˜¯æŒ‡æ•° Eï¼Œå‰©ä¸‹çš„ 52 ä½ä¸ºæœ‰æ•ˆæ•°å­— Mã€‚</p></li></ul><h3 id="IEEE754-è¿˜æœ‰ä¸€äº›ç‰¹æ®Šçš„è§„å®šï¼š"><a href="#IEEE754-è¿˜æœ‰ä¸€äº›ç‰¹æ®Šçš„è§„å®šï¼š" class="headerlink" title="IEEE754 è¿˜æœ‰ä¸€äº›ç‰¹æ®Šçš„è§„å®šï¼š"></a>IEEE754 è¿˜æœ‰ä¸€äº›ç‰¹æ®Šçš„è§„å®šï¼š</h3><h4 id="é’ˆå¯¹-M"><a href="#é’ˆå¯¹-M" class="headerlink" title="é’ˆå¯¹ M"></a>é’ˆå¯¹ M</h4><p>ç”±äº 1&lt;= M &lt;=2 ï¼Œæ‰€ä»¥ M å§‹ç»ˆä¸º 1.xxxx å½¢å¼ï¼Œxxxx è¡¨ç¤ºå°æ•°ï¼Œé‚£äº›å¯¹äºè®¡ç®—æœºåº•å±‚ä¸¥è‹›çš„è®¾è®¡å¸ˆè¿™æ—¶å€™åˆè¦å°† 1 è¿™ä¸€ä½èˆæ‰ï¼Œåªä¿ç•™ xxxx éƒ¨åˆ†ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯å¯ä»¥å¤šå‚¨å­˜ä¸€ä½æœ‰æ•ˆæ•°å­—ã€‚</p><h4 id="é’ˆå¯¹-E"><a href="#é’ˆå¯¹-E" class="headerlink" title="é’ˆå¯¹ E"></a>é’ˆå¯¹ E</h4><p>ç”±äº E æ˜¯ä¸€ä¸ª 8 ä½çš„æ— ç¬¦å·å­˜å‚¨ï¼Œåªèƒ½è¡¨ç¤º 0 ~ 255ï¼Œç°å®ä¸­çš„æŒ‡æ•°è¿˜å­˜åœ¨è´Ÿæ•°ï¼Œæ‰€ä»¥è§„å®šï¼š<strong>Eå¿…é¡»å†åŠ ä¸Šä¸€ä¸ªä¸­é—´æ•°ï¼Œå¯¹äº 8 ä½çš„ Eï¼Œè¿™ä¸ªä¸­é—´æ•°æ˜¯ 127ï¼›å¯¹äº 11 ä½çš„ Eï¼Œè¿™ä¸ªä¸­é—´æ•°æ˜¯ 1023</strong>ï¼Œè¿™æ ·å°±å¯ä»¥å°†æŒ‡æ•°çš„è¡¨è¾¾èŒƒå›´æ‰©å¤§åˆ° <code>-127 ~ +128</code> å’Œ <code>-1023 ~ +1024</code>ã€‚</p><blockquote><p>å®é™…ä¸­çš„å–å€¼èŒƒå›´æ˜¯ <strong>-126~+127</strong>ï¼Œ-127 å’Œ 128 è¢«ç”¨ä½œç‰¹æ®Šå€¼å¤„ç†ï¼ŒåŒç²¾åº¦åŒç†ã€‚</p></blockquote><blockquote><p>é˜®ä¸€å³°çš„åšå®¢ä¸­å†™çš„æ˜¯ <em>å‡å»ä¸€ä¸ªä¸­é—´æ•°</em> åº”è¯¥æ˜¯æœ‰è¯¯çš„ã€‚</p></blockquote><p>ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœ E=17ï¼Œåˆ™ 17+127 =144 ï¼Œå®é™…çš„å­˜å‚¨æŒ‡ä¸º 144ã€‚</p><p>é’ˆå¯¹ E è¿˜æœ‰ä¸€äº›ç‰¹æ®Šå€¼çš„æƒ…å†µ</p><ol><li>å¦‚æœæŒ‡æ•° E æ˜¯ 0 å¹¶ä¸”å°¾æ•°çš„å°æ•°éƒ¨åˆ†æ˜¯ 0ï¼Œè¿™ä¸ªæ•°æ˜¯ Â±0ï¼ˆå’Œç¬¦å·ä½ç›¸å…³ï¼‰ã€‚</li><li>å¦‚æœæŒ‡æ•° E æ˜¯ 1 å¹¶ä¸”å°¾æ•°çš„å°æ•°éƒ¨åˆ†æ˜¯0ï¼Œè¿™ä¸ªæ•°æ˜¯Â±âˆï¼ˆåŒæ ·å’Œç¬¦å·ä½ç›¸å…³ï¼‰</li><li>å¦‚æœæŒ‡æ•° E æ˜¯ 1 å¹¶ä¸”å°¾æ•°çš„å°æ•°éƒ¨åˆ†é0ï¼Œè¿™ä¸ªæ•°è¡¨ç¤ºä¸ºä¸æ˜¯ä¸€ä¸ªæ•°ï¼ˆNaNï¼‰ã€‚</li></ol><h2 id="è®¡ç®—"><a href="#è®¡ç®—" class="headerlink" title="è®¡ç®—"></a>è®¡ç®—</h2><p>V = 0.234(åè¿›åˆ¶) = 0.00111011111001110110110010(äºŒè¿›åˆ¶) = 1.11011111001110110110010 * 2^-3 ï¼Œåˆ™ s=0 ï¼ŒM= 1.110111110ï¼ŒE=-3ã€‚</p><p>æ ¹æ® IEEE754 æ ‡å‡†è½¬åŒ– :</p><blockquote><p>ä»¥ å•ç²¾åº¦ä¸ºä¾‹</p></blockquote><p>s ä¸å˜<br>E=-3+127=124(åè¿›åˆ¶) = 0111_1100(äºŒè¿›åˆ¶)</p><p>M=110_1111_1001_1101_1011_0010</p><p>ç»“æœå°†ä»–ä»¬è¿æ¥ 0_0111_1100_110_1111_1001_1101_1011_0010(s_E_M)</p><p>å¯ä»¥<a href="http://www.speedfly.cn/tools/hexconvert/" target="_blank" rel="noopener">åœ¨çº¿æ ¡éªŒç»“æœ</a></p><h1 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h1><p>è¿™ç¯‡æ–‡ç« è¯¦ç»†ä»‹ç»äº†è®¡ç®—æœºå¦‚ä½•å­˜å‚¨æ•´æ•°ä»¥åŠæµ®ç‚¹æ•°ï¼Œä¸ªäººä¹Ÿæ˜¯ä»æœ¦èƒ§çŠ¶æ€åˆ°ç†è§£é€å½»ï¼Œå‚è€ƒäº†ä¼—å¤šå¤§ä½¬çš„æ–‡ç« ï¼Œåœ¨æ­¤è¡¨ç¤ºæ„Ÿè°¢ã€‚æœ‰é—®é¢˜çš„æœ‹å‹å¯ä»¥é€šè¿‡é‚®ç®±è”ç³»åˆ°æˆ‘ <code>jake.zou.me@gmail.com</code>ã€‚</p><p>è®¡ç®—æœºä¹‹ç¾å¦™ä¸å¯è¨€å•Šï¼</p><h1 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h1><ul><li><a href="https://zhuanlan.zhihu.com/p/61628231" target="_blank" rel="noopener">è®¡ç®—æœºå­˜å‚¨æ•´æ•°å’Œå°æ•°</a></li><li><a href="https://www.ruanyifeng.com/blog/2010/06/ieee_floating-point_representation.html" target="_blank" rel="noopener">æµ®ç‚¹æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤º</a></li><li><a href="https://medium.com/@saltedfishcaptain/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%AD%E6%95%B4%E6%95%B0%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BB%A5-%E8%A1%A5%E7%A0%81-%E7%9A%84%E5%BD%A2%E5%BC%8F%E5%AD%98%E5%82%A8-ed8f6654eb3a" target="_blank" rel="noopener">è®¡ç®—æœºä¸­æ•´æ•°ä¸ºä»€ä¹ˆä»¥è¡¥ç å½¢å¼å­˜å‚¨</a></li><li><a href="https://zh.wikipedia.org/wiki/IEEE_754" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘.IEEE754</a></li><li><a href="https://www.zhihu.com/question/19848808" target="_blank" rel="noopener">ä¸ºä»€ä¹ˆå«æµ®ç‚¹æ•°?</a></li></ul><!-- rebuild by neat -->]]></content>
      <categories>
        <category>è®¡ç®—æœºåŸç†</category>
      </categories>
  </entry>
  <entry>
    <title>åŒ—äº¬æ—¶é—´</title>
    <url>/p/e249.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>åŒ—äº¬æ—¶é—´ï¼Ÿå¯¹ï¼Œæƒ³è¯´çš„å°±æ˜¯åŒ—äº¬æ—¶é—´ã€‚</p><p>é¦–å…ˆåŒ—äº¬æ—¶é—´æ˜¯ä½äºä¸œå…«åŒºçš„ä¸œç» 120 åº¦çš„æ ‡å‡†æ—¶é—´ï¼ŒåŒ—äº¬çš„ç»åº¦æ˜¯ 116.4ï¼ŒåŒ—äº¬æ—¶é—´ä¸åŒ—äº¬å½“åœ°æ—¶é—´ç›¸å·® 14 åˆ†é’Ÿ 28 ç§’ã€‚</p><p>å…¶æ¬¡æ˜¯åŒ—äº¬æ—¶é—´çš„å›½å®¶æˆæ—¶ä¸­å¿ƒä½äºé™•è¥¿çœè’²åŸå¿ï¼Œé™•è¥¿è’²åŸå¿ä½äºä¸œä¸ƒåŒºã€‚ä¸­å›½å¹…å‘˜è¾½é˜”ï¼Œä¸œè¥¿è·¨åº¦ 5000 å…¬é‡Œï¼Œå›½å®¶æˆæ—¶ä¸­å¿ƒæ¯ç§’é’Ÿä»¥æ— çº¿ç”µæ³¢çš„å½¢å¼å‘åŠå¾„ 3000 å…¬é‡Œçš„ä¸­å›½å¤§åœ°å‘é€æ ‡å‡†çš„åŒ—äº¬æ—¶é—´ã€‚</p><h3 id="ä¸€å¥è¯å°ç»“"><a href="#ä¸€å¥è¯å°ç»“" class="headerlink" title="ä¸€å¥è¯å°ç»“"></a>ä¸€å¥è¯å°ç»“</h3><p>å›½å®¶æˆæ—¶ä¸­å¿ƒåœ¨è’²åŸå¿(ä¸œä¸ƒåŒº)å‘é€åŒ—äº¬æ—¶é—´(ä¸œå…«åŒº)ç»™åˆ°å…¨å›½æ ¡å‡†æ—¶é—´ã€‚</p><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ul><li><p><a href="https://zh.wikipedia.org/zh-hans/%E5%8C%97%E4%BA%AC%E6%97%B6%E9%97%B4" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘.åŒ—äº¬æ—¶é—´</a></p></li><li><p><a href="https://new.qq.com/omn/20180622/20180622G17DC9.html" target="_blank" rel="noopener">â€œåŒ—äº¬æ—¶é—´â€ç¡®è®¤è¿‡çœ¼ç¥â€”â€”é™•è¥¿å°±æ˜¯é‚£ä¸ªå¯¹çš„åœ°æ–¹</a></p></li></ul><!-- rebuild by neat -->]]></content>
      <categories>
        <category>ç§‘æ™®</category>
      </categories>
  </entry>
  <entry>
    <title>åšå®¢åŠ è½½é€Ÿåº¦ä¼˜åŒ–</title>
    <url>/p/6d58.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>åšå®¢åŠ è½½ä¸€ç›´å¾ˆæ…¢ï¼Œæ˜¨æ™šæŠ˜è…¾çš„äº‹æƒ…å¦‚ä¸‹ï¼š</p><h3 id="netlify"><a href="#netlify" class="headerlink" title="netlify"></a>netlify</h3><p>å¯¹æ¥äº† <a href="https://app.netlify.com/" target="_blank" rel="noopener">netlify</a>ï¼Œå¯ä»¥è¯•è¯•æ‰“å¼€ä»–ä»¬å®¶çš„ä¸»é¡µï¼Œæ²¡æœ‰ä¸€åˆ†é’Ÿéƒ½åŠ è½½ä¸å‡ºæ¥ï¼Œæ¯”ç”¨ github page éƒ½è¦æ…¢ï¼Œæ”¾å¼ƒï¼</p><blockquote><p>netlify å¼‚å¸¸å¼ºå¤§ï¼Œåå°å¯ä»¥ç›´æ¥æ³¨å…¥ scriptï¼Œå‡ è¡Œä»£ç å°±å¯ä»¥æ­å»ºä¸€å¥— cmsã€‚</p></blockquote><h3 id="zeit"><a href="#zeit" class="headerlink" title="zeit"></a>zeit</h3><ul><li>åæ¥åˆæœç´¢åˆ°ä¸€å®¶æœåŠ¡å•† <a href="https://zeit.co/" target="_blank" rel="noopener">zeit.co</a> ä¹Ÿæä¾›äº†é™æ€é¡µéƒ¨ç½²çš„åŠŸèƒ½ï¼Œé€Ÿåº¦é‚£æ˜¯æ æ çš„ï¼ŒåŸºæœ¬ç§’å¼€ç¡®å®å¿«ï¼Œä½†æ˜¯æ¯æ¬¡éƒ¨ç½²éƒ½è¦æ‰‹åŠ¨å»ç½‘é¡µä¸Šç‚¹å‡»ä¸€ä¸ª<strong>å‘å¸ƒ</strong>ï¼Œè¿™æ˜¯ä¸€ä¸ªå…è´¹å°±éœ€è¦æŠ˜ç£¨çš„èŠ‚å¥å—ï¼Ÿ</li></ul><blockquote><p>netlifyç²¾ç®€ç‰ˆ</p></blockquote><h3 id="bootcdn"><a href="#bootcdn" class="headerlink" title="bootcdn"></a>bootcdn</h3><ul><li>è¿˜æ˜¯è€è€å®å®çš„å›½å†… coding åŠ å›½å¤– githubï¼Œä½†æ˜¯å¯ä»¥é…ç½® js çš„å¼•ç”¨åœ°å€ï¼Œæµ‹è¯•äº†å‡ ä¸ª cdnï¼Œè¿˜æ˜¯ <a href="https://www.bootcdn.cn" target="_blank" rel="noopener">bootcdn</a> å¿«ï¼Œå°† <code>/next/_config.yml</code> ä¸‹é¢çš„ vendors ä¿®æ”¹å¦‚ä¸‹ï¼š</li></ul><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># Internal version: 2.1.3</span></span><br><span class="line"><span class="attr">jquery:</span> <span class="string">//cdn.bootcss.com/jquery/2.1.3/jquery.min.js</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Internal version: 2.1.5</span></span><br><span class="line"><span class="comment"># See: http://fancyapps.com/fancybox/</span></span><br><span class="line"><span class="attr">fancybox:</span> <span class="string">//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js</span></span><br><span class="line"><span class="attr">fancybox_css:</span> <span class="string">//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Internal version: 1.0.6</span></span><br><span class="line"><span class="comment"># See: https://github.com/ftlabs/fastclick</span></span><br><span class="line"><span class="attr">fastclick:</span> <span class="string">//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Internal version: 1.9.7</span></span><br><span class="line"><span class="comment"># See: https://github.com/tuupola/jquery_lazyload</span></span><br><span class="line"><span class="attr">lazyload:</span> <span class="string">//cdn.bootcss.com/jquery_lazyload/1.9.7/jquery.lazyload.min.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Internal version: 1.2.1</span></span><br><span class="line"><span class="comment"># See: http://VelocityJS.org</span></span><br><span class="line"><span class="attr">velocity:</span> <span class="string">//cdn.bootcss.com/velocity/1.2.1/velocity.min.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Internal version: 1.2.1</span></span><br><span class="line"><span class="comment"># See: http://VelocityJS.org</span></span><br><span class="line"><span class="attr">velocity_ui:</span> <span class="string">//cdn.bootcss.com/velocity/1.2.1/velocity.ui.min.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Internal version: 0.7.9</span></span><br><span class="line"><span class="comment"># See: https://faisalman.github.io/ua-parser-js/</span></span><br><span class="line"><span class="attr">ua_parser:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Internal version: 4.6.2</span></span><br><span class="line"><span class="comment"># See: http://fontawesome.io/</span></span><br><span class="line"><span class="attr">fontawesome:</span> <span class="string">//cdn.bootcss.com/font-awesome/4.6.2/css/font-awesome.min.css</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Internal version: 1</span></span><br><span class="line"><span class="comment"># https://www.algolia.com</span></span><br><span class="line"><span class="attr">algolia_instant_js:</span></span><br><span class="line"><span class="attr">algolia_instant_css:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Internal version: 1.0.2</span></span><br><span class="line"><span class="comment"># See: https://github.com/HubSpot/pace</span></span><br><span class="line"><span class="comment"># Or use direct links below:</span></span><br><span class="line"><span class="comment"># pace: //cdn.bootcss.com/pace/1.0.2/pace.min.js</span></span><br><span class="line"><span class="comment"># pace_css: //cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-flash.min.css</span></span><br><span class="line"><span class="attr">pace:</span> <span class="string">//cdn.bootcss.com/pace/1.0.2/pace.min.js</span></span><br><span class="line"><span class="attr">pace_css:</span> <span class="string">//cdn.bootcss.com/pace/1.0.2/themes/black/pace-theme-minimal.min.css</span></span><br></pre></td></tr></table></figure><p>æ‰“å¼€é€Ÿåº¦æ˜æ˜¾å¯ä»¥æå‡ã€‚</p><h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>æ­¤å¤„æ²¡æœ‰æ›´å¤šå°ç»“ï¼ŒåŸŸåæ²¡æ³•å¤‡æ¡ˆå•Šï¼Œæ²¡æœ‰æš‚ä½è¯æ²¡æœ‰å±…ä½è¯ğŸ‘¿â€¦.</p><!-- rebuild by neat -->]]></content>
      <categories>
        <category>hexo</category>
      </categories>
  </entry>
  <entry>
    <title>åˆ¤æ–­ä¸€ä¸ªæ•´æ•°æ˜¯ä¸æ˜¯2çš„æ•´æ•°æ¬¡æ–¹</title>
    <url>/p/c03.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>ä»Šå¤©çœ‹åˆ°ä¸€ä¸ªè¿™æ ·çš„é¢˜ç›®ï¼š<strong>åˆ¤æ–­ä¸€ä¸ªæ•´æ•°æ˜¯ä¸æ˜¯ 2 çš„æ•´æ•°æ¬¡æ–¹?</strong></p><p>å¤§å­¦ç«èµ›å¥½åƒè¿˜çœŸè§è¿‡ï¼Œç°åœ¨å·²ç»å¿˜å¾—ä¸€å¹²äºŒå‡€äº†ã€‚ç°åœ¨çœ‹åˆ°ä¸€ä¸ªè§£æ³•è¿˜çœŸçš„æŒºæºœã€‚</p><p>é¦–å…ˆæŒ‰ç…§äºŒè¿›åˆ¶æ‰¾è§„å¾‹</p><ul><li>2 =&gt; 10</li><li>4 =&gt; 100</li><li>8 =&gt; 1000</li><li>16=&gt; 10000</li><li>â€¦</li></ul><p>ä¸‹é¢å°±ä¸å†™äº†ï¼Œç¬¬ä¸€ä½ä¸º 1 åé¢å…¨æ˜¯ 0ï¼Œè¿™æ ·çš„æ•°å°±æ˜¯ 2 çš„æ•´æ•°æ¬¡æ–¹æ•°ã€‚</p><p>äºŒè¿›åˆ¶ç®—æ³•ä¸­è¿˜æœ‰ä¸€ä¸ªè§„å¾‹</p><ul><li><p>8 =&gt; 1000</p><p>7 =&gt; 0111</p></li></ul><ul><li><p>16=&gt; 10000</p><p>15=&gt; 01111</p></li></ul><p>N å’Œ N-1 çš„åŒºåˆ«æ˜¯æœ€ä½ä½çš„ 1 å˜æˆ 0ï¼Œæœ€ä½ä½åé¢çš„ 0 å…¨å˜æˆ 1ï¼Œå¹¶ä¸” N&amp;(N-1)å¯ä»¥æ°å¥½ä¸º 0ã€‚</p><p>å¦‚æœ N=1100ï¼ŒN&amp;(N-1) = 1100&amp;1011 != 0ï¼Œæ‰€ä»¥ N ä¸æ˜¯ 2 çš„æ•´æ•°æ¬¡æ•°ã€‚</p><p>ç»¼ä¸Šæ‰€è¿° ï¼šåˆ¤æ–­ä¸€ä¸ªæ•´æ•°æ˜¯ä¸æ˜¯ 2 çš„æ•´æ•°æ¬¡æ–¹ï¼Œåªéœ€è¦åˆ¤æ–­ N&amp;(N-1) æ˜¯å¦ä¸º 0ã€‚</p><!-- rebuild by neat -->]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
  </entry>
  <entry>
    <title>macbook pro æ—¶é—´ä¸å‡†</title>
    <url>/p/303.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>ä»æ˜¥èŠ‚è‡³ç°åœ¨3æœˆä»½äº†ï¼Œæˆ‘è¿˜æ²¡æœ‰æŠ¢åˆ°å£ç½©ã€‚ğŸ™„ğŸ™„</p><p>æ¯æ¬¡å‡†ç‚¹æŠ¢çš„æ—¶å€™æˆ‘å¯¹ä¸€ä¸‹æˆ‘çš„ç”µè„‘ï¼Œå‘ç°æ—¶é—´æ€»æ˜¯æ…¢ 10s å·¦å³ï¼Œæˆ‘åœ¨ç½‘ä¸Šæœç´¢çœŸçš„æœ‰å¾ˆå¤šäººå’Œæˆ‘ä¸€æ ·ï¼Œåœ¨æŸä¸ªçŸ¥ä¹å¸–å­ä¸‹é¢æœ‰ä¸ªå¤§ä½¬ç»™äº†ä¸€ä¸ªå»ºè®®ï¼Œå¯ä»¥é€šè¿‡å®šæ—¶ä»»åŠ¡å»æ‰§è¡Œä¸€ä¸ªå‘½ä»¤å¼ºåˆ¶ä»æ›´æ–°è‹¹æœçš„æœåŠ¡å™¨æ ¡å‡†æ—¶é—´ã€‚æˆ‘è§‰å¾—ä»–çš„æƒ³æ³•ç›¸å½“å¥½ï¼Œè€Œä¸”æˆ‘å¾ˆå˜æ€çš„è®©ç³»ç»Ÿæ¯å°æ—¶æ‰§è¡Œä¸€æ¬¡æ ¡å‡†æ—¶é—´ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo cron -e</span><br><span class="line">---</span><br><span class="line">55 * * * * sudo /usr/bin/sntp -sS time.apple.com</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„æ·»åŠ å®šæ—¶ä»»åŠ¡å¿…é¡»æ·»åŠ  sudo ï¼Œå¦åˆ™ä»»åŠ¡é‡Œé¢æœ‰ sudo å…¶å®æ˜¯ä¸æ‰§è¡Œçš„ã€‚æµ‹è¯•äº†å¾ˆå¤šæ¬¡ã€‚</p><h4 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h4><ul><li><a href="https://www.zhihu.com/question/37349985" target="_blank" rel="noopener">çŸ¥ä¹çƒ­å¸–</a></li><li><a href="https://time.is/zh/" target="_blank" rel="noopener">æ—¶é—´æ ¡å‡†ç½‘ç«™</a></li></ul><!-- rebuild by neat -->]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>mac</tag>
      </tags>
  </entry>
  <entry>
    <title>VPCå†…ç½‘é€šä¿¡</title>
    <url>/p/bd3e.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>å‰é¢<a href="https://blog.zoulux.top/p/79fa.html">æœ‰ç¯‡æ–‡ç« </a>è®°å½•äº†æˆ‘åœ¨è¿ç§» redis è¿‡ç¨‹ã€‚ä½†æ˜¯åœ¨æ€»ç»“çš„æ—¶å€™å¯¹è§£å†³é—®é¢˜ä¸­çš„é˜¿é‡Œäº‘å†…ç½‘åœ°å€å……æ»¡äº†å…´è¶£ï¼Œé˜¿é‡Œäº‘åˆ°åº•æ˜¯æ€ä¹ˆå®ç°å†…ç½‘äº’è”ï¼Ÿå®¹å™¨ä¸­ä¸ºä»€ä¹ˆä¹Ÿå¯ä»¥è®¿é—®é˜¿é‡Œäº‘å†…ç½‘ï¼Ÿ</p><h1 id="é˜¿é‡Œäº‘å†…ç½‘äº’è”"><a href="#é˜¿é‡Œäº‘å†…ç½‘äº’è”" class="headerlink" title="é˜¿é‡Œäº‘å†…ç½‘äº’è”"></a>é˜¿é‡Œäº‘å†…ç½‘äº’è”</h1><p>è¦è¯´æ¸…é˜¿é‡Œäº‘çš„æ•´ä¸ª vpc ä½“ç³»æˆ‘ç°åœ¨æ€•æ˜¯åšä¸åˆ°ï¼Œä½†æ˜¯æˆ‘æœ¬ç€æ ¹æ®å®é™…ç°è±¡åšè”æƒ³ï¼Œæˆ‘åº”è¯¥å¯ä»¥ï¼Œè‡³å°‘å¯ä»¥åœ¨è¾ƒé•¿æ—¶é—´å†…å¯ä»¥æ»¡è¶³æˆ‘çš„çŸ¥è¯†å›¾è°±ï¼Œå¦‚æœå“ªå¤©è¦æ˜¯æœ‰æœºä¼šç¢°ä¸Šç‹åšåšå£«ï¼Œä¸å¯¹å«ç‹åšé™¢å£«ï¼Œå†å’Œä»–ä¸€æ¢ç©¶ç«Ÿã€‚</p><p>å¾ˆå¤šç§‘å­¦ä¹Ÿæ˜¯ï¼Œåœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…éƒ½ä¸ä¼šè¢«è¯ä¼ªï¼Œè¯´æ˜è¿™ä¸ªç§‘å­¦ç†è®ºæ˜¯æ­£ç¡®çš„ï¼Œå¦‚æœå¾ˆé•¿æ—¶é—´ä¹‹åè¢«è¯ä¼ªï¼Œè¯´æ˜è¯ä¼ªçš„éƒ¨åˆ†ä¹Ÿæ˜¯è¿™ä¸ªç§‘å­¦ç†è®ºçš„ä¸€éƒ¨åˆ†ï¼Œå°†çŸ¥è¯†ä¸²è”èµ·æ¥æ¯”çŸ¥è¯†çš„çœŸåƒæ›´é‡è¦ï¼Œå‘ç°äº†å‰é¢ä¸å¯¹ï¼Œä¹Ÿä¸å¿…å®Œå…¨æ¨ç¿»ï¼Œå°† bug ä¿®å¤äº†ï¼Œå°†æ–°çš„çŸ¥è¯†æ›¿æ¢ä¸Šå»ï¼Œå°†æ–°è€çŸ¥è¯†ä¸²è”èµ·æ¥ã€‚</p><h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><p>æ¦‚å¿µè¿™å—æˆ‘æŸ¥é˜…äº†é˜¿é‡Œäº‘å®˜æ–¹æ–‡æ¡£ï¼Œä»¥åŠæŸ¥çœ‹äº†å¾ˆå¤šç›¸å…³åšå®¢ã€‚</p><h3 id="VPC"><a href="#VPC" class="headerlink" title="VPC"></a>VPC</h3><p>ä¸“æœ‰ç½‘ç»œï¼ˆVirtual Private Cloudï¼Œç®€ç§°VPCï¼‰æ˜¯ç”¨æˆ·ç‹¬æœ‰çš„äº‘ä¸Šç§æœ‰ç½‘ç»œï¼Œç”¨æˆ·å¯ä»¥å°†è´­ä¹°çš„æœåŠ¡å™¨ã€æ•°æ®åº“ã€è´Ÿè½½å‡è¡¡éƒ½æ·»åŠ åˆ°è¿™ä¸ªä¸“æœ‰ç½‘ç»œï¼Œä»¥è¾¾åˆ°å†…éƒ¨äº’è”äº’é€šã€‚</p><p><img src="http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/1309756751/p2749.png" alt="ä¸“æœ‰ç½‘ç»œ"></p><p>é˜¿é‡Œäº‘å»ºè®®ä¸€ä¸ªåœ°åŸŸä¸‹é¢åªéœ€è¦ä¸€ä¸ª VPCï¼Œä¸åŒåœ°åŸŸä¹‹é—´çš„ VPC æ˜¯å¯ä»¥é€šè¿‡ vpn æˆ–è€…éš§é“æŠ€æœ¯è”é€šã€‚</p><h4 id="vpc-åŸç†"><a href="#vpc-åŸç†" class="headerlink" title="vpc åŸç†"></a>vpc åŸç†</h4><p>åŸºäºç›®å‰ä¸»æµçš„éš§é“æŠ€æœ¯ï¼Œä¸“æœ‰ç½‘ç»œéš”ç¦»äº†è™šæ‹Ÿç½‘ç»œã€‚æ¯ä¸ªVPCéƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„éš§é“å·ï¼Œä¸€ä¸ªéš§é“å·å¯¹åº”ç€ä¸€ä¸ªè™šæ‹ŸåŒ–ç½‘ç»œã€‚ä¸€ä¸ªVPCå†…çš„ECSï¼ˆElastic Compute Serviceï¼‰å®ä¾‹ä¹‹é—´çš„ä¼ è¾“æ•°æ®åŒ…éƒ½ä¼šåŠ ä¸Šéš§é“å°è£…ï¼Œå¸¦æœ‰å”¯ä¸€çš„éš§é“IDæ ‡è¯†ï¼Œç„¶åé€åˆ°ç‰©ç†ç½‘ç»œä¸Šè¿›è¡Œä¼ è¾“ã€‚ä¸åŒVPCå†…çš„ECSå®ä¾‹å› ä¸ºæ‰€åœ¨çš„éš§é“IDä¸åŒï¼Œæœ¬èº«å¤„äºä¸¤ä¸ªä¸åŒçš„è·¯ç”±å¹³é¢ï¼Œæ‰€ä»¥ä¸åŒVPCå†…çš„ECSå®ä¾‹æ— æ³•è¿›è¡Œé€šä¿¡ï¼Œå¤©ç„¶åœ°è¿›è¡Œäº†éš”ç¦»ã€‚</p><p>åŸºäºéš§é“æŠ€æœ¯å’Œè½¯ä»¶å®šä¹‰ç½‘ç»œï¼ˆSoftware Defined Networkï¼Œç®€ç§°SDNï¼‰æŠ€æœ¯ï¼Œé˜¿é‡Œäº‘çš„ç ”å‘åœ¨ç¡¬ä»¶ç½‘å…³å’Œè‡ªç ”äº¤æ¢æœºè®¾å¤‡çš„åŸºç¡€ä¸Šå®ç°äº†VPCäº§å“ã€‚</p><h4 id="vpc-é€»è¾‘æ¶æ„"><a href="#vpc-é€»è¾‘æ¶æ„" class="headerlink" title="vpc é€»è¾‘æ¶æ„"></a>vpc é€»è¾‘æ¶æ„</h4><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒVPCåŒ…å«äº¤æ¢æœºã€ç½‘å…³å’Œæ§åˆ¶å™¨ä¸‰ä¸ªé‡è¦çš„ç»„ä»¶ã€‚äº¤æ¢æœºå’Œç½‘å…³ç»„æˆäº†æ•°æ®é€šè·¯çš„å…³é”®è·¯å¾„ï¼Œæ§åˆ¶å™¨ä½¿ç”¨è‡ªç ”çš„åè®®ä¸‹å‘è½¬å‘è¡¨åˆ°ç½‘å…³å’Œäº¤æ¢æœºï¼Œå®Œæˆäº†é…ç½®é€šè·¯çš„å…³é”®è·¯å¾„ã€‚æ•´ä½“æ¶æ„é‡Œé¢ï¼Œé…ç½®é€šè·¯å’Œæ•°æ®é€šè·¯äº’ç›¸åˆ†ç¦»ã€‚äº¤æ¢æœºæ˜¯åˆ†å¸ƒå¼çš„ç»“ç‚¹ï¼Œç½‘å…³å’Œæ§åˆ¶å™¨éƒ½æ˜¯é›†ç¾¤éƒ¨ç½²å¹¶ä¸”æ˜¯å¤šæœºæˆ¿äº’å¤‡çš„ï¼Œå¹¶ä¸”æ‰€æœ‰é“¾è·¯ä¸Šéƒ½æœ‰å†—ä½™å®¹ç¾ï¼Œæå‡äº†VPCäº§å“çš„æ•´ä½“å¯ç”¨æ€§ã€‚<br><img src="http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/2428/15662966115013_zh-CN.png" alt=""></p><h3 id="è·¯ç”±å™¨"><a href="#è·¯ç”±å™¨" class="headerlink" title="è·¯ç”±å™¨"></a>è·¯ç”±å™¨</h3><p>è·¯ç”±å™¨ï¼ˆVRouterï¼‰æ˜¯ä¸“æœ‰ç½‘ç»œçš„æ¢çº½ã€‚è·¯ç”±å™¨å¯ä»¥è¿æ¥ä¸“æœ‰ç½‘ç»œçš„å„ä¸ªäº¤æ¢æœºï¼ŒåŒæ—¶ä¹Ÿæ˜¯è¿æ¥ä¸“æœ‰ç½‘ç»œä¸å…¶å®ƒç½‘ç»œçš„ç½‘å…³è®¾å¤‡ã€‚è·¯ç”±å™¨æ ¹æ®è·¯ç”±æ¡ç›®æ¥è½¬å‘ç½‘ç»œæµé‡ã€‚è¿™é‡Œè·¯ç”±å™¨æ˜¯ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µã€‚</p><h4 id="è·¯ç”±è¡¨"><a href="#è·¯ç”±è¡¨" class="headerlink" title="è·¯ç”±è¡¨"></a>è·¯ç”±è¡¨</h4><p>è·¯ç”±è¡¨ï¼ˆRoute Tableï¼‰æ˜¯æŒ‡è·¯ç”±å™¨ä¸Šç®¡ç†è·¯ç”±æ¡ç›®çš„åˆ—è¡¨ï¼Œè·¯ç”±è¡¨ç»‘å®šäº†VPCå’Œäº¤æ¢æœº ã€‚å¯ä»¥æƒ³è±¡æˆ excel é‡Œé¢çš„ä¸€å¼ å¼  sheet</p><h4 id="è·¯ç”±æ¡ç›®"><a href="#è·¯ç”±æ¡ç›®" class="headerlink" title="è·¯ç”±æ¡ç›®"></a>è·¯ç”±æ¡ç›®</h4><p>è·¯ç”±æ¡ç›®ï¼ˆRoute Entryï¼‰æ˜¯æŒ‡è·¯ç”±è¡¨ä¸­çš„æ¯ä¸€æ¡è·¯ç”±ä¿¡æ¯ã€‚è·¯ç”±æ¡ç›®å®šä¹‰äº†é€šå‘æŒ‡å®šç›®æ ‡ç½‘æ®µçš„ç½‘ç»œæµé‡çš„ä¸‹ä¸€è·³åœ°å€ã€‚è·¯ç”±æ¡ç›®åŒ…æ‹¬ç³»ç»Ÿè·¯ç”±å’Œè‡ªå®šä¹‰è·¯ç”±ä¸¤ç§ç±»å‹ã€‚å¯ä»¥æƒ³è±¡æˆ excel é‡Œé¢çš„ä¸€å¼  sheet ä¸­çš„æ¯ä¸€è¡Œã€‚</p><h3 id="äº¤æ¢æœº"><a href="#äº¤æ¢æœº" class="headerlink" title="äº¤æ¢æœº"></a>äº¤æ¢æœº</h3><p>äº¤æ¢æœºï¼ˆVSwitchï¼‰æ˜¯ç»„æˆä¸“æœ‰ç½‘ç»œçš„åŸºç¡€ç½‘ç»œè®¾å¤‡ã€‚äº¤æ¢æœºå¯ä»¥è¿æ¥ä¸åŒçš„äº‘èµ„æºã€‚åœ¨ä¸“æœ‰ç½‘ç»œå†…åˆ›å»ºäº‘èµ„æºæ—¶ï¼Œå¿…é¡»æŒ‡å®šäº‘èµ„æºæ‰€è¿æ¥çš„äº¤æ¢æœºã€‚é»˜è®¤ä¸€ä¸ªå¯ç”¨åŒºä¼šæœ‰ä¸€å°äº¤æ¢æœºï¼Œæ¯å°äº¤æ¢æœºéƒ½æ˜¯ vpc æ‰€å®šä¹‰çš„ä¸€ä¸ªå­ç½‘ã€‚</p><h3 id="ç½‘å…³"><a href="#ç½‘å…³" class="headerlink" title="ç½‘å…³"></a>ç½‘å…³</h3><p>ç½‘å…³å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼Œå¯ä»¥æƒ³è±¡ä¸­ç°å®ä¸­çš„æµ·å…³ï¼Œå¦‚æœä¸€ä¸ªç”¨æˆ·ä¸å‡ºå›½ï¼Œå°±æ¥è§¦ä¸åˆ°æµ·å…³ï¼Œä½†æ˜¯ä¸€ä¸ªç”¨æˆ·æƒ³è¦å‡ºå›½ï¼Œå°±å¿…é¡»ä»æµ·å…³é€šè¿‡ï¼Œç½‘å…³ç®¡ç†ç€å†…å¤–ç½‘çš„è”ç³»ã€‚å…¶å®æˆ‘ä¸€ç›´ä¸å¤ªç†è§£è·¯ç”±å™¨å’Œç½‘å…³çš„å…³ç³»ï¼Œè§‰å¾—ä»–ä»¬æœ‰å…³ç³»ä½†æ˜¯ä¸çŸ¥é“åˆ°åº•æ˜¯æ€æ ·çš„å…³ç³»ï¼Œç›´åˆ°æˆ‘çœ‹åˆ°çŸ¥ä¹ä¸Šçš„ä¸€æ®µå›å¤ï¼š</p><blockquote><p>é¦–å…ˆâ€˜ç½‘å…³â€™ä¸€ä¸ªå¤§æ¦‚å¿µï¼Œä¸å…·ä½“ç‰¹æŒ‡ä¸€ç±»äº§å“ï¼Œåªè¦è¿æ¥ä¸¤ä¸ªä¸åŒçš„ç½‘ç»œçš„è®¾å¤‡éƒ½å¯ä»¥å«ç½‘å…³ï¼›è€Œâ€˜è·¯ç”±å™¨â€™ä¸€èˆ¬ç‰¹æŒ‡èƒ½å¤Ÿå®ç°è·¯ç”±å¯»æ‰¾å’Œè½¬å‘çš„ç‰¹å®šç±»äº§å“ï¼Œè·¯ç”±å™¨å¾ˆæ˜¾ç„¶èƒ½å¤Ÿå®ç°ç½‘å…³çš„åŠŸèƒ½ã€‚å½“ç„¶ç”µä¿¡è¡Œä¸šè¯´çš„â€˜è·¯ç”±å™¨â€™åˆå’Œå®¶ç”¨çš„â€˜è·¯ç”±å™¨â€™ä¸¤ä¸ªæ¦‚å¿µï¼Œè¿™ä¸ªæš‚ä¸”ä¸è¡¨ã€‚å›åˆ°é¢˜ç›®ä¸­ä½ è¯´é—®çš„é»˜è®¤ç½‘å…³æ˜¯ä»€ä¹ˆï¼Œé»˜è®¤ç½‘å…³äº‹å®ä¸Šä¸æ˜¯ä¸€ä¸ªäº§å“è€Œæ˜¯ä¸€ä¸ªç½‘ç»œå±‚çš„æ¦‚å¿µï¼ŒPCæœ¬èº«ä¸å…·å¤‡è·¯ç”±å¯»å€èƒ½åŠ›ï¼Œæ‰€ä»¥PCè¦æŠŠæ‰€æœ‰çš„IPåŒ…å‘é€åˆ°ä¸€ä¸ªé»˜è®¤çš„ä¸­è½¬åœ°å€ä¸Šé¢è¿›è¡Œè½¬å‘ï¼Œä¹Ÿå°±æ˜¯é»˜è®¤ç½‘å…³ã€‚è¿™ä¸ªç½‘å…³å¯ä»¥åœ¨è·¯ç”±å™¨ä¸Šï¼Œå¯ä»¥åœ¨ä¸‰å±‚äº¤æ¢æœºä¸Šï¼Œå¯ä»¥åœ¨é˜²ç«å¢™ä¸Šï¼Œå¯ä»¥åœ¨æœåŠ¡å™¨ä¸Šï¼Œæ‰€ä»¥å’Œç‰©ç†çš„è®¾å¤‡æ— å…³ã€‚</p></blockquote><p>ç®€å•ä¸€å¥è¯æ€»ç»“å°±æ˜¯ï¼š</p><p>ç½‘å…³æ˜¯è¿æ¥äº†ä¸¤ä¸ªç½‘ç»œçš„è®¾å¤‡ï¼Œè·¯ç”±å™¨æ˜¯è¿æ¥äº†å±€åŸŸç½‘å’Œå¹¿åŸŸç½‘ï¼Œ<strong>è·¯ç”±å™¨ç®—ç½‘å…³</strong>ã€‚</p><h4 id="NET-ç½‘å…³"><a href="#NET-ç½‘å…³" class="headerlink" title="NET ç½‘å…³"></a>NET ç½‘å…³</h4><p>è¿™é‡Œæˆ‘ç‰¹åœ°æƒ³ä»‹ç»ä¸€ä¸‹é˜¿é‡Œäº‘ <code>net ç½‘å…³</code>ï¼Œå› ä¸ºè¿™ä¸ªè®¾å¤‡æˆ‘ä¸€ç›´å’Œç½‘å…³æ··æ·†ï¼Œé˜¿é‡Œäº‘æ•´å¥—ç³»ç»Ÿéƒ½æ˜¯åŸºäºè½¯ä»¶å®šä¹‰ï¼Œè¿™é‡Œçš„ <code>netç½‘å…³</code>å…¶å®å°±æ˜¯å°†å†…(ç½‘)å¤–çš„ç«¯å£æˆ–è€…åœ°å€è½¬å‘çš„åˆ°å¤–(å†…)ç½‘ä¸€ä¸ªè®¾å¤‡ã€‚</p><p>net ç½‘å…³æä¾› SNAT å’Œ DNAT åŠŸèƒ½ï¼Œ</p><ul><li>DNATæ˜¯NATç½‘å…³ä¸Šçš„ä¸€å¼ é…ç½®è¡¨ï¼Œç”¨äºNATç½‘å…³ä¸Šçš„DNATåŠŸèƒ½é…ç½®ã€‚å¯ä»¥å®ç°ç«¯å£æ˜ å°„ï¼ˆPort mappingï¼‰å’ŒIPæ˜ å°„ï¼ˆIP mappingï¼‰ï¼Œå°†NATç½‘å…³ä¸Šçš„å…¬ç½‘IPæ˜ å°„ç»™ECSå®ä¾‹ã€‚</li></ul><ul><li>SNATæ˜¯NATç½‘å…³ä¸Šçš„ä¸€å¼ é…ç½®è¡¨ï¼Œç”¨äºNATç½‘å…³ä¸Šçš„SNATåŠŸèƒ½é…ç½®ã€‚å¯ä»¥ä»¥äº¤æ¢æœºå’ŒECSä¸ºç²’åº¦è¿›è¡ŒSNATè§„åˆ™é…ç½®ï¼Œä»¥äº¤æ¢æœºä¸ºç²’åº¦ï¼šæŒ‡å®šäº¤æ¢æœºä¸‹çš„æ‰€æœ‰ECSå®ä¾‹å‡ä½¿ç”¨æŒ‡å®šçš„å…¬ç½‘IPè®¿é—®äº’è”ç½‘ï¼Œä»¥ECSä¸ºç²’åº¦ï¼šæŒ‡å®šçš„ECSå®ä¾‹ä½¿ç”¨æŒ‡å®šçš„å…¬ç½‘IPè®¿é—®äº’è”ç½‘ã€‚</li></ul><p>å¯ä»¥çœ‹åˆ° net ç½‘å…³ä¹Ÿæ˜¯ç½‘å…³çš„ä¸€ç§è€Œå·²ã€‚</p><h3 id="å¼¹æ€§IP"><a href="#å¼¹æ€§IP" class="headerlink" title="å¼¹æ€§IP"></a>å¼¹æ€§IP</h3><p>å¼¹æ€§å…¬ç½‘IPï¼ˆElastic IP Addressï¼Œç®€ç§°EIPï¼‰æ˜¯å¯ä»¥ç‹¬ç«‹è´­ä¹°å’ŒæŒæœ‰çš„å…¬ç½‘IPåœ°å€èµ„æºã€‚EIPå¯ç»‘å®šåˆ°ä¸“æœ‰ç½‘ç»œç±»å‹çš„ECSå®ä¾‹ã€ä¸“æœ‰ç½‘ç»œç±»å‹çš„ç§ç½‘SLBå®ä¾‹ã€ä¸“æœ‰ç½‘ç»œç±»å‹çš„è¾…åŠ©å¼¹æ€§ç½‘å¡ã€NATç½‘å…³å’Œé«˜å¯ç”¨è™šæ‹ŸIPä¸Šã€‚</p><p>EIPæ˜¯ä¸€ç§NAT IPã€‚å®ƒå®é™…ä½äºé˜¿é‡Œäº‘çš„å…¬ç½‘ç½‘å…³ä¸Šï¼Œé€šè¿‡NATæ–¹å¼æ˜ å°„åˆ°äº†è¢«ç»‘å®šçš„èµ„æºä¸Šã€‚å’Œäº‘èµ„æºç»‘å®šåï¼Œäº‘èµ„æºå¯ä»¥é€šè¿‡EIPä¸å…¬ç½‘é€šä¿¡.ã€‚</p><p>å¯ä»¥çœ‹å‡º EIP ä¹Ÿå®Œå…¨æ˜¯ä¸€ç§æŠ½è±¡çš„æ¦‚å¿µï¼Œä¸–ç•Œä¸Šæœ¬æ²¡æœ‰<code>å¼¹æ€§ IP</code>ï¼Œé˜¿é‡Œäº‘è¿™æ ·çš„å…¬å¸çœŸæ˜¯å‰å®³ï¼Œé€šè¿‡å°†é˜¿é‡Œäº‘å…¬ç½‘ä¸Šçš„ ip ä»¥ netç½‘å…³çš„å½¢å¼æ˜ å°„åˆ°ç”¨æˆ·çš„ç»‘å®šçš„èµ„æºä¸Šã€‚</p><h2 id="è¡¥å……ç½‘ç»œåè®®"><a href="#è¡¥å……ç½‘ç»œåè®®" class="headerlink" title="è¡¥å……ç½‘ç»œåè®®"></a>è¡¥å……ç½‘ç»œåè®®</h2><p><img src="/images/pasted-12.png" alt="upload successful"></p><h1 id="å®¹å™¨å†…è®¿é—®é˜¿é‡Œäº‘å†…ç½‘"><a href="#å®¹å™¨å†…è®¿é—®é˜¿é‡Œäº‘å†…ç½‘" class="headerlink" title="å®¹å™¨å†…è®¿é—®é˜¿é‡Œäº‘å†…ç½‘"></a>å®¹å™¨å†…è®¿é—®é˜¿é‡Œäº‘å†…ç½‘</h1><blockquote><p>è¿™éƒ¨åˆ†å†…å®¹æœ‰ä¸ªå‰æï¼Œå°±æ˜¯åœ¨é˜¿é‡Œäº‘çš„ ECS é‡Œé¢å·²ç»å¯ä»¥å’Œ rds ä¹‹ç±»çš„æœåŠ¡è¿é€šã€‚</p></blockquote><h2 id="å®éªŒ"><a href="#å®éªŒ" class="headerlink" title="å®éªŒ"></a>å®éªŒ</h2><p>ä¸€èˆ¬æˆ‘ä»¬è·å¾—é˜¿é‡Œäº‘å†…ç½‘åœ°å€çš„æ—¶å€™ï¼Œéƒ½ä¼šå¾—åˆ° <code>rm-uf688k07qu8lt251p90130.mysql.rds.aliyuncs.com</code> ç±»ä¼¼çš„é“¾æ¥ã€‚</p><p>è¿™é‡Œä½¿ç”¨ <a href="https://man.linuxde.net/dig" target="_blank" rel="noopener">dig</a> å‘½ä»¤è·å–å¯¹åº”å†…ç½‘åœ°å€æ‰€å¯¹åº”çš„ ipã€‚</p><p>ç¼ºå°‘ dig å‘½ä»¤çš„ï¼Ÿubuntu ç³»ç»Ÿ</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ apt install dnsutils</span><br></pre></td></tr></table></figure><h3 id="å®¿ä¸»æœºæµ‹è¯•è®¿é—®å†…ç½‘åœ°å€"><a href="#å®¿ä¸»æœºæµ‹è¯•è®¿é—®å†…ç½‘åœ°å€" class="headerlink" title="å®¿ä¸»æœºæµ‹è¯•è®¿é—®å†…ç½‘åœ°å€"></a>å®¿ä¸»æœºæµ‹è¯•è®¿é—®å†…ç½‘åœ°å€</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ dig rm-uf688k07qu8lt251p90130.mysql.rds.aliyuncs.com</span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.11.3-1ubuntu1.8-Ubuntu &lt;&lt;&gt;&gt; rm-uf688k07qu8lt251p90130.mysql.rds.aliyuncs.com</span><br><span class="line">;; global options: +cmd</span><br><span class="line">;; Got answer:</span><br><span class="line">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 48397</span><br><span class="line">;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1</span><br><span class="line"></span><br><span class="line">;; OPT PSEUDOSECTION:</span><br><span class="line">; EDNS: version: 0, flags:; udp: 65494</span><br><span class="line">;; QUESTION SECTION:</span><br><span class="line">;rm-uf688k07qu8lt251p90130.mysql.rds.aliyuncs.com. IN A</span><br><span class="line"></span><br><span class="line">;; ANSWER SECTION:</span><br><span class="line">rm-uf688k07qu8lt251p90130.mysql.rds.aliyuncs.com. 60 IN	A 192.168.0.250</span><br><span class="line"></span><br><span class="line">;; Query time: 0 msec</span><br><span class="line">;; SERVER: 127.0.0.53<span class="comment">#53(127.0.0.53)</span></span><br><span class="line">;; WHEN: Thu Dec 19 16:24:40 CST 2019</span><br><span class="line">;; MSG SIZE  rcvd: 93</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°è¿™é‡Œçš„ dns æ˜¯ <code>127.0.0.53</code> ï¼Œè¿™ä¸ªåœ°å€ ubuntu é»˜è®¤çš„ dns çš„ ipï¼Œ<br><code>rm-uf688k07qu8lt251p90130.mysql.rds.aliyuncs.com</code> å¯¹åº”çš„ ip æ˜¯<br><code>192.168.0.250</code>ã€‚</p><h3 id="å®¹å™¨å†…æµ‹è¯•è®¿é—®å†…ç½‘åœ°å€"><a href="#å®¹å™¨å†…æµ‹è¯•è®¿é—®å†…ç½‘åœ°å€" class="headerlink" title="å®¹å™¨å†…æµ‹è¯•è®¿é—®å†…ç½‘åœ°å€"></a>å®¹å™¨å†…æµ‹è¯•è®¿é—®å†…ç½‘åœ°å€</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ dig rm-uf688k07qu8lt251p90130.mysql.rds.aliyuncs.com</span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.11.5-P4-5.1-Debian &lt;&lt;&gt;&gt; rm-uf688k07qu8lt251p90130.mysql.rds.aliyuncs.com</span><br><span class="line">;; global options: +cmd</span><br><span class="line">;; Got answer:</span><br><span class="line">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 57655</span><br><span class="line">;; flags: qr aa rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1</span><br><span class="line"></span><br><span class="line">;; OPT PSEUDOSECTION:</span><br><span class="line">; EDNS: version: 0, flags:; udp: 4096</span><br><span class="line">; COOKIE: 6cc1d7afb7bf77ce8f82d65a5dfb3603e95f17f7eeb8a82a (good)</span><br><span class="line">;; QUESTION SECTION:</span><br><span class="line">;rm-uf688k07qu8lt251p90130.mysql.rds.aliyuncs.com. IN A</span><br><span class="line"></span><br><span class="line">;; ANSWER SECTION:</span><br><span class="line">rm-uf688k07qu8lt251p90130.mysql.rds.aliyuncs.com. 60 IN	A 192.168.0.250</span><br><span class="line"></span><br><span class="line">;; Query time: 0 msec</span><br><span class="line">;; SERVER: 127.0.0.11<span class="comment">#53(127.0.0.11)</span></span><br><span class="line">;; WHEN: Thu Dec 19 08:34:11 UTC 2019</span><br><span class="line">;; MSG SIZE  rcvd: 121</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„ dns æ˜¯ <code>127.0.0.11</code>ï¼Œè¿™ä¸ªæ˜¯ docker é»˜è®¤çš„ dns æ‰€å¯¹åº”çš„ ipï¼Œä½†æ˜¯è¿™é‡Œçš„å¾—åˆ°çš„ ip è¿˜æ˜¯ <code>192.168.0.250</code>ã€‚</p><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>å…¶å®è¿™é‡Œçš„æµ‹è¯•ç»“æœè¿˜å¾ˆä»¤æˆ‘æƒŠå¥‡çš„ï¼Œä¸ºä»€ä¹ˆåœ¨å®¹å™¨é‡Œé¢ä¹Ÿå¯ä»¥å¾—åˆ°å’Œå®¿ä¸»æœºåŒæ ·çš„ ip å‘¢ï¼Ÿä»¥å‰æˆ‘ä¹Ÿä¸€ç›´è¿™æ ·ä½¿ç”¨ï¼Œç›´åˆ°ä¸Šæ¬¡è¿ç§» redis æˆ‘æ‰æƒ³èµ·é—®ä¸ºä»€ä¹ˆã€‚</p><p>å®¹å™¨ä¸­çš„DNSåç§°è§£æä¼˜å…ˆçº§é¡ºåºä¸ºï¼š</p><ul><li>å†…ç½®DNSæœåŠ¡å™¨127.0.0.11ã€‚</li><li>é€šè¿‡â€“dnsç­‰å‚æ•°ä¸ºå®¹å™¨é…ç½®çš„DNSæœåŠ¡å™¨ã€‚</li><li>dockerå®ˆæŠ¤è¿›ç¨‹çš„â€“dnsæœåŠ¡é…ç½®ï¼ˆé»˜è®¤ä¸º8.8.8.8å’Œ8.8.4.4ï¼‰</li><li>å®¿ä¸»æœºä¸Šçš„DNSè®¾ç½®ã€‚</li></ul><p>ç”±äºé»˜è®¤æƒ…å†µæ˜¯æ²¡æœ‰ç¬¬äºŒæ­¥å’Œç¬¬ä¸‰æ­¥ï¼Œæ‰€ä»¥åœ¨å‘ docker å†…éƒ¨ dns æœåŠ¡å™¨è¯·æ±‚ <code>rm-uf688k07qu8lt251p90130.mysql.rds.aliyuncs.com</code> çš„æ—¶å€™ï¼Œå†…éƒ¨ dns æ˜¯æ— æ³•ç»™åˆ°åœ°å€çš„ï¼Œæ‰€ä»¥è¿™ä¸ªåœ°å€åˆäº¤å›åˆ°å®¿ä¸»æœºäº†ã€‚å®¿ä¸»æœºä¹Ÿä¸çŸ¥é“åœ°å€ï¼Œéšå³é€šè¿‡äº¤æ¢æœºé€’äº¤åˆ°è·¯ç”±å™¨ï¼Œè·¯ç”±å™¨å½“ç„¶æ˜¯çŸ¥é“è¿™ä¸ªåœ°å€æ˜¯å¤šå°‘ï¼Œå°±å°† <code>192.168.0.250</code> è¿”å›äº†ã€‚æˆ‘ä»¬åœ¨è´­ä¹° rds æœåŠ¡çš„æ—¶å€™éœ€è¦é€‰æ‹©ä¸€ä¸ªå¯ç”¨åŒºï¼Œè€Œè¿™ä¸ª rds å°±æ˜¯æŒ‚åœ¨è¿™ä¸ªå¯ç”¨åŒºæ‰€å¯¹åº”çš„äº¤æ¢æœºä¸Šã€‚</p><h2 id="ç»§ç»­æ¢è®¨"><a href="#ç»§ç»­æ¢è®¨" class="headerlink" title="ç»§ç»­æ¢è®¨"></a>ç»§ç»­æ¢è®¨</h2><p>è¿™é‡Œå®¹å™¨å†…å·²ç»è·å¾— rds æ‰€å¯¹åº”çš„ ip äº†ï¼Œä½†æ˜¯åœ¨å®¹å™¨å†…å¦‚ä½•èƒ½è®¿é—®åˆ° <code>192.168.0.250</code> è¿™ä¸ªåœ°å€å‘¢ï¼Ÿ<br>æˆ‘ä»¬å¯ä»¥å…ˆè·å–å®¹å™¨çš„ ip åœ°å€</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker inspect <span class="variable">$CONTAINER</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"><span class="string">"Gateway"</span>: <span class="string">"192.168.64.1"</span>,</span><br><span class="line"><span class="string">"IPAddress"</span>: <span class="string">"192.168.64.5"</span>,</span><br></pre></td></tr></table></figure><p>ç°åœ¨é—®é¢˜å˜æˆ <code>192.168.64.5</code> æƒ³å»è¿æ¥ <code>192.168.0.250</code>ã€‚<br><code>192.168.64.5</code> å‘ç°è‡ªå·±å’Œ <code>192.168.0.250</code> ä¸åœ¨ä¸€ä¸ªå­ç½‘å†….</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ route -n</span><br><span class="line"></span><br><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line">0.0.0.0         192.168.0.253   0.0.0.0         UG    0      0        0 eth0</span><br><span class="line">192.168.0.0     0.0.0.0         255.255.255.0   U     0      0        0 eth0</span><br><span class="line">192.168.16.0    0.0.0.0         255.255.240.0   U     0      0        0 br-317146d44671</span><br><span class="line">192.168.32.0    0.0.0.0         255.255.240.0   U     0      0        0 br-dcf4529fa753</span><br><span class="line">192.168.48.0    0.0.0.0         255.255.240.0   U     0      0        0 br-a5d4178cf1f7</span><br><span class="line">192.168.64.0    0.0.0.0         255.255.240.0   U     0      0        0 br-568ac4a0657a</span><br><span class="line">192.168.200.0   0.0.0.0         255.255.255.0   U     0      0        0 docker0</span><br></pre></td></tr></table></figure><p>æŠŠè¯·æ±‚äº¤ç»™äº† <code>192.168.0.0</code> å¤„ç†ï¼Œè¿™æ · <code>192.168.64.5</code> ç»ˆäºè¿ä¸Šäº† <code>192.168.0.250</code> ã€‚</p><h1 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h1><ul><li><a href="https://help.aliyun.com/document_detail/34221.html?spm=a2c4g.11186623.6.546.599b6c16I4cskX" target="_blank" rel="noopener">é˜¿é‡Œäº‘ä¸“æœ‰ç½‘ç»œ VPCæ–‡æ¡£</a></li><li><a href="http://dockone.io/article/2316" target="_blank" rel="noopener">dockerå†…ç½®dnsserverå·¥ä½œæœºåˆ¶</a></li></ul><!-- rebuild by neat -->]]></content>
      <categories>
        <category>ç½‘ç»œ</category>
      </categories>
      <tags>
        <tag>vpc</tag>
      </tags>
  </entry>
  <entry>
    <title>é˜¿é‡Œäº‘redisæœåŠ¡è¿ç§»è®°å½•</title>
    <url>/p/79fa.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><h2 id="æ€»æœ‰é‚£ä¹ˆä¸€æ®µåºŸè¯"><a href="#æ€»æœ‰é‚£ä¹ˆä¸€æ®µåºŸè¯" class="headerlink" title="æ€»æœ‰é‚£ä¹ˆä¸€æ®µåºŸè¯"></a>æ€»æœ‰é‚£ä¹ˆä¸€æ®µåºŸè¯</h2><p>å› ä¸ºæŸä¸ªé¡¹ç›®å‰æœŸæ•°æ®é‡æ¯”è¾ƒå°ï¼Œæ‰€ä»¥å°±ç›´æ¥ä½¿ç”¨ docker èµ·çš„ redis æœåŠ¡ï¼Œç”±äºç°åœ¨çš„ä¸šåŠ¡è§„æ¨¡ä¸Šå‡ï¼ŒåŸæœ‰çš„ reids æœåŠ¡ä¸èƒ½è¿›è¡Œæ•°æ®ç›‘æ§ä»¥åŠä¸æ–¹ä¾¿æ•°æ®ç®¡ç†å’Œç»´æŠ¤ï¼Œæ‰€ä»¥åœ¨é˜¿é‡Œäº‘å•ç‹¬ä¹°äº†ä¸€ä¸ªäº‘ redis æœåŠ¡ï¼Œæˆ‘å‰æœŸä¸ºäº†å®‰å…¨ï¼Œä¹Ÿæ²¡æœ‰å°† redis æœåŠ¡çš„ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºï¼Œæ‰€ä»¥ç»™æˆ‘çš„è¿ç§»ä¹Ÿå¸¦æ¥äº†æŒ‘æˆ˜ã€‚</p><h2 id="æ­£å¼æ­¥éª¤"><a href="#æ­£å¼æ­¥éª¤" class="headerlink" title="æ­£å¼æ­¥éª¤"></a>æ­£å¼æ­¥éª¤</h2><h3 id="å¼€å¯å®¿ä¸»æœºç«¯å£æ˜ å°„"><a href="#å¼€å¯å®¿ä¸»æœºç«¯å£æ˜ å°„" class="headerlink" title="å¼€å¯å®¿ä¸»æœºç«¯å£æ˜ å°„"></a>å¼€å¯å®¿ä¸»æœºç«¯å£æ˜ å°„</h3><p>åœ¨ <code>docker-compose.yml</code> æ–‡ä»¶ä¸‹ä¿®æ”¹ <strong>redis</strong> serviceï¼Œå¢åŠ  ports å­—æ®µã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">redis:</span><br><span class="line">  container_name: redis-pro</span><br><span class="line">  image: redis:<span class="number">4.0</span><span class="number">.10</span></span><br><span class="line">  sysctls:</span><br><span class="line">    net.core.somaxconn: <span class="number">65535</span></span><br><span class="line">  ports:</span><br><span class="line">    - <span class="string">"6380:6379"</span></span><br><span class="line">  networks:</span><br><span class="line">    - backend</span><br><span class="line">  restart: always</span><br></pre></td></tr></table></figure><p>æ›´æ–° redis æœåŠ¡</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker-compose up -d redis</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ç«¯å£æ˜ å°„çŠ¶æ€</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker-compose ps</span><br><span class="line"></span><br><span class="line">redis   docker-entrypoint.sh redis ...   Up      0.0.0.0:6380-&gt;6379/tcp</span><br></pre></td></tr></table></figure><h3 id="å¼€å¯é˜¿é‡Œäº‘-DTS-æœåŠ¡"><a href="#å¼€å¯é˜¿é‡Œäº‘-DTS-æœåŠ¡" class="headerlink" title="å¼€å¯é˜¿é‡Œäº‘ DTS æœåŠ¡"></a>å¼€å¯é˜¿é‡Œäº‘ DTS æœåŠ¡</h3><p>é€‰æ‹©å’Œå®¿ä¸»æœºä»¥åŠ redis åœ¨åŒä¸€ä¸ªåœ°åŸŸçš„<code>æ•°æ®ä¼ è¾“æœåŠ¡</code>ï¼Œç†è®ºä¸Šè¿™æ ·çš„æœåŠ¡ä¼šå»¶è¿Ÿæ›´ä½ï¼Œç¨³å®šæ€§æ›´å¥½ã€‚</p><p><img src="/images/pasted-8.png" alt="upload successful"></p><p>åˆ†åˆ«é…ç½®å¥½æºåº“ä¿¡æ¯å’Œç›®æ ‡åº“ä¿¡æ¯ï¼Œé˜¿é‡Œäº‘è¿˜æ˜¯å¾ˆè´´å¿ƒï¼Œæµ‹è¯•è¿æ¥å¦‚æœéƒ½æ˜¯é€šè¿‡å°±å¯ä»¥ä¸‹ä¸€æ­¥ä¸‹ä¸€æ­¥äº†ã€‚</p><p>ç­‰å¾…åˆ°å…¨é‡æ›´æ–°ä¸º ã€Œ100%ã€å°±è¯´æ˜æœ¬æ¬¡è¿ç§»å·²å®Œæˆå¾ˆå¤§ä¸€éƒ¨åˆ†äº†ã€‚</p><blockquote><p>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ DTS æœåŠ¡ï¼Œè€Œä¸æ˜¯è‡ªå·±å°† redis ä¿å­˜æˆæ–‡ä»¶ï¼Œå¯¼å…¥åˆ°æ–°çš„ redis æœåŠ¡å‘¢ï¼Ÿä¸»è¦æ˜¯ DTS æœåŠ¡æ”¯æŒå¢é‡æ›´æ–°ï¼Œåé¢å¯èƒ½ä¼šæŒç»­æœ‰æ•°æ®çš„è¯»å†™è¦†ç›–ç­‰ï¼Œè¿™äº› DTS æœåŠ¡ä¼šä¸€æ¡é¾™æœåŠ¡è§£å†³æ‰ã€‚</p></blockquote><h3 id="é…ç½®-redis-åœ°å€"><a href="#é…ç½®-redis-åœ°å€" class="headerlink" title="é…ç½® redis åœ°å€"></a>é…ç½® redis åœ°å€</h3><h4 id="å¼€å¯äº‘-reids-å¤–ç½‘åœ°å€"><a href="#å¼€å¯äº‘-reids-å¤–ç½‘åœ°å€" class="headerlink" title="å¼€å¯äº‘ reids å¤–ç½‘åœ°å€"></a>å¼€å¯äº‘ reids å¤–ç½‘åœ°å€</h4><blockquote><p>å®é™…è¿‡ç¨‹ä¸­æˆ‘æ˜¯ç›´æ¥ç”¨çš„å†…ç½‘åœ°å€ï¼Œå‘ç°å†…ç½‘æ ¹æœ¬è¿ä¸ä¸Šã€‚</p></blockquote><p>è¿™é‡Œç›´æ¥è¯´å¤–ç½‘åœ°å€ï¼Œä¿è¯ç³»ç»Ÿå…ˆè°ƒé€šï¼Œè¿™é‡Œæ³¨æ„ä¸¤ç‚¹ã€‚</p><ul><li>è´­ä¹°çš„ reids ç‰ˆæœ¬ï¼Œé˜¿é‡Œäº‘ Redis4.0 åŠä»¥ä¸Šç‰ˆæœ¬å¯†ç æ ¼å¼ä¸ºâ€œè´¦å·:å¯†ç â€ï¼Œå…¶ä»–ç‰ˆæœ¬å°±åªæœ‰å¯†ç ï¼Œæ²¡æœ‰è´¦æˆ·æ¦‚å¿µï¼Œå½“ç„¶æˆ‘æ˜¯è¿½æ±‚æè‡´ä½“éªŒå…¨éƒ¨é€‰æœ€æ–°ã€‚</li><li>ç‚¹å‡»ç”³è¯·å¤–ç½‘é“¾æ¥ï¼Œæ˜¯éœ€è¦ç­‰å¾… 20 ç§’å·¦å³æ‰èƒ½ä½¿ç”¨çš„ï¼Œä¸æ˜¯ç«‹å³ç”Ÿæ•ˆã€‚</li></ul><p><img src="/images/pasted-9.png" alt="upload successful"></p><h4 id="ä¿®æ”¹-web-æœåŠ¡ä¸­çš„-redis-åœ°å€"><a href="#ä¿®æ”¹-web-æœåŠ¡ä¸­çš„-redis-åœ°å€" class="headerlink" title="ä¿®æ”¹ web æœåŠ¡ä¸­çš„ redis åœ°å€"></a>ä¿®æ”¹ web æœåŠ¡ä¸­çš„ redis åœ°å€</h4><p>å› ä¸ºæˆ‘åœ¨ä½¿ç”¨ swoftï¼Œç›´æ¥ä¿®æ”¹ redis çš„é…ç½®æ–‡ä»¶ <code>config/pro/redis.php</code>ã€‚</p><p><img src="/images/pasted-10.png" alt="upload successful"></p><p>å°†ä»£ç éƒ¨ç½²åˆ°çº¿ä¸Šï¼Œå‘ç°æœåŠ¡æ­£å¸¸è¿è¡Œã€‚å¦‚æœä½ èƒ½æ¥å—å¤–ç½‘è®¿é—®ï¼Œé‚£ä¹ˆåˆ°è¿™é‡Œå°±å¯ä»¥ç»“æŸäº†ï¼Œæˆ‘ä¸€ä¸ªè¿½æ±‚æè‡´çš„äººï¼Œå½“ç„¶æ˜¯ä¸èƒ½å®¹å¿çº¿ä¸ŠæœåŠ¡å°±è¿™ä¹ˆæš´éœ²åœ¨å¤–ç½‘ä¸­ï¼Œå³ä½¿æœ‰ç™½åå•æœºåˆ¶ã€‚</p><h3 id="å‡ºç°çš„é—®é¢˜"><a href="#å‡ºç°çš„é—®é¢˜" class="headerlink" title="å‡ºç°çš„é—®é¢˜"></a>å‡ºç°çš„é—®é¢˜</h3><p>ä¸»è¦æ˜¯ redis é…ç½®è¿™å—ç¢°åˆ°äº†ä¸€ä¸ªå¤§å‘ï¼Œå’Œé˜¿é‡Œäº‘çš„æŠ€æœ¯å®¢æœæ¥æ¥å»å»èŠäº†ä¸€å¤©ï¼Œä»–ä»¬æ¯åŠå°æ—¶æˆ–è€…ä¸€ä¸ªå°æ—¶æ‰ç»™æˆ‘å›å¤ä¸€æ¡æ¶ˆæ¯ï¼Œåˆ°æ™šä¸Šæ‰ç»™æˆ‘è§£å†³ï¼Œæ„Ÿè§‰ç™½å¤©çš„é˜¿é‡Œäº‘å®¢æœæŠ€æœ¯æ°´å¹³å®Œå…¨æ˜¯å€¼ç­çš„ï¼Œä¸€äº›å¾ˆç®€å•çš„é—®é¢˜å’Œæˆ‘ç»•äº†åŠå¤©ï¼Œç»“æœé“æ­‰è¯´ä»–å¼„é”™äº†ï¼Œæ˜¯åœ¨æ€€ç–‘æˆ‘ä¸ä¸“ä¸šå—ï¼Ÿä¸è¿‡æœ€åé‚£ä¸ªæŠ€æœ¯å®¢æœä¸€ä¸‹å°±èƒ½æŠ“ä½é‡ç‚¹ï¼Œé—®é¢˜ä¸€ä¸‹å°±è§£å†³äº†ã€‚ç»™äº†æˆ‘ä¸€ä¸ªæ–‡æ¡£ä¹Ÿä¸çŸ¥é“æ˜¯å“ªä½å¤§ä½¬çš„åšå®¢ï¼Œæ˜¯è¿™ä½å®¢æœè‡ªå·±çš„ä¹ˆï¼ŸğŸ™ƒğŸ™ƒ</p><p>æˆ‘åœ¨ä½¿ç”¨å†…ç½‘åœ°å€çš„æ—¶å€™ä¸€ç›´ä¼šåé¦ˆä¸€ä¸ªé”™è¯¯ã€‚å‘ç° redis è¿æ¥ä¸€ç›´è¶…æ—¶ã€‚<br>ç„¶åæˆ‘å» ping äº†ä¸€ä¸‹ä»–çš„åœ°å€</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ping r-xxxxxxxxxx.redis.rds.aliyuncs.com</span><br><span class="line"></span><br><span class="line">Destination Host Unreachable</span><br></pre></td></tr></table></figure><p>ç»™æˆ‘åé¦ˆçš„ <code>Destination Host Unreachable</code> å°±æ˜¯è¿™ä¸ªé”™è¯¯ï¼Œç®€å•çš„è¯´å°±æ˜¯ dns è§£æä¸åˆ°ï¼Œç½‘ç»œæ— æ³•è¿é€šã€‚æˆ‘å¼€å§‹ä»¥ä¸ºè¿™ä¸ªå¯èƒ½æ˜¯é˜¿é‡Œäº‘æ•…æ„å…³é—­äº† ping æ‰€éœ€è¦çš„ icmp åŒ…ã€‚</p><p>æˆ‘å°±ä½¿ç”¨ reids å®¢æˆ·ç«¯å»å®éªŒï¼Œå‚æ•° h æ˜¯åœ°å€ï¼Œå‚æ•° a æ˜¯å¯†ç ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ redis-cli -h r-xxxxxxxxxx.redis.rds.aliyuncs.com -a xxxxx</span><br><span class="line"></span><br><span class="line">Name or service not known</span><br></pre></td></tr></table></figure><p>å‘ç°è¿™ä¸ªå†…ç½‘çœŸçš„è®¿é—®ä¸ä¸Šï¼Œå’Œé˜¿é‡Œäº‘å®¢æœç™¾èˆ¬æ²Ÿé€šä¹‹åï¼Œæä¾›çš„è§£å†³æ–¹æ¡ˆæ¥çœ‹ï¼Œæ˜¯é€šä¿¡çš„ç½‘å¡èµ°é”™äº†ã€‚</p><h4 id="é…ç½®-docker"><a href="#é…ç½®-docker" class="headerlink" title="é…ç½® docker"></a>é…ç½® docker</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ vi  /etc/docker/daemon.json</span><br></pre></td></tr></table></figure><p>daemon.json æ–‡ä»¶é‡Œé¢å¢åŠ ä¸€ä¸ªç½‘æ®µä¿¡æ¯</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"bip"</span>: <span class="string">"192.168.200.1/24"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡å¯ docker æœåŠ¡</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ systemctl restart docker</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯æˆ‘è¿™é‡Œé‡å¯ docker æœåŠ¡è¿˜æ˜¯æŠ¥é”™äº†ï¼Œæœ€åä¸å¾—å·²é‡å¯äº†æœºå™¨ã€‚</p><p>ping äº†ä¸€ä¸‹åœ°å€ç¡®å®æ˜¯èƒ½ ping åˆ°ï¼Œé‡æ–°é…ç½®äº† reids çš„å†…ç½‘åœ°å€ï¼Œä¸€åˆ‡éƒ½æ¢å¤æ­£å¸¸äº†ã€‚</p><h3 id="å…³é—­é˜¿é‡Œäº‘-DTS-æœåŠ¡"><a href="#å…³é—­é˜¿é‡Œäº‘-DTS-æœåŠ¡" class="headerlink" title="å…³é—­é˜¿é‡Œäº‘ DTS æœåŠ¡"></a>å…³é—­é˜¿é‡Œäº‘ DTS æœåŠ¡</h3><p>å› ä¸º DTS æœåŠ¡æ˜¯æ”¶è´¹æœåŠ¡ï¼Œçº¿ä¸Šæ—¢ç„¶å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œå°±å¯ä»¥å…ˆæš‚åœæœåŠ¡ï¼Œç„¶åé‡Šæ”¾æ‰å°±å¯ä»¥äº†ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>è¿™ä¸ªæ€»ç»“æˆ‘ç ”ç©¶äº†å¥½å‡ å¤©ï¼Œæ„Ÿè§‰è¿˜æ˜¯ä¸è¦æ€»ç»“äº†ï¼Œå› ä¸ºæœ‰äº›çŸ¥è¯†è¿˜æ˜¯éœ€è¦æˆ‘å»å‘æ˜ï¼Œå› ä¸ºå¯¹äºè¿™ä¸ªå†…ç½‘åœ°å€æˆ‘å®åœ¨æœ‰ç‚¹ä¸å¤ªæ˜ç™½ï¼Œå®ƒçš„åŸç†æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆæˆ‘åœ¨ä½¿ç”¨ <code>dns 8.8.8.8</code> çš„æ—¶å€™ï¼Œè¿˜æ˜¯å¯ä»¥è§£æåˆ°å†…ç½‘åœ°å€?</p><p>åé¢æˆ‘ä¼šè¡¥å……ä¸€ç¯‡å†…å®¹ä¸“é—¨è®¨è®ºé˜¿é‡Œäº‘çš„å†…ç½‘æŠ€æœ¯ã€‚</p><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ul><li><a href="https://www.chenxie.net/archives/2049.html" target="_blank" rel="noopener">é˜¿é‡Œå¤§ä½¬æä¾›çš„è§£å†³æ–¹æ¡ˆ</a></li></ul><!-- rebuild by neat -->]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>reids</tag>
        <tag>redisè¿ç§»</tag>
      </tags>
  </entry>
  <entry>
    <title>swoftæ—¶é—´æˆ³é—®é¢˜</title>
    <url>/p/1da.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>swoft è¿™ä¸ªæ¡†æ¶æˆ‘æ˜¯è¶Šç”¨è¶Šçƒ¦äº†ï¼Œç¼ºå°‘äº†å…³è”æ¨¡å‹çš„ Eloquent ç”¨èµ·æ¥æ€»æ˜¯è¹©æ‰‹è¹©è„šï¼Œä¸‹æ¬¡è®©æˆ‘é€‰æ‹©ä¸€ä¸ª swoole æ¡†æ¶æˆ‘ä¸€å®šä¼šé€‰æ‹© <a href="https://www.hyperf.io/" target="_blank" rel="noopener">hyperf</a>ã€‚</p><p>å…³äº swoft è‡ªåŠ¨å†™å…¥æ—¶é—´æˆ³ï¼Œåœ¨åˆšå¼€å§‹ä¸€ç›´æ²¡æœ‰å¼„å¯¹ï¼Œæœ€æ—©æ˜¯æ€ä¹ˆéƒ½ä¸æ›´æ–°ï¼Œåæ¥æˆ‘å‘ç°å¯ä»¥ç”¨ int ç±»å‹ï¼Œæ‰€ä»¥æ•°æ®åº“é‡Œé¢çš„ åˆ›å»ºæ—¶é—´å’Œæ›´æ–°æ—¶é—´éƒ½æ˜¯ int ç±»å‹ï¼Œä½†æ˜¯æˆ‘è¿™è¾¹æ”¶åˆ°çš„éœ€æ±‚æ˜¯è¦æ ¹æ®å¹´æœˆè¿›è¡Œç­›é€‰ï¼Œint ç±»å‹å°±è¦ææ­»æˆ‘ã€‚</p><p><a href="https://en.swoft.org/docs/2.x/zh-CN/db/model.html#%E8%87%AA%E5%8A%A8%E5%86%99%E5%85%A5%E6%97%B6%E9%97%B4%E6%88%B3" target="_blank" rel="noopener">å®˜ç½‘ä»‹ç»è‡ªåŠ¨å†™å…¥æ—¶é—´æˆ³</a>ï¼Œæˆ‘è§‰å¾—ä½œè€…æ²¡æœ‰è¯´æ¸…æ¥šï¼Œåˆ°åº•åº”è¯¥æ€ä¹ˆå¼„ï¼Œæˆ‘åœ¨è‡ªå·±çš„æ‘¸ç´¢ä¸‹ï¼Œå‘ç°åªéœ€è¦æŠŠæ—¶é—´æˆ³å£°æ˜ string ç±»å‹å³å¯è§£å†³ã€‚</p><p><img src="/images/pasted-6.png" alt="upload successful"></p><p>æ•°æ®åº“ä¸­çš„ç±»å‹è®°å¾—å£°æ˜æˆ timestamp ç±»å‹</p><p><img src="/images/pasted-7.png" alt="upload successful"></p><p>å¤´ç–¼ğŸ™ƒğŸ™ƒ</p><!-- rebuild by neat -->]]></content>
      <categories>
        <category>swoft</category>
      </categories>
  </entry>
  <entry>
    <title>v2rayå…¥é—¨</title>
    <url>/p/a001.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>å‰ç«¯æ—¶é—´æœ‹å‹ä¸€ç›´åœ¨å®‰åˆ© v2rayï¼Œä»–ä»¬å…¬å¸ CTO æ˜¯ä¸ªæ­æ¢¯é«˜æ‰‹ï¼Œå„ç§ ss v2ray ç»™ä»–ä»¬å…è´¹ä½¿ç”¨å®åœ¨ä¸è¦å¤ªçˆ½ã€‚æˆ‘å¾ˆæ—©å°±å¬è¯´è¿‡ v2rayï¼Œä½†æ˜¯ä¹Ÿä¸€ç›´æ²¡æœ‰å°è¯•è¿‡ï¼Œæ„Ÿè§‰æ¯æ¬¡çœ‹åˆ° v2ray æ•™ç¨‹éƒ½æ˜¯å¾ˆå¤§ç¯‡å¹…ï¼Œä¹Ÿæ²¡ä»€ä¹ˆè€å¿ƒå»çœ‹ï¼Œå°±åƒä¸Šä¸ªç½‘æè¿™ä¹ˆéº»çƒ¦ï¼Œä½†æ˜¯ä½œä¸ºä¸€ä¸ªèµ„æ·± docker ä½¿ç”¨è€…æ¥è¯´ï¼Œæ²¡æœ‰ä»€ä¹ˆç¨‹åºæ˜¯ä¸€ä¸ª docker é•œåƒè§£å†³ä¸äº†çš„ï¼Œå¦‚æœæœ‰é‚£å°±æ˜¯é•œåƒå†™çš„ä¸å¥½ã€‚</p><p>æ— è®ºè¿™ä¸ªä¸œè¥¿æ€ä¹ˆå¤æ‚ï¼Œæˆ‘ä»¬å…ˆè®©è½¦ä¸Šè·¯ï¼ŒåºŸè¯å°‘è¯´ã€‚</p><h2 id="å®‰è£…-v2ray-æœåŠ¡ç«¯"><a href="#å®‰è£…-v2ray-æœåŠ¡ç«¯" class="headerlink" title="å®‰è£… v2ray æœåŠ¡ç«¯"></a>å®‰è£… v2ray æœåŠ¡ç«¯</h2><h3 id="ä¸‹è½½é•œåƒ"><a href="#ä¸‹è½½é•œåƒ" class="headerlink" title="ä¸‹è½½é•œåƒ"></a>ä¸‹è½½é•œåƒ</h3><p>docker å®‰è£…ä»€ä¹ˆçš„æˆ‘ç›´æ¥ç•¥è¿‡äº†ï¼Œéƒ½æ˜¯ä¸€å¥è¯çš„äº‹ï¼Œç›´æ¥è¿›å…¥</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker pull v2ray/official</span><br></pre></td></tr></table></figure><h3 id="å‡†å¤‡é…ç½®æ–‡ä»¶"><a href="#å‡†å¤‡é…ç½®æ–‡ä»¶" class="headerlink" title="å‡†å¤‡é…ç½®æ–‡ä»¶"></a>å‡†å¤‡é…ç½®æ–‡ä»¶</h3><p>è¿™è¾¹æˆ‘åœ¨å®˜ç½‘ä¸‹è½½äº†ä¸€ä¸ªé…ç½®ï¼Œè¿™åº”è¯¥æ˜¯æœ€ç®€é…ç½®äº†å§ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"inbounds"</span>: [&#123;</span><br><span class="line">    <span class="string">"port"</span>: <span class="number">10086</span>, <span class="comment">// æœåŠ¡å™¨ç›‘å¬ç«¯å£ï¼Œå¿…é¡»å’Œä¸Šé¢çš„ä¸€æ ·</span></span><br><span class="line">    <span class="string">"protocol"</span>: <span class="string">"vmess"</span>,</span><br><span class="line">    <span class="string">"settings"</span>: &#123;</span><br><span class="line">      <span class="string">"clients"</span>: [&#123; <span class="string">"id"</span>: <span class="string">"b831381d-6324-4d53-ad4f-8cda48b30811"</span> &#125;]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;],</span><br><span class="line">  <span class="string">"outbounds"</span>: [&#123;</span><br><span class="line">    <span class="string">"protocol"</span>: <span class="string">"freedom"</span>,</span><br><span class="line">    <span class="string">"settings"</span>: &#123;&#125;</span><br><span class="line">  &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°†æ–‡ä»¶å­˜å‚¨ä¸º <code>config.json</code> å³å¯ã€‚</p><h3 id="å¯åŠ¨é•œåƒ"><a href="#å¯åŠ¨é•œåƒ" class="headerlink" title="å¯åŠ¨é•œåƒ"></a>å¯åŠ¨é•œåƒ</h3><p>å¾ˆæƒ³ç»™å®˜æ–¹é•œåƒå†™ä¸ª readmeï¼Œå•¥ä¹Ÿæ²¡æœ‰ï¼Œå…¨é è‡ªå·±æ‚Ÿæ€§å‘¢ï¼Œè¿™æ˜¯ï¼Ÿ</p><p>æˆ‘çœ‹äº†ä¸€ä¸‹å®ƒçš„ <a href="https://hub.docker.com/r/v2ray/official/dockerfile" target="_blank" rel="noopener">dockerfile</a>ï¼Œ çœ‹åˆ°ä»– copy äº†ä¸€ä¸ªæ–‡ä»¶ <code>COPY config.json /etc/v2ray/config.json</code>ï¼Œçœ‹åˆ°è¿™ç¨³äº†ï¼Œæˆ‘åªéœ€è¦æŠŠå¤–é¢çš„æ–‡ä»¶æŒ‚è½½åˆ°å®¹å™¨é‡Œé¢å°±å¥½äº†ã€‚é…ç½®æ–‡ä»¶ä¸­ç«¯å£æ˜¯ 10086ï¼Œæ‰€ä»¥è¿™é‡Œç›´æ¥æ˜ å°„åˆ°å®¿ä¸»æœºä¸Šã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run --name=v2 -p 10086:10086 -v <span class="variable">$PWD</span>:/etc/v2ray -d  v2ray/official</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…-v2ray-å®¢æˆ·ç«¯"><a href="#å®‰è£…-v2ray-å®¢æˆ·ç«¯" class="headerlink" title="å®‰è£… v2ray å®¢æˆ·ç«¯"></a>å®‰è£… v2ray å®¢æˆ·ç«¯</h2><h3 id="å‡†å¤‡é…ç½®æ–‡ä»¶-1"><a href="#å‡†å¤‡é…ç½®æ–‡ä»¶-1" class="headerlink" title="å‡†å¤‡é…ç½®æ–‡ä»¶"></a>å‡†å¤‡é…ç½®æ–‡ä»¶</h3><p>å®¢æˆ·ç«¯è¿™å—ä¹Ÿæ˜¯ä¸‹è½½ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå­˜å‚¨ä¸º <code>config.json</code> å³å¯ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"inbounds"</span>: [&#123;</span><br><span class="line">    <span class="string">"port"</span>: <span class="number">1080</span>,  <span class="comment">// SOCKS ä»£ç†ç«¯å£ï¼Œåœ¨æµè§ˆå™¨ä¸­éœ€é…ç½®ä»£ç†å¹¶æŒ‡å‘è¿™ä¸ªç«¯å£</span></span><br><span class="line">    <span class="string">"listen"</span>: <span class="string">"127.0.0.1"</span>,</span><br><span class="line">    <span class="string">"protocol"</span>: <span class="string">"socks"</span>,</span><br><span class="line">    <span class="string">"settings"</span>: &#123;</span><br><span class="line">      <span class="string">"udp"</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;],</span><br><span class="line">  <span class="string">"outbounds"</span>: [&#123;</span><br><span class="line">    <span class="string">"protocol"</span>: <span class="string">"vmess"</span>,</span><br><span class="line">    <span class="string">"settings"</span>: &#123;</span><br><span class="line">      <span class="string">"vnext"</span>: [&#123;</span><br><span class="line">        <span class="string">"address"</span>: <span class="string">"server"</span>, <span class="comment">// æœåŠ¡å™¨åœ°å€ï¼Œè¯·ä¿®æ”¹ä¸ºä½ è‡ªå·±çš„æœåŠ¡å™¨ ip æˆ–åŸŸå</span></span><br><span class="line">        <span class="string">"port"</span>: <span class="number">10086</span>,  <span class="comment">// æœåŠ¡å™¨ç«¯å£</span></span><br><span class="line">        <span class="string">"users"</span>: [&#123; <span class="string">"id"</span>: <span class="string">"b831381d-6324-4d53-ad4f-8cda48b30811"</span> &#125;]</span><br><span class="line">      &#125;]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,&#123;</span><br><span class="line">    <span class="string">"protocol"</span>: <span class="string">"freedom"</span>,</span><br><span class="line">    <span class="string">"tag"</span>: <span class="string">"direct"</span>,</span><br><span class="line">    <span class="string">"settings"</span>: &#123;&#125;</span><br><span class="line">  &#125;],</span><br><span class="line">  <span class="string">"routing"</span>: &#123;</span><br><span class="line">    <span class="string">"domainStrategy"</span>: <span class="string">"IPOnDemand"</span>,</span><br><span class="line">    <span class="string">"rules"</span>: [&#123;</span><br><span class="line">      <span class="string">"type"</span>: <span class="string">"field"</span>,</span><br><span class="line">      <span class="string">"ip"</span>: [<span class="string">"geoip:private"</span>],</span><br><span class="line">      <span class="string">"outboundTag"</span>: <span class="string">"direct"</span></span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="mac-ã€"><a href="#mac-ã€" class="headerlink" title="mac ã€"></a>mac ã€</h3><p>github ä¸Šé¢ç›´æ¥ä¸‹è½½ <a href="https://github.com/yanue/V2rayU/releases" target="_blank" rel="noopener">V2rayUå®¢æˆ·ç«¯</a> è¿™ä¸ªå®¢æˆ·ç«¯ï¼Œæˆ‘ç›®å‰åœ¨ç”¨è§‰å¾—è¿˜ä¸é”™ã€‚</p><p>ä¾æ¬¡é…ç½®ï¼šæœåŠ¡å™¨è®¾ç½® - å¯¼å…¥æ¨¡å¼ - é€‰æ‹©æ–‡ä»¶ - é€‰æ‹© config.json ï¼Œ</p><p><img src="/images/pasted-4.png" alt="upload successful"></p><p>ç„¶åå»æ‰‹åŠ¨æ¨¡å¼é‡Œé¢æ£€æŸ¥æ£€æŸ¥ï¼Œå¦‚æœæ²¡æœ‰é—®é¢˜å·®ä¸å¤šå°±æå®šäº†ã€‚</p><h3 id="ios"><a href="#ios" class="headerlink" title="ios"></a>ios</h3><p>æ‰‹æœºä¸Šä½¿ç”¨ <code>shadowrocket</code> ï¼Œå›¾æ ‡æ˜¯ä¸€ä¸ªå°ç«ç®­ï¼Œä¸­å›½åŒºçš„ App Store ç°åœ¨åº”è¯¥ä¸‹è½½ä¸åˆ°äº†ï¼Œå¯ä»¥å» google ä¸Šæœç´¢å¤§ä½¬æä¾›çš„ App Store é¦™æ¸¯çš„è´¦æˆ·ï¼Œä¸Šé¢æ˜¯å¯ä»¥ä¸‹è½½ã€‚</p><p>æ‰“å¼€ shadowrocketï¼Œé€‰æ‹©å³ä¸Šè§’æ·»åŠ ï¼Œç„¶ååº•éƒ¨æ‰“å¼€ <code>æ‰«ç äºŒç»´ç </code>ï¼Œmac ä¸Šé¢çš„ V2rayU é€‰æ‹©åˆ†äº«äºŒç»´ç æ¥å£å®Œæˆ shadowrocket æ·»åŠ ã€‚</p><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p>æµè§ˆå™¨æ‰“å¼€ <code>google.com</code> ï¼Œåˆå¯ä»¥æ„‰å¿«çš„çœ‹å›½å¤–çš„æ–‡æ¡£äº†ã€‚å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥è”ç³»æˆ‘ï¼Œv2ray åŸºç¡€åŠŸèƒ½å·®ä¸å¤šæ˜¯å¯ä»¥çš„ï¼Œæ›´å¤æ‚çš„åŠŸèƒ½æˆ‘ä¹Ÿç»§ç»­åœ¨çœ‹æ–‡æ¡£ã€‚</p><h2 id="å°æŠ€å·§"><a href="#å°æŠ€å·§" class="headerlink" title="å°æŠ€å·§"></a>å°æŠ€å·§</h2><p>æœ‰ä¸ªå°æŠ€å·§å¯ä»¥æé«˜ v2ray çš„æ•ˆç‡ï¼Œæ‰“å¼€ mux æ¥å£ï¼Œè¿™ä¸ªåŠŸèƒ½ä¹Ÿæ˜¯ v2ray ç‹¬æœ‰çš„ã€‚</p><p><img src="/images/pasted-5.png" alt="upload successful"></p><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ul><li><a href="https://www.v2ray.com/" target="_blank" rel="noopener">v2ray å®˜ç½‘</a></li><li><a href="https://hub.docker.com/r/v2ray/official" target="_blank" rel="noopener">docker é•œåƒ</a></li><li><a href="https://github.com/yanue/V2rayU" target="_blank" rel="noopener">V2rayU</a></li></ul><!-- rebuild by neat -->]]></content>
      <categories>
        <category>å¼€å‘ç¬”è®°</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>v2ray</tag>
      </tags>
  </entry>
  <entry>
    <title>swoft å…¥é—¨</title>
    <url>/p/aa25.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¯¹æ¯”äº†å‡ ä¸ªåŸºäº swoole çš„æ¡†æ¶ï¼Œswoft åœ¨ github ä¸Šé¢ star æ•°é‡é¥é¥é¢†å…ˆçš„ï¼Œæ‰€ä»¥å‡†å¤‡åŸºäº swoft å¼€å§‹ä¸€ä¸ªå°é¡¹ç›®ã€‚</p><h2 id="swoftç›®å½•"><a href="#swoftç›®å½•" class="headerlink" title="swoftç›®å½•"></a>swoftç›®å½•</h2><p>å¯¹äºä¸€ä¸ª laravel è€ç©å®¶ï¼Œçœ‹è¿™ä¸ªç›®å½•è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œenv é…ç½®æ–‡ä»¶ä½¿ç”¨çš„æ—¶å€™ copy ä¸€éï¼Œä¸åŒçš„æ˜¯ä»–è¿™è¾¹é…ç½®æ˜¯åˆ†ä¸º envã€configã€bean ä¸‰éƒ¨åˆ†ï¼Œä¸»è¦å¼€å‘çš„ä»£ç åœ¨ app ä¸‹ï¼Œbin ä¸‹æ”¾äº†ä¸€äº›å¯æ‰§è¡Œæ–‡ä»¶ã€‚<br><img src="/images/pasted-2.png" alt="upload successful"></p><h2 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h2><p>æˆ‘æ˜¯å°†å®ƒä½œä¸ºä¸€ä¸ª http çš„æœåŠ¡ï¼Œæ‰€ä»¥æœ€é‡è¦çš„ç›®å½• app/Http/Controller ï¼Œæ¯ä¸€æ¡ http è¯·æ±‚å¯¹åº”ä¸€ä¸ª Controller ä¸­çš„æ–¹æ³•ã€‚æ‰€æœ‰ Controller éƒ½éœ€è¦ <strong>@Swoft\Http\Server\Annotation\Mapping\Controller</strong> æ³¨è§£ï¼ˆæ³¨é‡Šï¼‰ï¼Œ<code>åé¢æ‰€æœ‰æåˆ°çš„æ³¨é‡Šå’Œæ³¨è§£æ„ä¹‰ç›¸åŒï¼Œæ³¨è§£æ˜¯ java ä¸­çš„ç§°å‘¼ï¼Œæ˜¯ä¸€äº›æœ‰æ„ä¹‰çš„ä»£ç çº§åˆ«å«ä¹‰çš„æ ‡å¿—</code>ï¼Œæ–¹æ³•éƒ½éœ€è¦æ·»åŠ  <strong>@Swoft\Http\Server\Annotation\Mapping\RequestMapping</strong> æ³¨è§£</p><p><img src="/images/pasted-3.png" alt="upload successful"></p><h2 id="Request"><a href="#Request" class="headerlink" title="Request"></a>Request</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$request = Context::get()-&gt;getRequest();</span><br><span class="line">$key = $request-&gt;post(<span class="string">'key'</span>);</span><br><span class="line">$method = $request-&gt;getMethod();</span><br><span class="line">$headers = $request-&gt;getHeaders();</span><br><span class="line">$some = $request-&gt;query(<span class="string">'key'</span>, <span class="string">'default value'</span>)</span><br></pre></td></tr></table></figure><p>è¿™é‡Œ $request å¯ä»¥ç±»æ¯” laravel å¯¹è±¡ï¼Œ</p><h2 id="Response"><a href="#Response" class="headerlink" title="Response"></a>Response</h2><p>è¿™ç§å¤§è€Œå…¨çš„æ¡†æ¶å…¶å®éƒ½æ˜¯æœ‰å¾ˆå¤šæ–¹æ³•è·å–å¸¸è§çš„ request ä»¥åŠ response å¯¹è±¡çš„ã€‚</p><h3 id="å…¨å±€contextè·å–"><a href="#å…¨å±€contextè·å–" class="headerlink" title="å…¨å±€contextè·å–"></a>å…¨å±€contextè·å–</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$response=Context::mustGet()-&gt;getResponse()</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•æ³¨å…¥"><a href="#æ–¹æ³•æ³¨å…¥" class="headerlink" title="æ–¹æ³•æ³¨å…¥"></a>æ–¹æ³•æ³¨å…¥</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@RequestMapping</span>("index")</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> Response $response</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> Response</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> ReflectionException</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> ContainerException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span><span class="params">(Response $response)</span>: <span class="title">Response</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $response = $response-&gt;withContent(<span class="string">'&lt;html lang="en"&gt;&lt;h1&gt;Swoft framework&lt;/h1&gt;&lt;/html&gt;'</span>);</span><br><span class="line">    $response = $response-&gt;withContentType(ContentType::HTML);</span><br><span class="line">    <span class="keyword">return</span> $response;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ä½¿ç”¨äº† param æ³¨è§£ï¼Œå¹¶å£°æ˜ Response ç±»å‹ã€‚</p><h2 id="DB"><a href="#DB" class="headerlink" title="DB"></a>DB</h2><p>å’Œ laravel ä¸­ä¸€æ ·ä½¿ç”¨ Eloquent æ¨¡å‹æ“ä½œæ•°æ®ï¼Œä½†æ˜¯æˆ‘æ²¡æœ‰æ‰¾åˆ°æˆ‘æƒ³è¦çš„å…³è”æ¨¡å‹ç›¸å…³çš„æ–¹å¼ï¼Œä¾‹å¦‚ï¼š<code>belongsTo</code>ã€<code>morphTo</code> ç­‰ã€‚</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$user = User::query()</span><br><span class="line">         -&gt;where(<span class="string">'mobile'</span>, $mobile)</span><br><span class="line">         -&gt;first();</span><br></pre></td></tr></table></figure><h2 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h2><p>è¿™ç±»æ¡†æ¶çœŸçš„äº’ç›¸ä¸€å¤§æŠ„ï¼Œä½¿ç”¨çš„æ˜¯è‘—åçš„æ‰©å±• predisï¼Œæ¯«æ— æ‚¬å¿µã€‚</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$value = Redis::get(<span class="string">'some'</span>);</span><br></pre></td></tr></table></figure><h2 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h2><h3 id="ç›´æ¥è¿è¡Œ"><a href="#ç›´æ¥è¿è¡Œ" class="headerlink" title="ç›´æ¥è¿è¡Œ"></a>ç›´æ¥è¿è¡Œ</h3><p>å…¶å®åˆ°è¿™é‡Œæ‰æ˜¯æˆ‘æƒ³è¯´æœ‰ç‚¹å‘çš„åœ°æ–¹ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ php bin/swoft http:start</span><br></pre></td></tr></table></figure><p>å¥½ï¼ç¨ç­‰ç‰‡åˆ»ï¼Œé¡¹ç›®æ˜¯è·‘èµ·æ¥äº†ï¼Œä½†æ˜¯æˆ‘ä¿®æ”¹ä»£ç çš„æ—¶å€™å±…ç„¶ä¸æ›´æ–°ï¼Œéœ€è¦åˆ‡æ–­è¿›ç¨‹é‡æ–°è·‘ã€‚</p><h3 id="swoftcli"><a href="#swoftcli" class="headerlink" title="swoftcli"></a>swoftcli</h3><p>è¿™ä¹Ÿæ˜¯å®˜æ–¹æä¾›çš„ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥ watch æ–‡ä»¶çš„å˜åŒ–ï¼Œç„¶åå¯ä»¥è‡ªåŠ¨é‡å¯æœåŠ¡ï¼Œcli åœ¨è€ç‰ˆæœ¬æ˜¯å†…ç½®çš„ï¼Œæ–°ç‰ˆæœ¬çš„ swoft è¸¢é™¤äº†ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ php bin/swoftcli run -b bin/swoft /var/www/swoft</span><br></pre></td></tr></table></figure><p>ä¸å¾—ä¸è¯´çœŸé¦™ï¼Œä½†æ˜¯åœ¨ MacBook ä¸‹é¢ä¿®æ”¹ä»£ç åˆ°æœåŠ¡é‡å¯æˆåŠŸæ€»æ˜¯æ…¢åŠæ‹ï¼Œä½†æ˜¯è¯•äº†åœ¨ linux ä¸‹ç¡®å®å¯ä»¥åšåˆ°åŒæ­¥ã€‚</p><h2 id="å®¹å™¨åŒ–"><a href="#å®¹å™¨åŒ–" class="headerlink" title="å®¹å™¨åŒ–"></a>å®¹å™¨åŒ–</h2><p>ç»ˆäºè¦è®²åˆ°æˆ‘çš„å¤§æ€å™¨ï¼Œå®˜æ–¹ä¹Ÿæ˜¯æä¾› Dockerfile å’Œ docker-compose çš„ï¼Œæ”¹äº†ä¸€ä¸‹ command å°±å¯ä»¥æ­£å¸¸è¿è¡Œäº†ã€‚</p><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><p>-<a href="https://www.swoft.org/docs" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p><!-- rebuild by neat -->]]></content>
      <categories>
        <category>å¼€å‘ç¬”è®°</category>
      </categories>
      <tags>
        <tag>swoft</tag>
        <tag>swoole</tag>
      </tags>
  </entry>
  <entry>
    <title>mysqlçš„å·¦å…³è”</title>
    <url>/p/7d06.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>å¯èƒ½æ˜¯ laravel ä¸­çš„ eloquent æ¨¡å‹æŸ¥è¯¢ç”¨çš„å®åœ¨å¤ªçˆ½ï¼Œæ„Ÿè§‰è‡ªå·±éƒ½ä¸å¤ªä¼šå†™ sql è¯­å¥äº†ğŸ˜…ğŸ˜…ã€‚ç°åœ¨å›æƒ³è‡ªå·±çš„ sql æŠ€æœ¯çš„é¡¶å³°åº”è¯¥å°±æ˜¯å¤§å­¦çš„è¯¾å ‚äº†ï¼Œè€å¸ˆå¸¦ç€å¤§å®¶å»ºè¡¨ï¼Œå­¦ç”Ÿè¡¨ã€ç­çº§è¡¨ã€æˆç»©è¡¨æƒ³æƒ³è¿˜æœ‰ç‚¹è®°å¿†å°¤æ–°ï¼Œé‚£æ—¶å€™æ•°æ®åº“è¿æ¥éƒ½æ˜¯ç›´æ¥ç»ˆç«¯æ•²å‘½ä»¤çš„ï¼Œæœºæˆ¿çš„æ•°æ®åº“å¯†ç ç»Ÿä¸€æ˜¯ <code>wodexinmima</code>ï¼Œè½¬çœ¼å››å¹´æœ‰ä½™äº†ã€‚</p><p>ç°åœ¨çš„æ¡†æ¶ç¡®å®å°è£…ç¨‹åº¦å¤ªé«˜ï¼Œå¤§å¤§é™ä½äº†å„ç§æŠ€æœ¯çš„é—¨æ§›ï¼Œå¤§å¤§æé«˜äº†ä»£ç çš„ç»´æŠ¤æ€§ï¼Œå¦åˆ™ä¸€ä¸ªåå‡ ä¹ƒè‡³å‡ åè¡Œçš„ sql è¯­å¥ï¼Œè°èƒ½çœ‹å¾—æ‡‚ï¼Œä½†æ˜¯åˆä»åé¢æš´éœ²ä¸€ä»¶äº‹ï¼Œsql çš„åŸºç¡€æŸ¥è¯¢éƒ½å¿«ä¸¢äº†ï¼Œå“å¾—æˆ‘ç«‹é©¬æ¸©ä¹ äº†ä¸€é mysql æŸ¥è¯¢ã€‚</p><p>è¿›å…¥æ­£é¢˜ã€‚</p><p>æœ€è¿‘æœ‰è¿™ä¹ˆä¸€ä¸ªä¸šåŠ¡å‡ºç°äº† bugï¼Œç”¨æˆ·åœ¨è§‚çœ‹è§†é¢‘çš„æ—¶å€™ä¼šç”Ÿæˆä¸€æ¡è§‚çœ‹è®°å½•ï¼Œè§‚çœ‹è®°å½•çš„é¡ºåºå§‹ç»ˆæ˜¯æœ€è¿‘è§‚çœ‹çš„è§†é¢‘æ”¾åœ¨æœ€å‰é¢ï¼Œä½†æ˜¯å¦‚æœç”¨æˆ·çœ‹è¿‡è§†é¢‘ä¸¤æ¬¡ï¼Œç¬¬äºŒæ¬¡çœ‹çš„è®°å½•å¹¶æ²¡æœ‰æ˜¾ç¤ºåœ¨æœ€å‰é¢ï¼Œåè€Œè¿˜æ˜¯ä»¥ç¬¬ä¸€æ¬¡è§‚çœ‹çš„æ—¶é—´ä¸ºå‡†ã€‚</p><p>å…ˆçœ‹ä¸‰å¼ è¡¨ï¼š</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">users è¡¨</span><br><span class="line">id name</span><br><span class="line"></span><br><span class="line">videos è¡¨</span><br><span class="line">id name</span><br><span class="line"></span><br><span class="line">watch_records è¡¨</span><br><span class="line">id user_id video_id created_at</span><br></pre></td></tr></table></figure><p>å‡å¦‚ç°åœ¨æœ‰è¿™æ ·å‡ æ¡æ•°æ®</p><p>users è¡¨</p><table><thead><tr><th>id</th><th>name</th></tr></thead><tbody><tr><td>1</td><td>Jake</td></tr></tbody></table><p>videos è¡¨</p><table><thead><tr><th>id</th><th>name</th></tr></thead><tbody><tr><td>11</td><td>é¢è¯•æŠ€å·§</td></tr><tr><td>22</td><td>å¿«æ¶ˆè¡Œä¸šä»‹ç»</td></tr><tr><td>33</td><td>èŒåœºç¤¼ä»ª</td></tr></tbody></table><p>watch_records è¡¨</p><table><thead><tr><th>id</th><th>user_id</th><th>video_id</th><th>created_at</th></tr></thead><tbody><tr><td>111</td><td>1</td><td>11</td><td>2019-07-01 05:31:59</td></tr><tr><td>222</td><td>1</td><td>22</td><td>2019-07-02 05:31:59</td></tr><tr><td>333</td><td>1</td><td>33</td><td>2019-07-03 05:31:59</td></tr><tr><td>444</td><td>1</td><td>11</td><td>2019-07-04 05:31:59</td></tr></tbody></table><p>ç°åœ¨è¦æ±‚æŸ¥å‡ºçš„ watch_records æ•°æ®åº”è¯¥æ˜¯ 444 &gt; 333 &gt; 222 ï¼Œid 11 çš„è§†é¢‘å› ä¸ºæœ€è¿‘å†æ¬¡è§‚çœ‹å– 444 è¿™æ¡è®°å½•è€Œé 111 è¿™ä¸€æ¡ã€‚ä¹‹å‰çš„ bug æ˜¯å› ä¸ºæˆ‘ç›´æ¥ <code>groupBy(&#39;video_id&#39;)</code> ï¼Œä»è€Œå¾—åˆ°çš„ç»“æœä¸º 333 &gt; 222 &gt; 111ã€‚è¿™ä¸ªé—®é¢˜æˆ‘ç ”ç©¶äº†å¾ˆé•¿æ—¶é—´åœ¨æˆ‘è¯·æ•™äº†ä¸€ä½æœ‹å‹ä¹‹åä»–è¯´å¯ä»¥å°è¯•ã€Œåˆ†ç»„æ’åºå–å‰nã€ï¼Œè¿™ä¸ªå…³é”®å­—ç¡®å®å¾—åˆ°äº†å¾ˆå¤šç­”æ¡ˆï¼Œæˆ‘è¯•äº†å‡ ä¸ªæŸ¥è¯¢æ²¡æœ‰å¾—åˆ°åˆç†ç­”æ¡ˆï¼Œä»–ç›´æ¥ç»™äº†æˆ‘ä¸€æ®µ sql ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> m1.*</span><br><span class="line"><span class="keyword">FROM</span> watch_records  m1 <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> watch_records  m2</span><br><span class="line"><span class="keyword">ON</span> (m1.user_id = m2.user_id <span class="keyword">and</span> m1.video_id=m2.video_id <span class="keyword">AND</span> m1.created_at &lt; m2.created_at) <span class="keyword">WHERE</span> m2.id <span class="keyword">is</span> <span class="literal">NULL</span> <span class="keyword">and</span> m1.user_id=<span class="number">1</span> <span class="keyword">order</span> <span class="keyword">by</span> create_at <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure><p>æ²¡æœ‰æƒ³åˆ°ç¡®å®å°±æŸ¥å‡ºäº†ç»“æœã€‚</p><p>è¿™æ®µ sql çš„ç‚¹ç›ä¹‹ç¬”åœ¨äº <code>m2.id is NULL</code> ï¼Œä¸¤å¼ è¡¨å·¦å…³è”ï¼Œå³è¾¹è¡¨çš„åˆ›å»ºæ—¶é—´æ¯”å·¦è¾¹çš„å¤§ï¼Œåªæœ‰å·¦è¾¹æ˜¯æœ€å¤§çš„æ—¶å€™ï¼Œå³è¾¹æ‰ä¼šæ²¡æœ‰å¯¹åº”çš„è®°å½•ï¼Œé‚£ä¹Ÿå°±æ˜¯ <code>m2.id is NULL</code> ï¼Œå·§å¦™åˆ©ç”¨äº†å·¦å…³è”ï¼Œå°±åšåˆ°äº† ã€Œåˆ†ç»„æ’åºå–å‰1ã€ã€‚</p><!-- rebuild by neat -->]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>left join</tag>
      </tags>
  </entry>
  <entry>
    <title>Laravelä¸­å®ç°å¾®ä¿¡å…¬ä¼—å·ç™»å½•</title>
    <url>/p/6ae1.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>ä¸€èˆ¬å…¬å¸éƒ½ä¼šä½¿ç”¨å¾®ä¿¡æ‰«ç ç™»å½•ï¼Œé€šè¿‡ PC ç«¯æ‰“å¼€</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">https:<span class="comment">//open.weixin.qq.com/connect/qrconnect?appid=APPID&amp;redirect_uri=REDIRECT_URI&amp;response_type=code&amp;scope=SCOPE&amp;state=STATE#wechat_redirect</span></span><br></pre></td></tr></table></figure><p>ç„¶åç”¨æˆ·æ‰«æç½‘é¡µä¸Šçš„äºŒç»´ç ï¼Œæ‰‹æœºç«¯ç¡®è®¤ï¼Œå³å¯åœ¨ç½‘é¡µä¸Šç™»å½•ã€‚</p><p>ä½†æ˜¯è¿™æ ·çš„ç™»å½•æ–¹å¼è¶Šæ¥è¶Šä¸é€‚ç”¨äºè¿™ä¸ªæµé‡æ—¶ä»£ï¼Œéƒ½å¸Œæœ›å¯ä»¥é€šè¿‡å…³æ³¨å…¬ä¼—å·ç™»å½•ï¼Œè¿™æ ·ä¸ä»…å¯ä»¥ç»™å…¬ä¼—å·å¼•æµï¼Œè¿˜å¯ä»¥é€šè¿‡å…¬ä¼—å·æ¨æ–‡æˆ–è€…æ¨¡æ¿æ¶ˆæ¯ç­‰å…¶ä»–è¯±å¯¼æ–¹å¼ï¼Œå†æ¬¡å¸å¼•ç”¨æˆ·é‡æ–°æ‰“å¼€ç½‘é¡µã€‚</p><p>so â€¦</p><p>æ‰¾åˆ°äº†<a href="https://www.kanzhun.com/login/?ka=head-signin" target="_blank" rel="noopener">çœ‹å‡†ç½‘</a>å°±å®ç°äº†å…³æ³¨æœåŠ¡å·è‡ªåŠ¨ç™»å½•ï¼Œæˆ‘å¾ˆå¥½å¥‡çš„å»çœ‹äº†ä¸€ä¸‹ä»–ä»¬çš„ç½‘ç»œè¯·æ±‚ã€‚</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">curl &#39;https:&#x2F;&#x2F;www.kanzhun.com&#x2F;scan?wxScanId&#x3D;2Lhy8vtcRg~~&amp;_&#x3D;1561996681530&#39;</span><br></pre></td></tr></table></figure><p>åˆ é™¤äº†å…¶ä»–å‚æ•°ï¼Œåªç•™ä¸‹æ ¸å¿ƒçš„ä¸¤ä¸ªå‚æ•°ï¼Œ<code>wxScanId</code> æ˜¯åç«¯éšæœºè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œ<code>_</code> è²Œä¼¼æ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œæš‚æ—¶ä¸æ·±ç©¶ï¼Œè¿™ä¸ªæ¥å£ä¹Ÿå¾ˆå¥‡æ€ªï¼Œæ¯æ¬¡éƒ½è¦ pending 30s å·¦å³ï¼Œæˆ‘åœ¨æ€è€ƒè¿™æ˜¯ ã€Œé•¿è¿æ¥ã€ï¼Ÿgoogle äº†ä¸€ç•ªï¼ŒåŸæ¥è¿™é‡Œæ˜¯ä¸€ä¸ªä¸“æœ‰åè¯ ã€Œé•¿è½®è¯¢ã€ã€‚</p><p><strong>é•¿è½®è¯¢</strong>å¿…ç„¶ä¼šå¯¹åº”<strong>çŸ­è½®è¯¢</strong>,æ­£å¸¸çš„ http è¯·æ±‚ï¼Œä¸€ä¸ª request åˆ°åç«¯æœåŠ¡å™¨ï¼Œè¿™æ—¶å€™åšç›¸åº”çš„ä¸€ä¸ªæ•°æ®å¤„ç†ç„¶åå°±ç«‹å³è¿”å›äº†ï¼Œå¯¹äºåˆšæ‰æ‰«ç ç™»å½•è¿™ä¸ªä¸šåŠ¡æ‰€ä»¥<strong>çŸ­è½®è¯¢</strong>ä¼šä¸€éä¸€éå»æŸ¥è¯¢æœåŠ¡å™¨ï¼Œå½“å‰è¿™ä¸ª code æ˜¯å¦å·²ç»æ‰«ç ã€‚ä½†æ˜¯<strong>é•¿è½®è¯¢</strong>ä¼šå°† request å‘åˆ°æœåŠ¡ç«¯ï¼Œè¿™æ—¶å€™æœåŠ¡ç«¯ä¼š hold è¿™ä¸ªè¯·æ±‚ï¼Œé€šè¿‡åç«¯å»æŸ¥è¯¢ï¼Œæ²¡æŸ¥åˆ°ç»§ç»­å»æŸ¥ï¼ŒæŸ¥åˆ°å¯ç«‹å³è¿”å›åˆ°å®¢æˆ·ç«¯ï¼Œå¤§å¤§é™ä½äº†å®¢æˆ·ç«¯çš„å“åº”æ—¶é—´ã€‚</p><p>å¤§è‡´çš„æµç¨‹ï¼š</p><ol><li>æœåŠ¡ç«¯ç”Ÿæˆä¸€ä¸ªéšæœºæ•° A</li><li>é€šè¿‡å¾®ä¿¡å…¬ä¼—å¹³å°ç”Ÿæˆå¸¦ A å‚æ•°çš„äºŒç»´ç </li><li>å°† A å­˜å…¥åˆ° redis ä¸­ï¼Œkey ä¸º A ï¼Œvalue ä¸º false</li><li>å°† A å’Œ äºŒç»´ç  url è¿”å›åˆ°å‰ç«¯</li><li>å®¢æˆ·ç«¯é€šè¿‡é•¿è½®è¯¢ä¸æ–­æŸ¥è¯¢</li><li>ç”¨æˆ·æ‰«æäºŒç»´ç å¯è·å–åˆ° éšæœºæ•°å¯¹åº”çš„ openid</li><li>å°† openid å­˜å…¥åˆ°redis ä¸­ï¼Œkey ä¸º A ï¼Œvalue ä¸º openid</li><li>å®¢æˆ·ç«¯æŸ¥è¯¢åˆ°ç»“æœé€šè¿‡ openId ç™»å½•</li></ol><p>show me the code ã€‚ã€‚ã€‚</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> $ttl = <span class="number">30</span>; <span class="comment">// 30ç§’ æ¯ç§’æŸ¥è¯¢ä¸€æ¬¡</span></span><br><span class="line"> <span class="keyword">while</span> ($ttl--) &#123;</span><br><span class="line">     $openId = Cache::get(WeixinService::LOGIN_KEY_PREFIX . $request-&gt;code);</span><br><span class="line">      <span class="keyword">if</span> ($openId === <span class="keyword">false</span>) &#123;</span><br><span class="line">        <span class="comment">// è¿˜æœªæ‰«ç  ç»§ç»­æŸ¥è¯¢</span></span><br><span class="line">      &#125; <span class="keyword">elseif</span> ($openId) &#123;</span><br><span class="line">         <span class="comment">// å·²ç»æ‰«ç ï¼Œæ‹¿åˆ° openId</span></span><br><span class="line">         <span class="keyword">return</span> $openId;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         <span class="comment">// ç å·²ç»è¿‡æœŸï¼Œæˆ–è€…æ— æ•ˆç </span></span><br><span class="line">        <span class="keyword">$this</span>-&gt;response-&gt;errorBadRequest(<span class="string">'äºŒç»´ç å·²ç»è¿‡æœŸï¼Œæˆ–è€…æ— æ•ˆ'</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    sleep(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ¥å£çš„ç›®çš„å°±æ˜¯å®ç°äº†ä¸Šé¢çš„é€»è¾‘ï¼Œå› ä¸ºæˆ‘å°†æ•°æ®æ”¾åˆ° redis ä¸­ï¼Œè¿™æ ·æœåŠ¡ç«¯å¯ä»¥æ¯éš” 1s æŸ¥è¯¢ä¸€æ¬¡ï¼Œå¦‚æœç”¨æˆ·å·²ç»æ‰«ç ï¼Œåˆ™å¾®ä¿¡æœåŠ¡å™¨ä¼šå°†äº‹ä»¶æ¨é€åˆ°æˆ‘ä»¬è‡ªå·±çš„æœåŠ¡å™¨ï¼Œè¿™æ—¶å€™æ‹¿åˆ° openidï¼Œé…ç½®åˆ° redis ä¸­ï¼Œä»è€Œé•¿è½®è¯¢å–åˆ° openid ï¼Œåé¢çš„å°±æ˜¯ç®€å•çš„ç™»å½•æµç¨‹ï¼Œç›´æ¥çœç•¥äº†ã€‚</p><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ul><li><a href="https://mp.weixin.qq.com/wiki?action=doc&id=mp1443433542&t=0.2205841058645851" target="_blank" rel="noopener">ç”Ÿæˆå¸¦å‚æ•°çš„äºŒç»´ç </a></li></ul><!-- rebuild by neat -->]]></content>
      <categories>
        <category>laravel</category>
      </categories>
      <tags>
        <tag>é•¿è½®è¯¢</tag>
        <tag>å¾®ä¿¡å…¬ä¼—å·ç™»å½•</tag>
      </tags>
  </entry>
  <entry>
    <title>Laravelä¸­è·å–çœŸå®ip</title>
    <url>/p/705c.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><h2 id="èµ·å› "><a href="#èµ·å› " class="headerlink" title="èµ·å› "></a>èµ·å› </h2><p>æœ€è¿‘åœ¨å¼€å‘å¾®ä¿¡æ”¯ä»˜ï¼Œå¾®ä¿¡æ‰«ç ä»˜ä»¥åŠå¾®ä¿¡å…¬ä¼—å·æ”¯ä»˜å¯¹æ¥éƒ½æ˜¯æ¯”è¾ƒé¡ºåˆ©ï¼Œå› ä¸º laravel ä¸­ <a href="https://github.com/yansongda/pay" target="_blank" rel="noopener">laravel-pay</a> ç”¨èµ·æ¥å®åœ¨å¤ªçˆ½ï¼Œä½†æ˜¯åœ¨å¯¹æ¥å¾®ä¿¡çš„ H5 æ”¯ä»˜æ—¶å´æ€ä¹ˆä¹Ÿè¿‡ä¸äº†ï¼Œä¸€ç›´æç¤ºã€Œç½‘ç»œç¯å¢ƒæœªèƒ½é€šè¿‡å®‰å…¨éªŒè¯ï¼Œè¯·ç¨åå†è¯•ã€ã€‚</p><h2 id="è°ƒæŸ¥"><a href="#è°ƒæŸ¥" class="headerlink" title="è°ƒæŸ¥"></a>è°ƒæŸ¥</h2><p>æœç´ å‘ç°<a href="https://pay.weixin.qq.com/wiki/doc/api/H5.php?chapter=15_4" target="_blank" rel="noopener">æ”¯ä»˜å¸¸è§é—®é¢˜</a>ä¸­æåˆ°äº†è¿™ä¸ªé”™è¯¯ï¼Œå…¶å®ç®€å•ç‚¹å°±æ˜¯ä¸‹å• ip å’Œæ”¯ä»˜ ip ä¸æ˜¯åŒä¸€ä¸ªå¯¼è‡´çš„ï¼Œåªæ˜¯å¾®ä¿¡æ”¯ä»˜åªæ˜¯åœ¨ H5 æ”¯ä»˜ç¯èŠ‚å¯¹ spbill_create_ip å‚æ•°è¿›è¡Œäº†æ ¡éªŒï¼Œè€Œæºç ä¸­ spbill_create_ip æ˜¯é€šè¿‡å¦‚ä¸‹ä»£ç è·å¾—ï¼š</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">$this</span>-&gt;payload = [</span><br><span class="line">         <span class="string">'appid'</span>            =&gt; $config-&gt;get(<span class="string">'app_id'</span>, <span class="string">''</span>),</span><br><span class="line">         <span class="string">'mch_id'</span>           =&gt; $config-&gt;get(<span class="string">'mch_id'</span>, <span class="string">''</span>),</span><br><span class="line">         <span class="string">'nonce_str'</span>        =&gt; Str::random(),</span><br><span class="line">         <span class="string">'notify_url'</span>       =&gt; $config-&gt;get(<span class="string">'notify_url'</span>, <span class="string">''</span>),</span><br><span class="line">         <span class="string">'sign'</span>             =&gt; <span class="string">''</span>,</span><br><span class="line">         <span class="string">'trade_type'</span>       =&gt; <span class="string">''</span>,</span><br><span class="line">         <span class="string">'spbill_create_ip'</span> =&gt; Request::createFromGlobals()-&gt;getClientIp(), <span class="comment">// é‡ç‚¹ï¼ï¼ï¼</span></span><br><span class="line">     ];</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ˜¯ Request æ˜¯æ¥è‡ª <code>Symfony\Component\HttpFoundation\Request</code> ï¼ŒcreateFromGlobals æ–¹æ³•æ°å·§æ˜¯é€šè¿‡ php ä¸­å…¨å±€çš„ <code>$_GET</code>, <code>$_POST</code>,<code>$_COOKIE</code>, <code>$_FILES</code>, <code>$_SERVER</code> å˜é‡æ„é€ çš„ï¼Œè€Œ <code>$_SERVER</code> ä¸­åŒ…å«äº†å¤§é‡çš„ç”± php-fpm æ³¨å…¥çš„å‚æ•°ã€‚</p><blockquote><p>é¡ºä¾¿æä¸€ä¸‹ï¼Œlaravel ä¸­çš„ request ä¹Ÿæ˜¯ç»§æ‰¿è¿™ä¸ª <code>Symfony\Component\HttpFoundation\Request</code> ç±»</p></blockquote><h2 id="å‘ç°é—®é¢˜"><a href="#å‘ç°é—®é¢˜" class="headerlink" title="å‘ç°é—®é¢˜"></a>å‘ç°é—®é¢˜</h2><p>ä½†æ˜¯é€šè¿‡è¿™ä¸ªæ–¹æ³•æ— è®ºå¦‚ä½•ä¹Ÿæ‹¿ä¸åˆ°çœŸå®çš„ç”¨æˆ· ipï¼Œç”±äºåå°çš„æœåŠ¡æ˜¯ç”± docker éƒ¨ç½²ï¼Œapi æœåŠ¡æ˜¯é€šè¿‡å¤šä¸ª proxy ä»£ç†åˆ°æœ€ç»ˆçš„ laravel ä¸Šï¼Œæ‰€ä»¥åœ¨ laravel ä¸Šå§‹ç»ˆè·å¾—çš„ ip éƒ½æ˜¯å…¶ä¸­æŸä¸ªä»£ç†çš„ ipã€‚</p><p>ç¿»é˜…æ–‡æ¡£ï¼Œlaravel ä¸­æœ‰ä¸ª <code>TrustProxies</code> ä¸­é—´ä»¶æ˜¯ä¸“é—¨å¤„ç† ip çš„é—®é¢˜ï¼Œé»˜è®¤æ˜¯æ²¡æœ‰ä»£ç†æ˜¯ç›´æ¥è¯»å– <code>REMOTE_ADDR</code> çš„å¤´ï¼Œå¦‚æœæœ‰ä»£ç†çš„æƒ…å†µå¯ä»¥å¡«å……ä»£ç†çš„ ipï¼Œä½†æ˜¯å¦‚æœä¸çŸ¥é“ä¸­é—´ä»£ç†çš„ ip æ—¶ï¼Œå¯ä»¥ä½œå¦‚ä¸‹ä¿®æ”¹ï¼š</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protected</span> $proxies = <span class="string">'*'</span>;</span><br></pre></td></tr></table></figure><h2 id="æ·±å…¥é—®é¢˜"><a href="#æ·±å…¥é—®é¢˜" class="headerlink" title="æ·±å…¥é—®é¢˜"></a>æ·±å…¥é—®é¢˜</h2><p>å¯æ˜¯é—®é¢˜è¿˜æ˜¯æ²¡æœ‰å¾—åˆ°è§£å†³ï¼ŒğŸ¤£ğŸ¤£ğŸ¤£<br>å‘ç°æºç ä¸­ getClientIp æ–¹æ³•æ˜¯å–å¾— getClientIps çš„ç¬¬ 0 ä¸ª ip åœ°å€ï¼Œé‚£ä¹ˆ getClientIps æ–¹æ³•æ˜¯å¯ä»¥è·å–æ‰€æœ‰çš„ ip åœ°å€ï¼Œè¯¥æ–¹æ³•æ˜¯ä» <code>HTTP_X_FORWARDED_FOR</code> ä¸­æ‹¿åˆ°æ‰€æœ‰ä»£ç†çš„ ip ï¼Œ<code>HTTP_X_FORWARDED_FOR</code> å‚æ•°æ˜¯ç”± nginx è½¬å‘æ—¶é€šè¿‡ <code>proxy_set_header</code> æ·»åŠ ä¸Šå»ï¼Œ nginx çš„åŸåˆ™æ˜¯æ¯æ¬¡åœ¨å°¾éƒ¨è¿½åŠ ä»£ç†çš„ipï¼š</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">HTTP_X_FORWARDED_FOR:çœŸå®ip,proxy1,proxy2</span><br></pre></td></tr></table></figure><p><strong>BUT</strong> getClientIps è¿”å›çš„ ip åœ°å€æ•°ç»„å´å˜æˆäº†ï¼š</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">[proxy2,proxy1,çœŸå®ip]</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ getClientIp æ¯æ¬¡è·å–ç¬¬ 0 ä¸ªå‚æ•°å…¶å®æ˜¯æœ€åä¸€ä¸ªä»£ç†çš„ ipã€‚</p><h2 id="ä¼ªè§£å†³é—®é¢˜"><a href="#ä¼ªè§£å†³é—®é¢˜" class="headerlink" title="ä¼ªè§£å†³é—®é¢˜"></a>ä¼ªè§£å†³é—®é¢˜</h2><p>æˆ‘åœ¨phpçš„å…¥å£å‡½æ•° index.php çš„é¡¶éƒ¨åŠ å…¥äº†å¦‚ä¸‹ä¸€æ®µï¼š</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥‡æ€ªå¾ˆå¥‡æ€ªçš„é—®é¢˜ï¼Œå¯èƒ½æ˜¯ laravel5.7  çš„bugï¼Œä¹Ÿå¯èƒ½æ˜¯ TrustProxies çš„ bug ï¼Œè·å–åˆ°çš„IPé¡ºåºæ˜¯åçš„</span></span><br><span class="line"><span class="keyword">if</span> ($_SERVER[<span class="string">'HTTP_X_FORWARDED_FOR'</span>]) &#123;</span><br><span class="line">    $_SERVER[<span class="string">'HTTP_X_FORWARDED_FOR'</span>] = implode(<span class="string">','</span>, array_reverse(explode(<span class="string">','</span>, $_SERVER[<span class="string">'HTTP_X_FORWARDED_FOR'</span>])));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ç¨‹åºæ‰§è¡Œåˆ°è¿™é‡Œçš„æ—¶å€™æˆ‘å°† <code>HTTP_X_FORWARDED_FOR</code> ä¸­çš„ ip è¿›è¡Œå€’åºï¼ŒgetClientIp æ‹¿åˆ°çš„ç¬¬ 0 ä¸ª ip å³ä¸ºçœŸå® ip ã€‚</p><blockquote><p>è™½ç„¶æ²¡æœ‰å®Œç¾è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†åœ¨ä½¿ç”¨ä¸­ä¹Ÿæ²¡æœ‰å‘ç°å…¶ä»– bug ï¼Œå¦‚æœä½ æœ‰æ›´å¤šå‘ç°ï¼Œæ¬¢è¿è”ç³»æˆ‘ï¼š<code>jake.zou.me@gmail.com</code></p></blockquote><!-- rebuild by neat -->]]></content>
      <categories>
        <category>laravel</category>
      </categories>
      <tags>
        <tag>pay</tag>
        <tag>ip</tag>
      </tags>
  </entry>
  <entry>
    <title>Laravelå¼€å‘ç¢°åˆ°çš„å‘</title>
    <url>/p/81b0.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><h2 id="è·å–-Redis-å¯¹è±¡"><a href="#è·å–-Redis-å¯¹è±¡" class="headerlink" title="è·å– Redis å¯¹è±¡"></a>è·å– Redis å¯¹è±¡</h2><p>æœ€å¼€å§‹æ˜¯è¿™ä¹ˆè„‘æ®‹çš„å†™</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$redis = cache()-&gt;getRedis();</span><br><span class="line">$redis-&gt;hSet($hash, $field, $now);</span><br></pre></td></tr></table></figure><p>ç„¶åå‘ç°å¯ä»¥è¿™ä¹ˆå†™</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Redis::hSet($hash, $field, $now);</span><br></pre></td></tr></table></figure><p>ç„¶åä¼šå‘ç°å¦‚æœå¯¼é”™åŒ…çš„è¯ä¼šæŠ›ä¸€ä¸ªå¼‚å¸¸ <strong>Redis æ²¡æœ‰é™æ€æ–¹æ³•hSet</strong></p><p>å…¶å®åªéœ€è¦å°†åŒ… <code>\Redis</code> ä¿®æ”¹ä¸º <code>use Illuminate\Support\Facades\Redis;</code> å³å¯</p><h2 id="Eloquent-Builder-ä¸­çš„-find-æ–¹æ³•"><a href="#Eloquent-Builder-ä¸­çš„-find-æ–¹æ³•" class="headerlink" title="Eloquent Builder ä¸­çš„ find æ–¹æ³•"></a>Eloquent Builder ä¸­çš„ find æ–¹æ³•</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">User:find(<span class="number">1</span>)-&gt;where(<span class="string">'status'</span>,<span class="number">1</span>)-&gt;first()</span><br></pre></td></tr></table></figure><p>å‘ç° findæ–¹æ³•ä¸ç”Ÿæ•ˆ</p><p>æŸ¥é˜…æºç ä¹‹åæ‰å‘ç° find è¿”å›ä¸€ä¸ª Eloquent å®ä¾‹æˆ–è€… Eloquent å®ä¾‹æ•°ç»„ï¼Œæ‰€ä»¥å…¶åçš„æŸ¥è¯¢æ¡ä»¶éƒ½ä¸ä¼šå’Œå‰é¢çš„æŸ¥è¯¢å‘ç”Ÿè”ç³»ï¼ŒEloquent èƒ½å¤Ÿç”¨é“¾å¼æŸ¥è¯¢çš„é­…åŠ›åœ¨äºæ¯ä¸ªå‡½æ•°éƒ½æ˜¯è¿”å›çš„ $this ä¹Ÿå°±æ˜¯ Builder å¯¹è±¡ã€‚</p><!-- rebuild by neat -->]]></content>
  </entry>
  <entry>
    <title>Access-Control-Allow-Credentials</title>
    <url>/p/5f34.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>å‰åç«¯åˆ†ç¦»çš„é¡¹ç›®ä¸­è‚¯å®šä¼šç¢°åˆ°è·¨åŸŸçš„é—®é¢˜ï¼Œç©¶å…¶åŸå› è¿˜æ˜¯ä¸ºäº†å®‰å…¨ã€‚æˆ‘åœ¨ä¸€ä¸ªå‰ç«¯å·¥ç¨‹è°ƒè¯•è¿‡ç¨‹ä¸­å‘ç°ï¼Œå³ä½¿æˆ‘åç«¯å·²ç»å…è®¸äº†è·¨åŸŸï¼Œä½†æ˜¯å‰ç«¯ä¾ç„¶æŠ¥ä¸€ä¸ªè·¨åŸŸé”™è¯¯ã€‚</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Access to XMLHttpRequest at &#39;http:&#x2F;&#x2F;localhost&#x2F;api&#x2F;admin&#x2F;authorizations&#39; from origin &#39;http:&#x2F;&#x2F;localhost:9528&#39; has been blocked by CORS policy: Response to preflight request doesn&#39;t pass access control check: The value of the &#39;Access-Control-Allow-Credentials&#39; header in the response is &#39;&#39; which must be &#39;true&#39; when the request&#39;s credentials mode is &#39;include&#39;. The credentials mode of requests initiated by the XMLHttpRequest is controlled by the withCredentials attribute.</span><br></pre></td></tr></table></figure><p>å°è¯•äº†å¾ˆå¤šç½‘ä¸Šçš„æ–¹æ³•ä¹Ÿéƒ½æ²¡æœ‰å¼„æ¸…åŸå› åœ¨å“ªé‡Œã€‚ç´¢æ€§å°±ä»”ç»†ç ”ç©¶ä¸€ä¸‹ <code>Access-Control-Allow-Credentials</code> è¿™ä¸ªå¤´çš„ä½œç”¨ï¼Œæœç„¶è¯åˆ°ç—…é™¤ã€‚è¿™ä¸ªæ˜¯æœåŠ¡ç«¯ä¸‹å‘åˆ°å®¢æˆ·ç«¯çš„ response ä¸­å¤´éƒ¨å­—æ®µï¼Œæ„ä¹‰æ˜¯å…è®¸å®¢æˆ·ç«¯æºå¸¦éªŒè¯ä¿¡æ¯ï¼Œä¾‹å¦‚ cookie ä¹‹ç±»çš„ã€‚è¿™æ ·å®¢æˆ·ç«¯åœ¨å‘èµ·è·¨åŸŸè¯·æ±‚çš„æ—¶å€™ï¼Œä¸å°±å¯ä»¥æºå¸¦å…è®¸çš„å¤´ï¼Œè¿˜å¯ä»¥æºå¸¦éªŒè¯ä¿¡æ¯çš„å¤´ï¼Œåˆç”±äºå®¢æˆ·ç«¯æ˜¯è¯·æ±‚æ¡†æ¶æ˜¯ axiosï¼Œå¹¶ä¸”æ‰‹æ®‹çš„è®¾ç½®äº† <code>withCredentials: true</code>ï¼Œæ„æ€æ˜¯å®¢æˆ·ç«¯æƒ³è¦æºå¸¦éªŒè¯ä¿¡æ¯å¤´ï¼Œä½†æ˜¯æˆ‘çš„æœåŠ¡ç«¯è®¾ç½®æ˜¯ <code>&#39;supportsCredentials&#39; =&gt; false,</code> ï¼Œè¡¨ç¤ºä¸å…è®¸æºå¸¦ä¿¡æ¯å¤´ï¼Œå¥½äº†ï¼Œé”™è¯¯æ‰¾åˆ°äº†ã€‚</p><p>æˆ‘ä»¬çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯äº¤äº’çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯ tokenï¼Œé€šè¿‡ Authorizationå¤´å‘é€åˆ°æœåŠ¡ç«¯ï¼Œå¹¶æ²¡æœ‰ä½¿ç”¨åˆ° cookieï¼Œæ‰€ä»¥å®¢æˆ·ç«¯æ²¡æœ‰å¿…è¦è®¾ç½® <code>withCredentials: true</code>ï¼Œä¸€é¡¿æ“ä½œçŒ›å¦‚è™ğŸ¤£ğŸ¤£ã€‚</p><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS" target="_blank" rel="noopener">mozillaçš„HTTPè®¿é—®æ§åˆ¶</a></li><li><a href="https://harttle.land/2016/12/28/cors-with-cookie.html" target="_blank" rel="noopener">ä»‹ç»äº†è·¨åŸŸä¸­å…¶ä»–çš„å¤´ä¿¡æ¯</a></li></ul><!-- rebuild by neat -->]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>axios</tag>
        <tag>è·¨åŸŸ</tag>
      </tags>
  </entry>
  <entry>
    <title>git æ‰¹é‡åˆ é™¤åˆ†æ”¯</title>
    <url>/p/c93.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ git branch | grep &quot;fix-bug-*&quot; | xargs git branch -d</span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
      <categories>
        <category>git</category>
      </categories>
  </entry>
  <entry>
    <title>jenkinsè®¾ç½®æ—¶åŒºä¸ºåŒ—äº¬æ—¶é—´</title>
    <url>/p/65f0.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><ul><li>æ–¹æ¡ˆä¸€</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">åœ¨ã€ç³»ç»Ÿç®¡ç†ã€‘-ã€è„šæœ¬å‘½ä»¤è¡Œã€‘é‡Œè¿è¡Œ</span><br><span class="line">System.setProperty(&#39;org.apache.commons.jelly.tags.fmt.timeZone&#39;, &#39;Asia&#x2F;Shanghai&#39;)</span><br></pre></td></tr></table></figure><p>æ¯”è¾ƒé«˜åˆ†çš„å›ç­”ï¼Œä½†æ˜¯æ–¹æ¡ˆä¸€æ˜¯æ— æ•ˆçš„</p><ul><li>æ–¹æ¡ˆäºŒ</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ docker run ... -e JAVA_OPTS&#x3D;-Duser.timezone&#x3D;Asia&#x2F;Shanghai</span><br></pre></td></tr></table></figure><p>æ²¡æœ‰æµ‹è¯•ï¼Œåªè¦æˆ‘çš„å®¹å™¨å·²ç»runèµ·æ¥äº†ï¼Œä¸æƒ³é‡æ–°è·‘ä¸€ä¸ªã€‚</p><ul><li>æ–¹æ¡ˆä¸‰</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ docker exec -it --user&#x3D;root laradock_jenkins_1 bash</span><br><span class="line">$ echo &quot;Asia&#x2F;Shanghai&quot; &gt; &#x2F;etc&#x2F;timezone</span><br></pre></td></tr></table></figure><p>æ–¹æ¡ˆä¸‰ æˆ‘è‡ªå·±æƒ³çš„ï¼Œç›´æ¥æ”¹ linux æ—¶åŒºï¼Œç„¶åé‡å¯å³å¯ã€‚</p><!-- rebuild by neat -->]]></content>
      <categories>
        <category>å¼€å‘ç¬”è®°</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>jenkins</tag>
      </tags>
  </entry>
  <entry>
    <title>jenkins-docker ç¬¬ä¸€æ­¥</title>
    <url>/p/f123.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>jenkins ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æŒç»­é›†æˆï¼Œè‡ªåŠ¨åŒ–éƒ¨ç½²çš„è§£å†³æ–¹æ¡ˆï¼Œä½†æ˜¯éƒ¨ç½²èµ·æ¥å¼‚å¸¸éº»çƒ¦ï¼Œä½†æ˜¯åœ¨è¿™ä¸ªæ—¶ä»£å¹¸å¥½æˆ‘ä»¬æœ‰ dockerã€‚<br>è¿™ç¯‡æ–‡ç« ä¸å‡†å¤‡ä»‹ç»å¦‚ä½•å®‰è£… dockerï¼Œå¦‚ä½•æ‹‰ä¸€ä¸ª jenkins é•œåƒç„¶å run èµ·æ¥ï¼Œç½‘ä¸Šçš„æ–‡ç« å®åœ¨å¤ªå¤šã€‚</p><p>èŠä¸€èŠæˆ‘æ‰€ç†è§£çš„æ›´æ·±å±‚çš„ä¸œè¥¿ï¼Œå› ä¸ºæ˜¯ docker é‡Œé¢èµ·çš„ jenkinsï¼Œé‚£ä¹ˆ jenkins æ“ä½œçš„ shell æ‰§è¡Œå‘½ä»¤çš„æ—¶å€™ï¼Œæ˜¯æ— æ³•è®¿é—®åˆ°å¤–ç•Œçš„æ–‡ä»¶çš„ï¼Œé™¤éä½ æŒ‚è½½ä¸€ä¸ªå·ï¼Œä½†æ˜¯æŒ‚è½½çš„å·ï¼Œè¿˜å¿…é¡»æˆäºˆ linux ä¸‹ä¸º jenkins user çš„è®¿é—®æƒé™ã€‚</p><p>ä¸Šé¢çš„é—®é¢˜éƒ½è¿˜æ˜¯å¯ä»¥è§£å†³çš„ï¼Œä½†æ˜¯ç°åœ¨æˆ‘çš„ php ä»£ç åŒæ ·æ˜¯è¿è¡Œåœ¨ docker ä¸­ï¼Œé‚£ä¹ˆå°±å‡ºç°äº† php-docker å’Œ jenkins-docker æ˜¯å¹¶åˆ—çš„ä¸€ä¸ªå…³ç³»ï¼Œæˆ‘æƒ³åœ¨ jenkins-docker ä¸­æ‰§è¡Œ composer ã€php artisan ç­‰ç›¸å…³å‘½ä»¤ï¼Œå› ä¸ºæ ¹æœ¬ä¸åœ¨ä¸€ä¸ªç©ºé—´ä¸‹ï¼Œéƒ¨ç½²æ„å»ºå·¥ç¨‹å˜å¾—å°¤ä¸ºå›°éš¾ã€‚</p><p>æ‰€ä»¥è¿™é‡Œåˆå‡ºç°äº†è§£å†³æ–¹æ¡ˆ <strong>docker-in-docker</strong>ï¼Œå®ƒå…è®¸ä½ åœ¨å®¹å™¨é‡Œå†åˆ›å»ºå®¹å™¨ï¼Œä½†æ˜¯ç”±äºå­˜åœ¨é‡å¤åµŒå¥—ç­‰é—®é¢˜ï¼Œç°åœ¨å·²ç»å¾ˆå°‘ä½¿ç”¨ã€‚</p><p>æ–°çš„è§£å†³æ–¹æ¡ˆæ˜¯å°†å®¿ä¸»æœºçš„ docker-sock æŒ‚è½½åˆ° jenkins-docker å†…éƒ¨ï¼Œæ‰€ä»¥åœ¨ jenkins-docker å†…éƒ¨æ“ä½œ docker å‘½ä»¤çš„æ—¶å€™æ„Ÿè§‰å’Œåœ¨å¤–éƒ¨æ˜¯ä¸€æ ·çš„ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run -v /var/run/docker.sock:/var/run/docker.sock ...</span><br></pre></td></tr></table></figure><p>ç„¶è€Œæ•…äº‹å¹¶æ²¡æœ‰è¿™ä¹ˆåœ†æ»¡ï¼</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker-compose <span class="built_in">exec</span> --user root jenkins bash</span><br></pre></td></tr></table></figure><p>è¿™æ ·è¿›å…¥å®¹å™¨ï¼Œdocker å‘½ä»¤æ˜¯å¯ä»¥æ­£å¸¸æ‰§è¡Œçš„ï¼Œä½†æ˜¯</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker-compose <span class="built_in">exec</span>  jenkins bash</span><br></pre></td></tr></table></figure><p>è¿™æ ·æ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºé»˜è®¤æ˜¯ä»¥ â€“user jenkins è¿›å…¥çš„ï¼Œåœ¨ jenkins ä¸­çš„ shell ä¸­ä¹Ÿéƒ½æ˜¯ jenkins ç”¨æˆ·ï¼Œä¸€æ—¦æ‰§è¡Œ docker ç­‰ç›¸å…³æ“ä½œï¼Œç«‹é©¬ä¼šæŠ¥é”™ã€‚</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Got permission denied while trying to connect to the Docker daemon socket at unix:&#x2F;&#x2F;&#x2F;var&#x2F;run&#x2F;docker.sock</span><br></pre></td></tr></table></figure><p>â€“user jenkins æ˜¯æ²¡æœ‰æƒé™è®¿é—®åˆ° <code>var/run/docker.sock</code>ï¼ŒæŠ˜è…¾ä¸€ä¸‹åˆï¼Œç½‘ä¸Šå¾ˆå¤šæ–¹æ³•ä¹Ÿéƒ½æ˜¯æ²¡æ³•ç”¨çš„ï¼Œå› ä¸º docker å®¹å™¨é‡Œé¢å¾ˆå¤šå‘½ä»¤éƒ½è¢«é˜‰å‰²æ‰äº†ï¼Œæœ€ç»ˆåœ¨ github ä¸Šé¢å‘ç°äº†ä¸€ä¸ªç®€çŸ­åˆé€‚ç”¨çš„å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ chmod 777 /var/run/docker.sock</span><br></pre></td></tr></table></figure><p>å®Œç¾è§£å†³æˆ‘çš„é—®é¢˜ï¼Œç‰¹æ­¤è®°å½•ï¼</p><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ul><li><a href="https://zhuanlan.zhihu.com/p/27208085" target="_blank" rel="noopener">ä½¿ç”¨ Docker-in-Docker æ¥è¿è¡Œ CI æˆ–é›†æˆæµ‹è¯•ç¯å¢ƒï¼Ÿä¸‰æ€ï¼</a></li><li><a href="https://github.com/jenkinsci/docker/issues/263" target="_blank" rel="noopener">github issues</a></li></ul><!-- rebuild by neat -->]]></content>
      <categories>
        <category>å¼€å‘ç¬”è®°</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>jenkins</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨çº¿è§†é¢‘æ’­æ”¾å¿ƒå¾—</title>
    <url>/p/2e80.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>æœ€è¿‘å…¬å¸å‡†å¤‡ä¸Šä¸€å¥—è§†é¢‘æ’­æ”¾çš„é¡¹ç›®ï¼Œå¯¹æ­¤æˆ‘å¾ˆå…´å¥‹ï¼Œè§†é¢‘æ’­æ”¾ä¸€ç›´æ˜¯æŠ€æœ¯ä¸­æ¯”è¾ƒçƒ­é—¨æ¿å—ï¼Œå¹¶ä¸”åˆæ˜¯ä¸€ä¸ªæ¯”è¾ƒè€çš„æ¿å—ã€‚æƒ³è¦ä¸€ä¸ªè§†é¢‘å¯ä»¥æˆåŠŸåœ¨ç½‘é¡µä¸­æ’­æ”¾ï¼Œæˆ‘ä»ä¸€ä¸ªæ‡µé€¼çŠ¶æ€åˆ°åˆ°çœŸçš„å®ç°æ’­æ”¾æ€»ç»“äº†å¦‚ä¸‹å‡ ä¸ªæ­¥éª¤ã€‚</p><h2 id="ä¸Šä¼ "><a href="#ä¸Šä¼ " class="headerlink" title="ä¸Šä¼ "></a>ä¸Šä¼ </h2><p>æ­£å¸¸æƒ…å†µéœ€è¦æœ‰ä¸€æ®µå¯ä»¥æ’­æ”¾çš„è§†é¢‘ï¼Œè§†é¢‘æ ¼å¼å…¶å®æ— æ‰€è°“ï¼Œ <code>.mp4</code> <code>.avi</code> éƒ½å¯ä»¥ï¼Œä¸€èˆ¬ä¿è¯åœ¨ä¸Šä¼ çš„æ—¶å€™ä¿è¯ç¬¬ä¸€æ‰‹è§†é¢‘æ˜¯éå¸¸æ¸…æ™°çš„åŸè§†é¢‘ã€‚ä½†æ˜¯å¦‚æœè§†é¢‘å¤ªå¤§çš„è¯å°±æ˜¯ä¸Šä¼ çš„æ—¶å€™ä¼šæ…¢ç‚¹ã€‚ç”±äº<a href="https://www.qiniu.com/" target="_blank" rel="noopener">ä¸ƒç‰›</a>çš„å„é¡¹è´¹ç”¨æˆ‘è§‰å¾—éƒ½è¿˜ä¸æ˜¯ç‰¹æ­¥è´µï¼Œæ‰€ä»¥ä¾ç„¶é€‰æ‹©äº†ä¸ƒç‰›ã€‚è¿™é‡Œæ¶‰åŠçš„å…¶å®æ˜¯ä¸ƒç‰›çš„å¯¹è±¡å­˜å‚¨ï¼Œä¸ƒç‰›å¯¹äºä¸Šä¼ æä¾›ä¸¤ç§æ–¹å¼<a href="https://developer.qiniu.com/kodo/manual/1272/form-upload" target="_blank" rel="noopener">è¡¨å•ä¸Šä¼ </a>å’Œ<a href="https://developer.qiniu.com/kodo/manual/1650/chunked-upload" target="_blank" rel="noopener">åˆ†ç‰‡ä¸Šä¼ </a>ï¼Œå¦‚æœä¸Šä¼ çš„èµ„æºæ–‡ä»¶å°äº 1gbï¼Œå‰è€…å°±è¡Œäº†ï¼Œå¦‚æœè¦ä½¿ç”¨åˆ†ç‰‡ä¸Šä¼ æœ€å¥½æ˜¯ä½¿ç”¨ä¸ƒç‰›çš„ sdk äº†ã€‚è¿™é‡Œæˆ‘ä¸Šä¼ èµ„æºæ—¶åç«¯æ¥å£è¿”å›åˆ°å‰ç«¯ä¸€ä¸ª token å’Œ key ï¼Œå‰ç«¯ç›´æ¥ç”¨ form ä¸Šä¼ åˆ°ä¸ƒç‰›å°±è¡Œã€‚</p><h2 id="è½¬ç "><a href="#è½¬ç " class="headerlink" title="è½¬ç "></a>è½¬ç </h2><p>è¿™å—å…¶å®æ˜¯æˆ‘ç ”ç©¶å¾ˆä¹…çš„ä¸€å—ï¼Œ<strong>è§†é¢‘ä¸ºä»€ä¹ˆéœ€è¦è½¬ç ï¼Ÿ</strong>è¿™ä¸ªé—®é¢˜ä¸å¤ªå¥½å›ç­”ï¼Œé‚£ä¹ˆæ¥ç€é—®è‡ªå·±ï¼Œ<strong>ä»€ä¹ˆæ˜¯è§†é¢‘ï¼Ÿ</strong>å¦‚æœæˆ‘è¯´è§†é¢‘æ˜¯ä¸€å¼ å¼ è¿ç»­æ’­æ”¾çš„å¸¦ç€èƒŒæ™¯éŸ³ä¹çš„å›¾ç‰‡å¯èƒ½å¾ˆå¤šäººä¹Ÿä¸ä¼šåå¯¹ã€‚é‚£è‚¯å®šä¼šæœ‰è¿™æ ·çš„é—®é¢˜ï¼Œ <strong>ä»€ä¹ˆæ˜¯å›¾ç‰‡ï¼Ÿ</strong>ï¼Œå›¾ç‰‡åˆæ˜¯ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„è¯é¢˜ï¼Œå¦‚æœä»¥åä¸“é—¨æœ‰ç ”ç©¶å†å¼€ç¯‡è¯´å›¾ç‰‡ï¼Œè®¡ç®—æœºä¸–ç•Œé‡Œé¢è¿™äº›è§†é¢‘å’Œå›¾ç‰‡éƒ½æ˜¯ä¸€å †æœ‰ç»„ç»‡æœ‰é¢„è°‹æœ‰è§„å¾‹çš„æ–‡ä»¶ï¼Œå‰æœŸæŒ‰ç…§ä¸€å®šçš„è§„åˆ™è¿›è¡Œç¼–ç å­˜å‚¨ï¼ŒåæœŸæŒ‰ä¸€å®šçš„ç¼–ç æ‰“å¼€ï¼Œå…¶å®è¿™é‡Œé¢è¿˜å°‘ä¸€ä¸ªé˜¶æ®µé‚£å°±æ˜¯ç°åœ¨çš„äº’è”ç½‘æ—¶ä»£ï¼Œè¿˜ä¼šäº§ç”Ÿä¸€ä¸ªä»æœåŠ¡ç«¯åˆ°å®¢æˆ·ç«¯æŒ‰ä¸€å®šç¼–ç è¿›è¡Œä¼ è¾“ã€‚</p><p><a href="https://baike.baidu.com/item/è§†é¢‘ç¼–ç " target="_blank" rel="noopener">ç™¾åº¦ç™¾ç§‘-è§†é¢‘ç¼–ç </a> æ´‹æ´‹æ´’æ´’å‡ åƒå­—ï¼Œåæ­£æœ€ç»ˆèƒœå‡ºè€…æ˜¯ <code>H.264</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸äº†ä¸èµ·çš„ç¼–ç æ ‡å‡†ï¼Œå®ƒæ˜¯é›†ç¼–ç æ•ˆç‡é«˜ï¼Œå ç”¨ç©ºé—´å°ï¼Œæ¸…æ™°åº¦é«˜ç­‰å¤šä¸ªç‰¹æ€§ä¸ä¸€èº«ï¼Œæ‰€ä»¥ç°åœ¨ä¸–é¢ä¸Šå¤§å¤šæ•°è§†é¢‘éƒ½æ˜¯é‡‡ç”¨äº†è¿™ä¸ªæ ‡å‡†ã€‚ç›®å‰æœ‰ä¸ªæœ€æ–°ç¼–ç æ˜¯ <code>H.265</code>ï¼Œè²Œä¼¼åˆæ˜¯ä¸€ä¸ªéå¸¸å‰å®³çš„ç¼–ç æ ¼å¼æœ‰ä¸€ç»Ÿè§†é¢‘ç¼–ç çš„è¶‹åŠ¿ï¼Œä½†æ˜¯ç”±äºå¹¶éæ‰€æœ‰æµè§ˆå™¨éƒ½å…¼å®¹ï¼Œæ‰€ä»¥ä¸å¾—å·²é€‰æ‹©äº†æ›´ä¸ºç¨³å¥çš„ <code>H.264</code>ï¼Œå¦‚æœæ—¶é—´å……è£•ï¼ŒåæœŸå¯ä»¥è€ƒè™‘ä¸Šå¤šä¸ªæºï¼Œå‰ç«¯è‡ªç”±æ­é…ã€‚</p><p>å…¶å®è½¬ç å°±æ˜¯å°†åŸè§†é¢‘å…ˆè§£ç å†ç¼–ç æˆåˆé€‚çš„è§†é¢‘æºï¼Œä¸ƒç‰›å’Œåˆæ‹äº‘ä¸Šä¸€ç›´æç¤ºè½¬ç çš„åŠŸèƒ½ï¼Œæˆ‘å¼€å§‹å¾ˆæ‡µé€¼ï¼Œéš¾é“ä¸€å®šéœ€è¦ç”¨ä»–ä»¬è‡ªå®¶çš„è½¬ç è½¬çš„è§†é¢‘æ‰èƒ½åœ¨ç½‘é¡µä¸Šæ’­æ”¾å—ï¼Œè½¬ç åˆ°åº•æ˜¯ä¸ºæ’­æ”¾å‡†å¤‡äº›ä»€ä¹ˆï¼Œä¸è¿‡å†™åˆ°è¿™é‡Œé—®é¢˜è‚¯å®šéƒ½æ˜¯è¿åˆƒè€Œè§£äº†ã€‚å…¬å¸ç›®å‰æœ‰äººè´Ÿè´£è§†é¢‘ä¸Šä¼ ï¼Œå¯¹ä¸Šä¼ è€…æœ‰è½¬ç çš„åŸ¹è®­å’Œè¦æ±‚ï¼Œæ‰€ä»¥è½¬ç å¯ä»¥åœ¨ä¸Šä¼ å‰å°±å®Œæˆï¼Œä½†æ˜¯å¦‚æœæ’­æ”¾çš„æ—¶å€™éœ€è¦é€‰æ‹©å¤šä¸ªè§†é¢‘æºï¼Œè¦æ±‚é«˜æ¸…ã€2kã€4kï¼Œè¿™æ—¶å€™æœ¬åœ°è½¬ç å°±æ˜¾å¾—æ•ˆç‡ä½ä¸‹äº†ï¼Œä½¿ç”¨äº‘è½¬ç æ˜¾ç„¶è¦ä¾¿æ·å¤ªå¤šã€‚</p><p>é¡ºä¾¿æ™®åŠä¸€ä¸‹è§†é¢‘æ¸…æ™°åº¦ï¼Œç½‘ç»œè§†é¢‘æ¸…æ™°å’Œæ¨¡ç³Šä¼šå–å†³äºå¤šä¸ªå› ç´ ï¼Œä½†æ˜¯æœ€é‡è¦çš„å› ä¸ºåº”è¯¥æ˜¯ç½‘ç»œå¸¦å®½ä¸é€Ÿåº¦ã€è§†é¢‘çš„ç¼–ç ä»¥åŠè§†é¢‘çš„åˆ†è¾¨ç‡ã€‚ç½‘é€Ÿæš‚ä¸”ä¸è®ºï¼Œç¼–ç æ— éæ˜¯ <code>H.264</code> å’Œ<code>H.265</code>ï¼Œé‚£æœ€åçš„è§†é¢‘åˆ†è¾¨ç‡å…¶å®æ˜¯ä»£è¡¨è§†é¢‘ç”»é¢çš„å®½é«˜ï¼Œæ ‡å‡†å¦‚ä¸‹ã€‚</p><table><thead><tr><th>åˆ†è¾¨ç‡</th><th>åˆ«å</th><th>å®½é«˜</th></tr></thead><tbody><tr><td>4K</td><td>4K</td><td>3840x2160</td></tr><tr><td>2K</td><td>2K</td><td>2560x1440</td></tr><tr><td>FHD</td><td>1080Pã€è¶…æ¸…</td><td>1920x1080</td></tr><tr><td>HD</td><td>720Pã€é«˜æ¸…</td><td>1280x720</td></tr><tr><td>LD</td><td>-</td><td>960x540</td></tr><tr><td>SD</td><td>æ ‡å‡†</td><td>640x480</td></tr></tbody></table><p>åˆ†è¾¨ç‡è¶Šé«˜è§†é¢‘ç»†èŠ‚å°±è¶Šä¸°å¯Œï¼Œéœ€è¦ä¼ è¾“çš„å†…å®¹ä¹Ÿå°±è¶Šå¤šã€‚</p><h2 id="åˆ‡ç‰‡"><a href="#åˆ‡ç‰‡" class="headerlink" title="åˆ‡ç‰‡"></a>åˆ‡ç‰‡</h2><p>é€šè¿‡ä¸Šé¢è½¬ç åçš„è§†é¢‘åŸåˆ™ä¸Šå°±å·²ç»å¯ä»¥æ”¯æŒæ’­æ”¾äº†ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆä¼šæœ‰åˆ‡ç‰‡è¿™ä¸ªè¿‡ç¨‹ï¼Ÿæ˜¯å› ä¸ºå¾€å¾€ä¸€ä¸ª 50mb çš„è§†é¢‘æ–‡ä»¶ï¼Œéœ€è¦ä¸‹è½½å®Œæˆåæ‰èƒ½è¿›è¡Œæ’­æ”¾ï¼Œé‚£ä¹ˆä¸‹è½½çš„è¿‡ç¨‹å°±è®©ç”¨æˆ·ç™½ç™½ç­‰å¾…äº†ï¼Œä¸ºäº†æ‰“ç ´è§†é¢‘ä¸‹è½½ä¸­ä¸èƒ½æ’­æ”¾çš„æƒ…å†µï¼Œ<code>m3u8</code> åº”è¿è€Œç”Ÿï¼Œç®€å•ç‚¹è¯´å°±æ˜¯å¯¹ä¸€ä¸ªç‰¹åˆ«é•¿çš„è§†é¢‘è¿›è¡Œåˆ†å—åˆ‡ç‰‡ï¼Œåˆ‡æˆä¸€æ®µä¸€æ®µçš„ï¼Œæœ€ç»ˆç”Ÿæˆä¸€å †çš„ .ts æ–‡ä»¶å’Œä¸€ä¸ª .m3u8 çš„ç›®å½•æ–‡ä»¶ï¼Œæ’­æ”¾è§†é¢‘çš„æ—¶å€™ï¼Œåªéœ€è¦æ¥å…¥ m3u8 çš„åœ°å€ï¼Œæ’­æ”¾çš„æ—¶å€™ä¼šè‡ªåŠ¨æ£€ç´¢éœ€è¦ä¸‹è½½çš„ç‰‡æ®µï¼Œè¿™æ ·å°±å®Œç¾è§£å†³äº†è¾¹ä¸‹è¾¹æ’­çš„é—®é¢˜äº†ã€‚</p><p>å…¶å®è¿™é‡Œè¿˜æƒ³è¡¥å……ä¸€ä¸ªå°æ’æ›²ï¼Œå°±æ˜¯æ”¾åœ¨ä¸ƒç‰›ä¸Šçš„è§†é¢‘ï¼Œä¸è¿›è¡Œåˆ‡ç‰‡ä¹Ÿæ˜¯å¯ä»¥â€œåˆ†ç‰‡æ’­æ”¾â€çš„ï¼Œè¿™ä¸ªå½“æ—¶ç¡®å®æœ‰ç‚¹æƒŠå‘†äº†ï¼Œéš¾é“ä¸ƒç‰›è‡ªåŠ¨ç»™æˆ‘åˆ‡ç‰‡äº†ï¼Œè¿˜æ˜¯ä»€ä¹ˆåŸå› ï¼Œæ‰“å¼€ chrome çš„æ§åˆ¶å°ï¼Œå‘ç°æµè§ˆå™¨ä¸€ç›´åœ¨å‘é€ http è¯·æ±‚ï¼Œè¿”å›çš„ç»“æœ http code éƒ½æ˜¯ 206ï¼Œè¿½å¯»ç€è¿™ä¸ªè¶³è¿¹ï¼Œåˆå»ç ”ç©¶äº†ä¸‹ä»€ä¹ˆæ˜¯ 206 è¯·æ±‚ï¼ŒåŸæ¥æ˜¯ä¸ƒç‰›æœåŠ¡å™¨åšçš„æ–­ç‚¹ç»­ä¼ ï¼Œæ¯æ¬¡è¯·æ±‚è¿”å›éƒ½æ˜¯æºæ–‡ä»¶çš„ä¸€ä¸ªç‰‡æ®µï¼Œå®¢æˆ·ç«¯è¿™è¾¹å¯¹è¿™ä¸€ä¸ªç‰‡æ®µè¿›è¡Œè§£ç æ’­æ”¾å°± ok äº†ï¼Œæˆ‘è§‰å¾—è¿™ä¸ªä¹Ÿç®—ä¸€ä¸ªä¼ªåˆ‡ç‰‡çš„åŠŸèƒ½ã€‚</p><h2 id="æ’­æ”¾"><a href="#æ’­æ”¾" class="headerlink" title="æ’­æ”¾"></a>æ’­æ”¾</h2><p>ä½¿ç”¨ html5 çš„ video æ ‡ç­¾å°±å¯ä»¥è¿›è¡Œå„ç§è§†é¢‘çš„æ’­æ”¾äº†,æˆ–è€… video.js ç­‰å…¶ä»–æ’­æ”¾å™¨ã€‚å¦‚æœç”¨åˆ°è§†é¢‘åŠ å¯†ï¼Œå¯ä»¥é€‰æ‹©ä¸€äº›å®šåˆ¶åŒ–è§†é¢‘æ’­æ”¾å™¨ï¼Œè§†é¢‘åŠ å¯†åï¼Œé€šè¿‡ç‰¹æ®Šæ’­æ”¾å™¨è§£å¯†ã€‚</p><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ul><li><a href="http://www.sohu.com/a/224199309_825275" target="_blank" rel="noopener">H.264å’ŒH.265å¯¹æ¯”</a></li><li><a href="https://blog.csdn.net/xiangzhihong8/article/details/84376103" target="_blank" rel="noopener">H.265/HEVCåœ¨Webè§†é¢‘æ’­æ”¾çš„å®è·µ</a></li><li><a href="https://www.upyun.com/products/process#section-pricing" target="_blank" rel="noopener">åˆ†è¾¨ç‡ä¸è§†é¢‘å®½é«˜</a></li><li><a href="https://blog.csdn.net/xiaofei0859/article/details/52883500" target="_blank" rel="noopener">Http 206 æ–‡ä»¶æ–­ç‚¹ç»­ä¼ ä¸‹è½½åŸç†</a></li><li><a href="https://www.bbsmax.com/A/WpdKqqaXJV/" target="_blank" rel="noopener">HTML5 videoæ ‡ç­¾æ’­æ”¾è§†é¢‘ä¸‹è½½åŸç†</a></li></ul><!-- rebuild by neat -->]]></content>
      <categories>
        <category>å¼€å‘ç¬”è®°</category>
      </categories>
      <tags>
        <tag>è§†é¢‘æ’­æ”¾</tag>
      </tags>
  </entry>
  <entry>
    <title>å…³äºgoå¹¶å‘çš„ä¼˜è¶Šæ€§</title>
    <url>/p/aa7b.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>è¿™ç¯‡æ–‡ç« æœ¬æ¥æƒ³å¥½å¥½è§£é‡Šä¸€ä¸‹ go å¹¶å‘çš„ä¼˜è¶Šæ€§ï¼Œä½†æ˜¯çœ‹åˆ°ä¸€ä¸ªåšå®¢è®²çš„å®åœ¨å¤ªå¥½ï¼Œä¾‹å­è§£é‡Šçš„å¤ªè¿‡æ¸…æ¥šï¼Œç»™ä½œè€…ç‚¹èµã€‚ä»¥å‰è§‰å¾— nodejs é‡Œé¢çš„å¹¶å‘æ˜¯ç”¨ async/await è¿™ç§å½¢å¼æ‰æ˜¯ä¼˜é›…ï¼Œä½†æ˜¯ä¸è¶³ä¹‹å¤„ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå¤ªè¿‡äºç²—ç²’åº¦æ§åˆ¶å¹¶å‘äº†ï¼Œgo çš„å¹¶å‘åœ¨æ‰‹åŠ¨æ§åˆ¶ä¸Šè¡¨ç°åŠ›æ›´å¼ºã€‚</p><p>ä¸è¿‡ go é‡Œé¢çš„ <code>if err !=nil</code> å®åœ¨æ˜¯å¿å—ä¸äº†ï¼Œæœ€è¿‘åœ¨ç ”ç©¶ rust ï¼Œä¸Šæ‰‹æœ‰ç‚¹éš¾åº¦ğŸ¤£ã€‚</p><p>å‚è€ƒ</p><ul><li><a href="https://juejin.im/entry/5ab893375188251fc32942fe" target="_blank" rel="noopener">ç”¨Promiseå®ç°å¹¶å‘ vs Go goroutine</a></li></ul><!-- rebuild by neat -->]]></content>
      <categories>
        <category>go</category>
      </categories>
  </entry>
  <entry>
    <title>git checkout å¦™ç”¨</title>
    <url>/p/4ba1.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>git ä¸Šé¢åˆ›å»ºä¸€ä¸ªåˆ†æ”¯æ˜¯ <code>git branch fix-target</code> ï¼Œå…¶å®è¿™ä¸ªå‘½ä»¤æˆ‘è¿˜æµ‹è¯•äº†ä¸€ä¸‹ï¼Œå› ä¸ºæˆ‘å·²ç»å¿˜äº†è¿™ä¸ªå‘½ä»¤ï¼Œä¸€ç›´ä½¿ç”¨çš„ <code>git checkout -b fix-target</code>ã€‚</p><p>è¿™ä¸ªå‘½ä»¤ä¼˜ç§€ä¹‹å¤„åœ¨äºä¼šåˆ›å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°è¿™ä¸ªåˆ†æ”¯ï¼Œä½†æ˜¯æœ‰æ—¶å€™ <code>fix-target</code> å¦‚æœå·²ç»å­˜åœ¨è¿™ä¸ªå‘½ä»¤å°±ä¼šå‡ºé”™ï¼Œè ¢ç¬¨çš„æˆ‘å·²ç»æ“ä½œäº† <code>git branch -D fix-target</code>ï¼Œç„¶å<br><code>git checkout -b fix-target</code> åŠå¹´äº†ã€‚</p><p>è¿™é‡Œä¸€å®šè¦æ³¨æ„æˆ‘è¿™é‡Œæ˜¯å¼ºåˆ¶åˆ é™¤ï¼Œå› ä¸ºæˆ‘å·²ç»ç¡®è®¤æˆ‘ä¸éœ€è¦æ—§åˆ†æ”¯ä¸Šä»»ä½•æ•°æ®äº†ï¼Œå°±æƒ³è¦ä¸ªåã€‚</p><p>ä»Šå¤©çªç„¶å‘ç° <code>git checkout -B fix-target</code>ï¼Œæ­£æ˜¯æˆ‘æ‰€æƒ³è¦çš„ã€‚</p><!-- rebuild by neat -->]]></content>
      <categories>
        <category>git</category>
      </categories>
  </entry>
  <entry>
    <title>ä¸ƒç‰›æ•°æ®ä»ä¸€ä¸ªæ¡¶è½¬ç§»åˆ°å¦ä¸€ä¸ªæ¡¶</title>
    <url>/p/f6a9.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>å› ä¸ºä¸ƒç‰›ä¸´æ—¶åŸŸåçš„åŸå› ï¼Œä¸€äº›è€çš„æ•°æ®è¿æ¥éƒ½å¯¹ä¸ä¸Šï¼Œæˆ‘ä»¬è¿™è¾¹éœ€è¦å°†ä¸€ä¸ª bucketA åˆ°å¦å¤–ä¸€ä¸ª bucketB ä¸­ã€‚æ“ä½œæ­¥éª¤å¦‚ä¸‹</p><h1 id="ä¸‹è½½å¹¶-qshell"><a href="#ä¸‹è½½å¹¶-qshell" class="headerlink" title="ä¸‹è½½å¹¶ qshell"></a>ä¸‹è½½å¹¶ qshell</h1><p><a href="https://developer.qiniu.com/kodo/tools/1302/qshell" target="_blank" rel="noopener">ä¸ƒç‰›å®˜æ–¹ä¸‹è½½é¡µé¢</a>ä¸‹è½½å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå› ä¸ºæˆ‘æ˜¯ mac ï¼Œæ‰€ä»¥é€‰æ‹© qshell_darwin_x64ï¼Œæ‰¾ä¸ªåˆé€‚çš„è·¯å¾„ï¼Œæˆ‘çš„ä¹ æƒ¯æ˜¯ $HOME/binï¼Œé…ç½®å¥½ PATHã€‚</p><h1 id="è®¾ç½®-account"><a href="#è®¾ç½®-account" class="headerlink" title="è®¾ç½® account"></a>è®¾ç½® account</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ qshell account AK SK name</span><br></pre></td></tr></table></figure><p>æ–°ç‰ˆæœ¬æœ‰ä¸ª nameï¼Œè€ç‰ˆæœ¬æ˜¯æ²¡æœ‰çš„ã€‚æœ‰æ‰¾ä¸ªå‚æ•°å¯ä»¥æ›´å¥½çš„ä½œåŒºåˆ†ã€‚</p><h1 id="åˆ—å‡º-bucket"><a href="#åˆ—å‡º-bucket" class="headerlink" title="åˆ—å‡º bucket"></a>åˆ—å‡º bucket</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ qshell listbucket bucketA -o srccopy.txt</span><br><span class="line"></span><br><span class="line">xxç®€å†.png	500071	FuEnT1v7oou7--ahA5gO1VIy4EHY	15283671101562504	image/png	0</span><br></pre></td></tr></table></figure><p>å°† bucket ä¸­çš„æ‰€æœ‰æ–‡ä»¶ä¿¡æ¯å¯¼å‡ºï¼Œ<strong>BUT</strong>ï¼Œè¿™é‡Œæˆ‘å¯¹ä¸ƒç‰›è¿™ç‚¹ä¸æ»¡æ„ï¼Œåº”è¯¥æœ‰ä¸ªå‚æ•°å¯ä»¥é…ç½®å¯ä»¥è¾“å‡ºå“ªäº›æ–‡ä»¶ä¿¡æ¯ï¼Œä¸€è‚¡è„‘æ‰€æœ‰ä¿¡æ¯éƒ½æŠ›å‡ºæ¥äº†ï¼Œä½†æ˜¯è¿™é‡Œæ˜¯ç”¨ <code>\t</code> åˆ†å‰²çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬åšä¸ªåˆ‡åˆ†ä¹Ÿå°± ok äº†ã€‚</p><h1 id="å¤„ç†æ–‡ä»¶åˆ—è¡¨"><a href="#å¤„ç†æ–‡ä»¶åˆ—è¡¨" class="headerlink" title="å¤„ç†æ–‡ä»¶åˆ—è¡¨"></a>å¤„ç†æ–‡ä»¶åˆ—è¡¨</h1><p>æ¥å–½ï¼è¿™é‡Œçªå‘å¥‡æƒ³ï¼Œæ¥ä¸ª lua è„šæœ¬ã€‚å°±æ˜¯çˆ±æŠ˜è…¾<br></p><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">split</span><span class="params">( str,reps )</span></span></span><br><span class="line">    <span class="keyword">local</span> resultStrList = &#123;&#125;</span><br><span class="line">    <span class="built_in">string</span>.<span class="built_in">gsub</span>(str,<span class="string">'[^'</span>..reps..<span class="string">']+'</span>,<span class="function"><span class="keyword">function</span> <span class="params">( w )</span></span></span><br><span class="line">        <span class="built_in">table</span>.<span class="built_in">insert</span>(resultStrList,w)</span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line">    <span class="keyword">return</span> resultStrList</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">sourceFile = <span class="built_in">io</span>.<span class="built_in">open</span> (<span class="string">"srccopy.txt"</span>,<span class="string">"r"</span>);</span><br><span class="line">toFile = <span class="built_in">io</span>.<span class="built_in">open</span>(<span class="string">"tocopy.txt"</span> ,<span class="string">"w"</span>);</span><br><span class="line">y=<span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> sourceFile:<span class="built_in">lines</span>() <span class="keyword">do</span></span><br><span class="line">	arr=split(line,<span class="string">"\t"</span>)</span><br><span class="line">	name=arr[<span class="number">1</span>]</span><br><span class="line">	toFile:<span class="built_in">write</span>(name..<span class="string">"\n"</span>)</span><br><span class="line">	y=y+<span class="number">1</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">sourceFile:<span class="built_in">close</span>()</span><br><span class="line">toFile:<span class="built_in">close</span>()</span><br></pre></td></tr></table></figure><p></p><h1 id="copy-bucket"><a href="#copy-bucket" class="headerlink" title="copy bucket"></a>copy bucket</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ qshell batchcopy --force  --failure-list failure-list.txt bucketA bucketB -i tocopy.txt</span><br></pre></td></tr></table></figure><p>å¤„ç†å¤±è´¥çš„æˆ‘ä»¬å¯ä»¥è®°å½•ä¸‹æ¥ï¼Œå¤§éƒ¨åˆ†æ˜¯æ–‡ä»¶åå·²å­˜åœ¨ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©ä¸è¦†ç›–ï¼Œå¦‚æœéœ€è¦è¦†ç›–æ·»åŠ ä¸Š <code>--overwrite</code> å‚æ•°ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è¿™æ˜¯ç¬¬ä¸€æ¬¡å¯¹ lua çš„ä½¿ç”¨ï¼Œæ„Ÿè§‰è¿˜æŒºè½»é‡ï¼Œä»¥åè¿˜å¯ä»¥å¤šä½¿ç”¨ luaã€‚</p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="https://github.com/qiniu/qshell" target="_blank" rel="noopener">qshell</a></li><li><a href="https://blog.csdn.net/forestsenlin/article/details/50590577" target="_blank" rel="noopener">luaåˆ‡å‰²å­—ç¬¦ä¸²</a></li><li><a href="https://blog.csdn.net/wangbin_jxust/article/details/11810353" target="_blank" rel="noopener">luaè¯»å†™æ–‡ä»¶</a></li></ul><!-- rebuild by neat -->]]></content>
      <categories>
        <category>å¼€å‘ç¬”è®°</category>
      </categories>
      <tags>
        <tag>lua</tag>
      </tags>
  </entry>
  <entry>
    <title>git-stashçš„å¦™ç”¨</title>
    <url>/p/a56c.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>ä»Šå¤©ä¸€è·¯ <code>git stash drop</code>ï¼Œæœ¬åœ°æš‚å­˜çš„æ•°æ®å…¨è¢«æˆ‘åˆ æ‰äº†ï¼Œç„¶å sb çš„å‘ç°ï¼Œ<code>Dropped refs/stash@{0} (534cb702c00f36afd4297e6328557cabead9600c)</code> æ˜¯æˆ‘æ—©ä¸Šåˆšå†™çš„ï¼Œéš¾é“å‡ ç™¾è¡Œçš„ä»£ç å°±æ²¡äº†å—?</p><p>git é‡Œé¢æœ‰ä¸ªç‰¹ç‚¹ï¼Œæ€»æœ‰ <strong>åæ‚”è¯</strong>ï¼Œåªè¦èƒ½æ‰¾åˆ°è¿™ä¸ª idï¼Œè‚¯å®šå°±èƒ½å°†æ•°æ®æ¢å¤è¿‡æ¥ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git stash pop 534cb702c00f36afd4297e6328557cabead9600c</span><br><span class="line"><span class="string">'534cb702c00f36afd4297e6328557cabead9600c'</span> is not a stash reference</span><br></pre></td></tr></table></figure><p>ä¸æ–™è¡Œä¸é€šï¼</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git stash apply 534cb702c00f36afd4297e6328557cabead9600c</span><br></pre></td></tr></table></figure><p>æœç„¶è¯åˆ°ç—…é™¤ï¼</p><p>ä»è¿™é‡Œä¹Ÿå‘ç° <code>git stash pop</code> å’Œ <code>git stash apply</code> æ˜¯ç¨å¾®æœ‰ç‚¹åŒºåˆ«çš„ï¼Œå¦‚æœ stash-list é‡Œé¢åŒ…å«äº†è¿™ä¸ª commit ç”¨æ³•æ˜¯ä¸€æ ·çš„ï¼Œå¦åˆ™ apply å¯ä»¥å°†ä¸åœ¨ stash-list ä¸­çš„ä»£ç æ¢å¤åˆ°å·¥ä½œåŒºã€‚</p><!-- rebuild by neat -->]]></content>
      <categories>
        <category>git</category>
      </categories>
  </entry>
  <entry>
    <title>goç‰ˆæœ¬Excelå¯¼å…¥è„šæœ¬</title>
    <url>/p/b6cc.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>ä¸€ç›´æŒºæƒ³ç”¨ go çš„ï¼Œä½†æ˜¯æ²¡æƒ³åˆ°èƒ½å¹²å•¥ï¼Œå‰æ®µæ—¶é—´æ­£å¥½æœ‰ä¸ªä»»åŠ¡å¯¼å…¥ Excel åˆ°åå°æ•°æ®åº“ï¼Œç”¨ Python çš„è¯æˆ‘å¯èƒ½åˆ†åˆ†é’Ÿå°±å†™å¥½äº†ï¼Œä½†æ˜¯ä½œæ­»çš„æˆ‘å°±æƒ³è¯•ä¸‹ goï¼Œå› ä¸º go å¯ä»¥æ‰“åŒ…æˆå¯æ‰§è¡Œç¨‹åºåŒ…ï¼Œç„¶åå°±å¯ä»¥ä¸ä¾èµ– go çš„ç¯å¢ƒã€‚</p><h1 id="ç›´æ¥ç¼–ç "><a href="#ç›´æ¥ç¼–ç " class="headerlink" title="ç›´æ¥ç¼–ç "></a>ç›´æ¥ç¼–ç </h1><h2 id="ä½¿ç”¨-flag-è·å–ç»ˆç«¯å‚æ•°è§£æ"><a href="#ä½¿ç”¨-flag-è·å–ç»ˆç«¯å‚æ•°è§£æ" class="headerlink" title="ä½¿ç”¨ flag è·å–ç»ˆç«¯å‚æ•°è§£æ"></a>ä½¿ç”¨ flag è·å–ç»ˆç«¯å‚æ•°è§£æ</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">path := flag.String(<span class="string">"path"</span>, <span class="string">""</span>, <span class="string">"excel è·¯å¾„"</span>)</span><br><span class="line">url := flag.String(<span class="string">"url"</span>, <span class="string">"**"</span>, <span class="string">"æœåŠ¡å™¨åœ°å€"</span>)</span><br><span class="line">flag.Parse()</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå®šä¹‰äº† path è·¯å¾„å’ŒæœåŠ¡å™¨åœ°å€ urlï¼Œå”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œå˜é‡è¿”å›éƒ½æ˜¯æŒ‡é’ˆã€‚flag æœ‰ä¸ªå¥½å¤„ï¼Œä»–çš„å‚æ•°éƒ½æ˜¯å½¢å¦‚($key,$defaultValue,$description)ï¼Œæ‰€ä»¥åœ¨æ‰§è¡Œ <code>-h</code> çš„æ—¶å€™ï¼Œéƒ½ä¼šè¿”å› key ä»¥åŠå¯¹åº”çš„ descriptionã€‚</p><h2 id="ä½¿ç”¨-Luxurioust-excelize-è¯»å–Excelæ–‡ä»¶"><a href="#ä½¿ç”¨-Luxurioust-excelize-è¯»å–Excelæ–‡ä»¶" class="headerlink" title="ä½¿ç”¨ Luxurioust/excelize è¯»å–Excelæ–‡ä»¶"></a>ä½¿ç”¨ Luxurioust/excelize è¯»å–Excelæ–‡ä»¶</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">xlsx, err := excelize.OpenFile(*path)</span><br><span class="line">rows := xlsx.GetRows(<span class="string">"Sheet1"</span>)</span><br><span class="line"><span class="keyword">for</span> r, row := <span class="keyword">range</span> rows &#123;</span><br><span class="line">	fmt.Println(r)</span><br><span class="line">	<span class="keyword">for</span> c, col := <span class="keyword">range</span> row &#123;</span><br><span class="line">		fmt.Println(c)</span><br><span class="line">		fmt.Println(col)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªåŒ…ç”¨èµ·æ¥è¿˜æ˜¯å¾ˆèˆ’æœï¼Œå”¯ä¸€ä¸€ç‚¹åªæ”¯æŒ <strong>xlsx</strong> æ ¼å¼ï¼Œå¯¹äºè€ç‰ˆæœ¬çš„ <strong>xls</strong> æ ¼å¼å¯èƒ½éœ€è¦å…ˆè½¬åŒ–äº†æ‰èƒ½ä½¿ç”¨ã€‚rows ä¸ºä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œå‚æ•°ä¸º <strong>sheet</strong> åç§°ï¼Œé»˜è®¤çš„åç§°éƒ½æ˜¯ <strong>Sheet1</strong></p><h2 id="ä½¿ç”¨è‡ªå¸¦çš„-net-http-å‘é€è¯·æ±‚"><a href="#ä½¿ç”¨è‡ªå¸¦çš„-net-http-å‘é€è¯·æ±‚" class="headerlink" title="ä½¿ç”¨è‡ªå¸¦çš„ net/http å‘é€è¯·æ±‚"></a>ä½¿ç”¨è‡ªå¸¦çš„ net/http å‘é€è¯·æ±‚</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">str, _ := json.Marshal(data)</span><br><span class="line">resp, err := http.Post(url,</span><br><span class="line">	<span class="string">"application/json"</span>,</span><br><span class="line">	strings.NewReader(<span class="keyword">string</span>(str)))</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">	fmt.Println(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> resp.Body.Close()</span><br><span class="line">body, err := ioutil.ReadAll(resp.Body)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">	fmt.Println(err)</span><br><span class="line">	os.Exit(<span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(<span class="keyword">string</span>(body))</span><br></pre></td></tr></table></figure><p>go è‡ªå¸¦çš„çš„ http å°±æ˜¯è¿™ä¹ˆå¥½ç”¨ï¼Œpost å½¢å¼å‘é€äº†ä¸€ä¸ª json åŒ…ï¼Œè¿™ä¸ª jsonEncode ç”¨èµ·æ¥ç¨å¾®æœ‰ç‚¹ä¸çˆ½ä½†æ˜¯ä¹Ÿè¿˜å¥½ã€‚</p><h1 id="æ‰“åŒ…ç¨‹åº"><a href="#æ‰“åŒ…ç¨‹åº" class="headerlink" title="æ‰“åŒ…ç¨‹åº"></a>æ‰“åŒ…ç¨‹åº</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go build  main.go</span><br></pre></td></tr></table></figure><p>å°±å¯ä»¥å°†è¿™ä¸ªè„šæœ¬æ‰“åŒ…æˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶äº†ï¼Œä½†æ˜¯å‘ç°æ–‡ä»¶è¿˜æŒºå¤§çš„ï¼Œæˆ‘ä»¥ä¸ºåªæœ‰å‡ ç™¾ k å‘¢ï¼Œéƒ½ 8m å¤šäº†</p><h1 id="å‹ç¼©ç¨‹åº"><a href="#å‹ç¼©ç¨‹åº" class="headerlink" title="å‹ç¼©ç¨‹åº"></a>å‹ç¼©ç¨‹åº</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew install upx</span><br><span class="line">$ upx main</span><br></pre></td></tr></table></figure><p><a href="https://upx.github.io/" target="_blank" rel="noopener">upx</a> æ˜¯ä¸€ä¸ªä¸“é—¨çš„å‹ç¼©æ‰“åŒ…å¯æ‰§è¡Œæ–‡ä»¶çš„ç¨‹åºï¼Œå¯ä»¥ä¼˜åŒ–åŒ…ä½“ç§¯ã€‚</p><blockquote><p>è¿™é‡Œå‹ç¼©è¿‡çš„åŒ…ä¸èƒ½ä½¿ç”¨äº†ï¼Œæš‚æ—¶æ²¡æœ‰æ·±ç©¶ä»€ä¹ˆåŸå› ã€‚æ‰€ä»¥å¯»æ‰¾å…¶ä»–æ–¹å¼</p></blockquote><h1 id="å†æ¬¡ä¼˜åŒ–"><a href="#å†æ¬¡ä¼˜åŒ–" class="headerlink" title="å†æ¬¡ä¼˜åŒ–"></a>å†æ¬¡ä¼˜åŒ–</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go build -ldflags -w main.go</span><br></pre></td></tr></table></figure><p>å‘ç°è¿™æ ·å¼„å°±å¯ä»¥å‡å°‘ 1m çš„ä½“ç§¯ï¼Œè¿˜æ˜¯æŒºå¯è§‚çš„ï¼Œç°åœ¨æœ‰ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶äº†ï¼Œä¸ç”¨å¯¹æ–¹æœ‰ golang ç¯å¢ƒï¼Œæ‹¿è¿‡å»ç›´æ¥å¯ä»¥è¿è¡Œè·‘èµ·æ¥ã€‚go å°±æ˜¯ä¼˜ç§€ï¼</p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="https://studygolang.com/articles/9811" target="_blank" rel="noopener">Golang è¯»å†™ Excel</a></li><li><a href="https://www.jianshu.com/p/cd3c766b893c" target="_blank" rel="noopener">å‹ç¼©go buildæ‰“åŒ…çš„å¯æ‰§è¡Œæ–‡ä»¶</a></li></ul><!-- rebuild by neat -->]]></content>
      <categories>
        <category>go</category>
      </categories>
  </entry>
  <entry>
    <title>å…³äºæµè§ˆå™¨çš„å¼ºåˆ¶åˆ·æ–°</title>
    <url>/p/7a43.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>ç»å¸¸å‡ºç°æµè§ˆå™¨å°†jsç¼“å­˜çš„é—®é¢˜</p><h1 id="Chrome-æµè§ˆå™¨"><a href="#Chrome-æµè§ˆå™¨" class="headerlink" title="Chrome æµè§ˆå™¨"></a>Chrome æµè§ˆå™¨</h1><p>Windowsï¼šShift+F5</p><p>Linux: Ctrl+Shift+R</p><p>Mac OS: Cmd+Shft+R</p><h1 id="Safariæµè§ˆå™¨"><a href="#Safariæµè§ˆå™¨" class="headerlink" title="Safariæµè§ˆå™¨"></a>Safariæµè§ˆå™¨</h1><p>Cmd+Option+R</p><!-- rebuild by neat -->]]></content>
  </entry>
  <entry>
    <title>å…³äºæˆæƒå’Œè®¤è¯</title>
    <url>/p/ec56.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>æ˜¨å¤©çœ‹åˆ°ä¸€ç¯‡åšå®¢ä¸“é—¨æåˆ° *<em>è®¤è¯ VS æˆæƒ *</em> ã€‚</p><ol><li>åå­—ä¸åŒï¼Œè®¤è¯ ï¼ˆAuthenticationï¼‰ å’Œ æˆæƒ ï¼ˆAuthorizationï¼‰</li><li>è®¤è¯éœ€è¦è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼ŒæˆæƒæŒ‡éœ€è¦æˆæƒæœåŠ¡æä¾›ç»™å½“å‰æœåŠ¡è‹¥å¹²æƒé™ä»è€Œè¯·æ±‚ç¡®è®¤</li><li>HTTPçŠ¶æ€ç ä¸­æœ‰ <code>401</code> å’Œ <code>403</code> éƒ½è¡¨ç¤ºæ— æƒè®¿é—®å½“å‰èµ„æºï¼Œ<code>401</code> è¡¨ç¤ºåˆ™è¡¨ç¤ºæ²¡æœ‰ã€Œè®¤è¯ã€ï¼Œ<code>403</code> è¡¨ç¤ºæ²¡æœ‰ã€æˆæƒã€</li></ol><p>å‚è€ƒ</p><blockquote><ul><li><a href="https://laravel-china.org/articles/3869/one-minute-to-clear-authentication-and-authorization" target="_blank" rel="noopener">ä¸€åˆ†é’Ÿè®²æ¸…æ¥š Authentication å’Œ Authorization</a></li></ul></blockquote><!-- rebuild by neat -->]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
  </entry>
  <entry>
    <title>Laravelä¸­çš„é˜Ÿåˆ—æ‰§è¡Œè¿‡æ…¢</title>
    <url>/p/a1bc.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>æœ¬æ¥ä¸æƒ³æ°´çš„ï¼Œå…¬å¸çš„ç™½å…ˆç”Ÿç¡¬è¦æˆ‘æ°´ä¸€ç¯‡ï¼Œé‚£å°±ç®€å•è®°å½•ä¸€ä¸‹ã€‚</p><h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h1><p>ä¸Šå‘¨ï¼Œç³»ç»Ÿå‡ºç°äº†ä¸€ä¸ªå¾ˆè¦å‘½çš„é—®é¢˜ï¼Œåç«¯ç”¨çš„ laravel é˜Ÿåˆ—æ‰§è¡Œå¯¼è¡¨ä»»åŠ¡å¼‚å¸¸ç¼“æ…¢ï¼Œä»¥å‰å‡ åˆ†é’Ÿå°±èƒ½å‡ºçš„æŠ¥å‘Šï¼Œå‡ ä¸ªå°æ—¶éƒ½æ²¡åŠ¨é™ï¼Œå› ä¸ºä¸šåŠ¡éœ€è¦ï¼Œæ¯æ¬¡ç”¨æˆ·è§‚çœ‹è§†é¢‘éƒ½éœ€è¦è®¡ç®—ä¸€äº›éå¸¸è€—æ—¶çš„ä»»åŠ¡ã€‚</p><h1 id="è°ƒç ”"><a href="#è°ƒç ”" class="headerlink" title="è°ƒç ”"></a>è°ƒç ”</h1><p>åæ¥è°ƒæŸ¥å°è¯•ä¹Ÿç¡®å®æ˜¯è¿™å—å‡ºäº†é—®é¢˜ï¼Œlaravel æ–‡æ¡£ä¸­ä»‹ç»äº†é˜Ÿåˆ—çš„ä¼˜å…ˆçº§ï¼Œæåˆ°å‚æ•°é¡ºåºçš„é—®é¢˜ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ php artisan queue:work --queue=high,low</span><br></pre></td></tr></table></figure><p><code>--queue</code> ä¸ºé˜Ÿåˆ—çš„åç§°ï¼Œå‚æ•°ç”¨ <code>,</code> åˆ†å‰²ï¼Œæ’çš„è¶Šé å‰ä¼˜å…ˆçº§è¶Šé«˜ã€‚æ‰€ä»¥å°†è¶Šè€—æ—¶çš„ä»»åŠ¡çš„ä¼˜å…ˆçº§è®¾ç½®è¶Šä½ï¼Œå°†ä½ç½®è®¾ç½®è¶Šé åå°±å¥½äº†ã€‚</p><h1 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h1><p>æ‰€ä»¥å¦‚æœç³»ç»Ÿä¸­å­˜åœ¨è€—æ—¶ä»»åŠ¡ï¼Œé€ æˆæ•´ä¸ªé˜Ÿåˆ—éƒ½è¢«å¡ä½ï¼Œåº”è¯¥æŒ‰é¢„è®¡çš„æ‰§è¡Œè€—æ—¶æ’åºï¼Œå°†è¶Šè€—æ—¶çš„ä»»åŠ¡æåˆ°è¶Šé åçš„ä½ç½®ï¼Œè¿™æ ·å°±å¯ä»¥è§£å†³æ‰§è¡Œæ—¶é—´è¾ƒçŸ­çš„ä»»åŠ¡ä¼˜å…ˆæ‰§è¡Œ</p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><blockquote><ul><li><a href="https://laravel-china.org/docs/laravel/5.7/queues/2286#queue-priorities" target="_blank" rel="noopener">é˜Ÿåˆ—ä¼˜å…ˆçº§</a></li></ul></blockquote><!-- rebuild by neat -->]]></content>
      <categories>
        <category>laravel</category>
      </categories>
      <tags>
        <tag>queue</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½ çœŸçš„ä¼šç”¨postmanå—</title>
    <url>/p/ce3e.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p><a href="https://www.getpostman.com" target="_blank" rel="noopener">postman</a> ä¸€ä¸ªéå¸¸ç‰›é€¼çš„ api æµ‹è¯•å·¥å…·ã€‚å¦‚æœä»…ä»…æ˜¯æ‰“ä¸ª apiï¼Œè¿˜ä¸å¦‚ç›´æ¥ curl æ¥çš„ç®€å•ï¼Œæ‰€ä»¥è¿™é‡Œæä¾›ä¸€äº›é«˜çº§çš„åŠŸèƒ½çš„å‚è€ƒã€‚</p><h2 id="å¤šçº§æ–‡ä»¶å¤¹"><a href="#å¤šçº§æ–‡ä»¶å¤¹" class="headerlink" title="å¤šçº§æ–‡ä»¶å¤¹"></a>å¤šçº§æ–‡ä»¶å¤¹</h2><p>ç»å¸¸éœ€è¦å°† api è¿›è¡ŒæŒ‰åŠŸèƒ½æ¨¡å—è¿›è¡Œåˆ†ç»„ï¼Œè¿™ç§å¤šçº§æ–‡ä»¶å¤¹çš„å½¢å¼æ­£å¥½å¯ä»¥æ»¡è¶³æˆ‘çš„éœ€æ±‚ï¼ŒæŸä¸ªåŠŸèƒ½æ¯ä¸ª api ä¸€ç›®äº†ç„¶ã€‚</p><h2 id="å¤šç§è¯·æ±‚æ–¹æ³•"><a href="#å¤šç§è¯·æ±‚æ–¹æ³•" class="headerlink" title="å¤šç§è¯·æ±‚æ–¹æ³•"></a>å¤šç§è¯·æ±‚æ–¹æ³•</h2><p>postman æœ‰å¤šè¾¾ <strong>15</strong> ç§è¯·æ±‚æ–¹æ³•ä¾›é€‰æ‹©ï¼Œå¸¸ç”¨ GETã€POSTã€PUTã€DELETæ›´æ˜¯åˆ‡æ¢èµ·æ¥å¼‚å¸¸çš„æ–¹ä¾¿ã€‚</p><h2 id="URL-å‚æ•°æ‹¼æ¥"><a href="#URL-å‚æ•°æ‹¼æ¥" class="headerlink" title="URL å‚æ•°æ‹¼æ¥"></a>URL å‚æ•°æ‹¼æ¥</h2><p>è¿™é‡Œè¯´çš„å¹¶ä¸æ˜¯ç®€å•çš„å‚æ•°æ‹¼æ¥ <code>a=b&amp;</code> è¿™ç§ï¼Œè€Œæ˜¯æ¯”è¾ƒé«˜çº§çš„å‚æ•°æ‹¼æ¥</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;&#123;&#123;host&#125;&#125;&#x2F;api&#x2F;topics&#x2F;:tid&#x2F;replies&#x2F;:rid</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨åº•ä¸‹å°±å¯ä»¥è¡¥å…¨ <code>tid</code> å’Œ <code>rid</code> å°±å¯ä»¥äº†ã€‚</p><h2 id="Authorization"><a href="#Authorization" class="headerlink" title="Authorization"></a>Authorization</h2><p>æˆæƒå¯ä»¥é€šè¿‡å¸¸è§„çš„åœ¨è¯·æ±‚ <code>Headers</code> ä¸­æ·»åŠ  <code>&quot;Authorization: balabala&quot;</code>ï¼Œä½†æ˜¯ postman æ›´ä¸ºæ–¹ä¾¿çš„æ˜¯æœ‰ä¸ªä¸“é—¨çš„ <strong>Authorization</strong> çš„ Tabï¼Œåˆ‡æ¢åˆ°è¿™ä¸ª Tab ä¸‹é¢æœ‰å¤šç§é€šç”¨çš„æˆæƒæ¨¡å¼ï¼Œè­¬å¦‚ <code>Basic Auth</code> ã€<code>Bearer Token</code> ã€<code>OAuth 2.0</code> ç­‰ï¼Œè¿™é‡Œpostmanä¼šè‡ªåŠ¨æ·»åŠ ç›¸å…³ä¿¡æ¯åˆ°å¤´æˆ–è€… url ä¸­ã€‚</p><h2 id="Manage-Environment"><a href="#Manage-Environment" class="headerlink" title="Manage Environment"></a>Manage Environment</h2><p>è¿™ä¸ªåŠŸèƒ½éå¸¸å®ç”¨ï¼Œç›¸å½“äºå…¨å±€å®šä¹‰çš„å¸¸é‡ã€‚è­¬å¦‚çº¿ä¸‹ç¯å¢ƒçš„åŸŸåæ˜¯ <code>dev-api.zoulux.top</code> ï¼Œçº¿ä¸Šç¯å¢ƒçš„åŸŸåæ˜¯ <code>api.zoulux.top</code>ï¼Œé‚£ä¹ˆè¿™è¾¹æ–°å»ºä¸¤ä¸ª <code>Environment</code> ï¼Œåˆ†åˆ«é…ç½® host ä¸ºä¸Šé¢åŸŸåï¼Œç„¶ååœ¨æ‰€æœ‰çš„æ¥å£ä¸Šå°±å¯ä»¥å®ç”¨å¦‚ä¸‹æ–¹å¼ï¼š</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;&#123;&#123;host&#125;&#125;&#x2F;api&#x2F;topics&#x2F;:tid&#x2F;replies&#x2F;:rid</span><br></pre></td></tr></table></figure><p>å¾ˆç®€å•çš„å°±å¯ä»¥åˆ‡æ¢çº¿ä¸Šçº¿ä¸‹ç¯å¢ƒäº†ï¼Œä¸ä»…å¯ä»¥é…ç½® host ï¼Œå¾ˆå¤šå…¬å¸çº¿ä¸Šçº¿ä¸‹æ¥å£çš„ secret ä¹Ÿä¸ä¸€æ ·ï¼Œéƒ½å¯ä»¥åœ¨ä¸åŒçš„ <code>Environment</code> ä¸­é…ç½®ã€‚</p><h2 id="Pre-request-Script"><a href="#Pre-request-Script" class="headerlink" title="Pre-request Script"></a>Pre-request Script</h2><p>å¦‚æœä¸Šé¢å®šä¹‰çš„æ˜¯å…¨å±€å¸¸é‡ï¼Œé‚£ä¹ˆè¿™é‡Œå¯ä»¥è¯´æ˜¯å¯ä»¥å®šä¹‰å±€éƒ¨å˜é‡ï¼Œæ³¨æ„è¿™é‡Œè¯´çš„æ˜¯ã€Œå¯ä»¥ã€ï¼Œæ‰€ä»¥åŠŸèƒ½è‚¯å®šè¿œè¿œä¸æ­¢å¦‚æ­¤ï¼Œæ­¤å¤„çš„ <code>Script</code> æ˜¯ä¸€ä¸ª <code>JavaScript</code> è„šæœ¬ã€‚</p><h3 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h3><p>è­¬å¦‚åç«¯è¦æ±‚å‰ç«¯æ¯æ¬¡æ‰“æ¥å£å°†æœ¬åœ°çš„ <strong>timestamp</strong> æ‹¼æ¥åˆ°æ¥å£é‡Œé¢æ¥å£é‡Œé¢</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">ts=<span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">pm.environment.set(<span class="string">"timestamp"</span>, ts);</span><br></pre></td></tr></table></figure><p><code>pm</code> æ˜¯ <code>postman</code> æä¾›çš„å…¨å±€å˜é‡ï¼Œå¯ä»¥ç”¨äºè®¾ç½®å±€éƒ¨å˜é‡ï¼Œé‚£ä¹ˆåœ¨ Params çš„ Tab ä¸‹é¢å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ timestamp å˜é‡</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">timestamp : &#123;&#123;timestamp&#125;&#125;</span><br></pre></td></tr></table></figure><h3 id="åŠ å¯†"><a href="#åŠ å¯†" class="headerlink" title="åŠ å¯†"></a>åŠ å¯†</h3><p>åœ¨å¯¹æ¥ç™¾å®¶äº‘çš„æ—¶å€™ï¼Œä»–ä»¬çš„æ¥å£æ˜¯éœ€è¦ç­¾åçš„ï¼Œæ¥å£è§„åˆ™è¿˜è›®å¤æ‚ï¼Œè¿™é‡Œéœ€è¦æ¥å£æŒ‰ key æ’åºï¼Œè¿˜éœ€è¦åŠ å¯†ï¼Œè¿™é‡Œæ˜¯ js çš„è„šæœ¬ï¼Œæ’åºå°±ç”¨åŸç”Ÿçš„ js å°±èƒ½å®Œæˆï¼Œä½†æ˜¯è¿˜éœ€è¦å¯¹ md5 åŠ å¯†ï¼Œè¿™å°±ä¸ºéš¾æˆ‘èƒ–è™äº†ï¼Œä¸è¿‡ postman æ—©å°±è€ƒè™‘åˆ°åŠ å¯†çš„æƒ…å†µï¼Œæ‰€ä»¥é»˜è®¤å·²ç»å¼•å…¥äº†ä¸€äº›å¸¸ç”¨ packageï¼ŒCryptoJSä¸­æœ‰ä¸°å¯ŒåŠ å¯†æ–¹æ³•ã€‚</p><h2 id="Tests"><a href="#Tests" class="headerlink" title="Tests"></a>Tests</h2><p>è¿™ä¸ªæ¨¡å—å¯ä»¥å¯¹æ¥å£çš„è¿›è¡Œæµ‹è¯•ï¼Œè­¬å¦‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">pm.test(<span class="string">"Status code is 200"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    pm.response.to.have.status(<span class="number">200</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å¯ä»¥æŸ¥çœ‹æ¥å£è¿”å›çš„ <strong>status</strong> æ˜¯å¦æ˜¯ 200 ã€‚</p><h2 id="apiæ–‡æ¡£"><a href="#apiæ–‡æ¡£" class="headerlink" title="apiæ–‡æ¡£"></a>apiæ–‡æ¡£</h2><p>åœ¨å·¦ä¾§çš„å·¥ç¨‹ç›®å½•ä¸Šå³é”®é€‰æ‹© <strong>Publish Docs</strong>ï¼Œä¼šå¼¹å‡ºä¸€ä¸ªç½‘é¡µï¼Œç‚¹è¿‡å»å°±å¯ä»¥çœ‹åˆ°ä¸€ä¸ªå¾ˆç²¾ç¾çš„apiæ–‡æ¡£ï¼Œå¦‚æœå¹³æ—¶æ³¨æ„å¤šæ³¨é‡Šï¼Œæ–‡æ¡£é‡Œé¢éƒ½ä¼šæ˜¾ç¤ºå‡ºæ¥ï¼Œæ›´åŠ ä¼˜ç§€çš„æ˜¯è¿™ä¸ªapiæ–‡æ¡£æ˜¯å®æ—¶æ›´æ–°çš„ï¼Œæœ‰æ–°çš„apiçš„æ—¶å€™åˆ·æ–°å°±å¯ä»¥çœ‹åˆ°äº†ã€‚</p><h2 id="more"><a href="#more" class="headerlink" title="more"></a>more</h2><p>å…¶å® postman è¿˜æœ‰å¾ˆå¤šä¼˜ç§€çš„åŠŸèƒ½ï¼Œå€¼å¾—æˆ‘å»æ¢ç©¶ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><blockquote><p><a href="http://dev.baijiayun.com/default/wiki/detail/11#h0-5" target="_blank" rel="noopener">ç™¾å®¶äº‘æ¥å£ç­¾å</a></p><p><a href="https://www.getpostman.com/docs/v6/postman/scripts/postman_sandbox" target="_blank" rel="noopener">Commonly used libraries and utilities</a></p></blockquote><!-- rebuild by neat -->]]></content>
      <categories>
        <category>å¼€å‘ç¬”è®°</category>
      </categories>
      <tags>
        <tag>postman</tag>
      </tags>
  </entry>
  <entry>
    <title>è§†é¢‘æ—¥å¿—è®°å½•</title>
    <url>/p/1b7c.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>è§†é¢‘è®°å½•æ˜¯ä¸€ä»¶å¾ˆéº»çƒ¦çš„äº‹æƒ…ï¼Œä¹‹å‰æ˜¯å°†ä¸€æ®µè§†é¢‘åç­‰åˆ†ï¼Œå­¦ç”Ÿæ¯çœ‹å®Œå…¶ä¸­çš„ä¸€ç­‰åˆ†ï¼Œåœ¨ç”¨æˆ·åšç›¸å…³æ“ä½œçš„æ—¶å€™å°±ä¼šä¸Šä¼ å…¶ä¸­çš„å‡ ç­‰åˆ†è§†é¢‘è®°å½•ï¼Œç›¸å…³æ“ä½œåŒ…æ‹¬ï¼š</p><ul><li>æš‚åœè§†é¢‘</li><li>è§‚çœ‹ä¸‹èŠ‚è§†é¢‘</li><li>æ‹–åŠ¨è§†é¢‘</li><li>å…³é—­å½“å‰é¡µé¢</li></ul><h1 id="è°ƒæŸ¥"><a href="#è°ƒæŸ¥" class="headerlink" title="è°ƒæŸ¥"></a>è°ƒæŸ¥</h1><p>è°ƒæŸ¥äº†ä¸€ä¸‹å‡ ä¸ªè§†é¢‘ç½‘ç«™çš„è®°å½•æ–¹å¼ï¼Œå¦‚ä¸‹ï¼š</p><h2 id="ä¼˜é…·"><a href="#ä¼˜é…·" class="headerlink" title="ä¼˜é…·"></a>ä¼˜é…·</h2><p>log æ¥å£ ï¼š <code>http://yt1.mmstat.com/yt/vp.vtslog</code></p><p>å‘é€é¢‘ç‡ï¼š <code>5</code> ç§’</p><p>body æ—¥å¿— ï¼š</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">version: 0.5.78</span><br><span class="line">vid: 969664681</span><br><span class="line">uid: </span><br><span class="line">type: h5</span><br><span class="line">cf: 0</span><br><span class="line">cpt: 2</span><br><span class="line">full: 0</span><br><span class="line">pc: 0</span><br><span class="line">clb: 0</span><br><span class="line">playersid: 15408798967661cr1pik5u2fq2bZZx0WzQhD9</span><br><span class="line">abtest: b</span><br><span class="line">clientid: 125272a7921189a8</span><br><span class="line">iku: 125272a7921189a8</span><br><span class="line">sn: 1</span><br><span class="line">pt: 5</span><br><span class="line">hi: 5</span><br><span class="line">vvid: 8004d7c2ba930b672821e47ccf0bb8b7</span><br><span class="line">lang: 1</span><br><span class="line">r: 756681157</span><br><span class="line">cna: RSZYFOyl3CYCAWVR4r76Xboc</span><br><span class="line">speed: 1</span><br></pre></td></tr></table></figure><h2 id="è…¾è®¯è§†é¢‘"><a href="#è…¾è®¯è§†é¢‘" class="headerlink" title="è…¾è®¯è§†é¢‘"></a>è…¾è®¯è§†é¢‘</h2><p>log æ¥å£ ï¼š <code>https://apd-be31beb59d7da6eff28fb4bb69f24c0d.v.smtcdns.com/varietyts.tc.qq.com</code></p><p>å‘é€é¢‘ç‡ï¼š ä¸å®šæ—¶å‘é€ï¼Œæ‰“åŒ…ä¸€èµ·å‘é€</p><p>body æ—¥å¿— ï¼š</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">index: 23</span><br><span class="line">start: 241560</span><br><span class="line">end: 251560</span><br><span class="line">brs: 24702636</span><br><span class="line">bre: 25256859</span><br><span class="line">ver: 4</span><br></pre></td></tr></table></figure><h2 id="Bilibili"><a href="#Bilibili" class="headerlink" title="Bilibili"></a>Bilibili</h2><p>log æ¥å£ ï¼š <code>https://api.bilibili.com/x/report/web/heartbeat</code></p><p>å‘é€é¢‘ç‡ï¼š <code>15</code> ç§’</p><p>body æ—¥å¿— ï¼š</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">aid: 34926550</span><br><span class="line">cid: 61188917</span><br><span class="line">mid: </span><br><span class="line">csrf: </span><br><span class="line">played_time: 139</span><br><span class="line">realtime: 139</span><br><span class="line">start_ts: 1540881600</span><br><span class="line">type: 3</span><br><span class="line">dt: 2</span><br><span class="line">play_type: 0</span><br></pre></td></tr></table></figure><h2 id="çˆ±å¥‡è‰º"><a href="#çˆ±å¥‡è‰º" class="headerlink" title="çˆ±å¥‡è‰º"></a>çˆ±å¥‡è‰º</h2><p>log æ¥å£ ï¼š <code>https://sb.scorecardresearch.com/p</code></p><p>å‘é€é¢‘ç‡ï¼š <code>10</code> ç§’</p><p>body æ—¥å¿—ï¼š</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">c1: 2</span><br><span class="line">c2: 26181340</span><br><span class="line">ns_type: hidden</span><br><span class="line">ns_st_sv: 6.1.0.170130</span><br><span class="line">ns_st_smv: 5.8</span><br><span class="line">ns_st_it: r</span><br><span class="line">ns_st_id: 1540882415279</span><br><span class="line">ns_st_ec: 2</span><br><span class="line">ns_st_sp: 1</span><br><span class="line">ns_st_sc: 1</span><br><span class="line">ns_st_psq: 1</span><br><span class="line">ns_st_asq: 1</span><br><span class="line">ns_st_sq: 1</span><br><span class="line">ns_st_ppc: 1</span><br><span class="line">ns_st_apc: 1</span><br><span class="line">ns_st_spc: 1</span><br><span class="line">ns_st_cn: 1</span><br><span class="line">ns_st_ev: pause</span><br><span class="line">ns_st_po: 86868</span><br><span class="line">ns_st_cl: 5997951</span><br><span class="line">ns_st_mp: js_api</span><br><span class="line">ns_st_mv: 6.1.0.170130</span><br><span class="line">ns_st_pn: 1</span><br><span class="line">ns_st_tp: 0</span><br><span class="line">ns_st_ci: 1462694600</span><br><span class="line">ns_st_pt: 86868</span><br><span class="line">ns_st_dpt: 86868</span><br><span class="line">ns_st_ipt: 26853</span><br><span class="line">ns_st_et: 86868</span><br><span class="line">ns_st_det: 86868</span><br><span class="line">ns_st_upc: 86868</span><br><span class="line">ns_st_dupc: 86868</span><br><span class="line">ns_st_iupc: 26853</span><br><span class="line">ns_st_upa: 86868</span><br><span class="line">ns_st_dupa: 86868</span><br><span class="line">ns_st_iupa: 26853</span><br><span class="line">ns_st_lpc: 86868</span><br><span class="line">ns_st_dlpc: 86868</span><br><span class="line">ns_st_lpa: 86868</span><br><span class="line">ns_st_dlpa: 86868</span><br><span class="line">ns_st_pa: 86868</span><br><span class="line">ns_ts: 1540882532281</span><br><span class="line">ns_st_bc: 0</span><br><span class="line">ns_st_dbc: 0</span><br><span class="line">ns_st_bt: 0</span><br><span class="line">ns_st_dbt: 0</span><br><span class="line">ns_st_bp: 0</span><br><span class="line">ns_st_skc: 0</span><br><span class="line">ns_st_dskc: 0</span><br><span class="line">ns_st_ska: 0</span><br><span class="line">ns_st_dska: 0</span><br><span class="line">ns_st_skd: 0</span><br><span class="line">ns_st_skt: 0</span><br><span class="line">ns_st_dskt: 0</span><br><span class="line">ns_st_pc: 1</span><br><span class="line">ns_st_dpc: 1</span><br><span class="line">ns_st_pp: 1</span><br><span class="line">ns_st_br: 0</span><br><span class="line">ns_st_rt: 100</span><br><span class="line">ns_st_ub: 0</span><br><span class="line">ns_st_ki: 1200000</span><br><span class="line">ns_st_pr: å£°æ—ä¹‹ç‹ä¹‹æ—å®¥å˜‰è§æ•¬è…¾1å¯¹1æŒ‡å¯¼å­¦å‘˜ å·«å¯è´¤å¥³å„¿å”±çº¦ç¿°ä¸¹ä½›åä½œ</span><br><span class="line">ns_st_sn: *null</span><br><span class="line">ns_st_en: 1</span><br><span class="line">ns_st_ep: å£°æ—ä¹‹ç‹ä¹‹æ—å®¥å˜‰è§æ•¬è…¾1å¯¹1æŒ‡å¯¼å­¦å‘˜ å·«å¯è´¤å¥³å„¿å”±çº¦ç¿°ä¸¹ä½›åä½œ</span><br><span class="line">ns_st_ct: vc12</span><br><span class="line">ns_st_ge: æ¸¯å°,éŸ³ä¹,çœŸäººç§€</span><br><span class="line">ns_st_st: iqiyi</span><br><span class="line">ns_st_ce: 1</span><br><span class="line">ns_st_ia: 0</span><br><span class="line">ns_st_ddt: *null</span><br><span class="line">ns_st_tdt: *null</span><br><span class="line">ns_st_pu: *null</span><br><span class="line">c3: *null</span><br><span class="line">c4: 6</span><br><span class="line">c6: *null</span><br><span class="line">c7: https:&#x2F;&#x2F;www.iqiyi.com&#x2F;v_19rr6haox0.html</span><br><span class="line">c8: å£°æ—ä¹‹ç‹ä¹‹æ—å®¥å˜‰è§æ•¬è…¾1å¯¹1æŒ‡å¯¼å­¦å‘˜ å·«å¯è´¤å¥³å„¿å”±çº¦ç¿°ä¸¹ä½›åä½œ-ç»¼è‰º-é«˜æ¸…æ­£ç‰ˆè§†é¢‘åœ¨çº¿è§‚çœ‹â€“çˆ±å¥‡è‰º</span><br><span class="line">c9: https:&#x2F;&#x2F;www.iqiyi.com&#x2F;</span><br></pre></td></tr></table></figure><hr><h1 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h1><h2 id="å®šæ—¶æ—¥å¿—"><a href="#å®šæ—¶æ—¥å¿—" class="headerlink" title="å®šæ—¶æ—¥å¿—"></a>å®šæ—¶æ—¥å¿—</h2><p>ä¸Šè¿°çš„å‡ ä¸ªå¹³å°ä¸­é™¤äº† <strong>çˆ±å¥‡è‰º</strong> ä¼ çš„æ•°æ®å¤ªå¤šï¼Œå…¶ä»–éƒ½å¾ˆç²¾ç®€ï¼Œæ€»ç»“ä¸€ä¸‹å…³é”®ä¿¡æ¯æˆ‘å‡†å¤‡è®¾è®¡æˆå¦‚ä¸‹å‡ ä¸ªå­—æ®µï¼š</p><ul><li>è§†é¢‘id</li><li>å½“å‰ç”¨æˆ·id</li><li>å®šæ—¶ä¸Šä¼ æ¬¡æ•° index</li><li>éšæœºæ•° random</li><li>è§†é¢‘å¼€å§‹ä½ç½®</li><li>è§†é¢‘ç»“æŸä½ç½®</li><li>å¼€å§‹æ—¶é—´æˆ³</li><li>ç»“æŸæ—¶é—´æˆ³</li><li>æ’­æ”¾å€é€Ÿ</li><li>æ’­æ”¾è®¾å¤‡å¹³å°</li><li>æ—¥å¿—ç±»å‹ ï¼štiming</li></ul><p>æ—¥å¿—åŒ…æ•´ç†å¥½äº†ï¼Œå°±çœ‹æ—¥å¿—æ—¥å¿—å‘é€é¢‘ç‡äº†ï¼Œé™¤äº†<em>è…¾è®¯è§†é¢‘</em> åº”è¯¥æ˜¯æœ‰ä¸“é—¨æ”¶é›†æ—¥å¿—ï¼Œæœ‰ä¸ªç»Ÿä¸€çš„è§¦å‘æœºåˆ¶ï¼Œä¸€æ¬¡æ€§å‘é€äº†å¤šæ¡æ—¥å¿—ï¼Œå…¶ä»–ç½‘ç«™éƒ½æ˜¯ä»¥å•ä½æ—¶é—´çš„é¢‘ç‡å‘é€ç»™æœåŠ¡ç«¯ï¼Œè€ƒè™‘åˆ°å®æ–½çš„ç®€ä¾¿æ€§ï¼Œç»¼åˆå‡ ä¸ªå‘é€é¢‘ç‡ï¼Œæš‚å®šé¢‘ç‡ä¸º <code>10</code> ç§’ã€‚éšæœºæ•° <code>random</code> æ¯æ¬¡æ‰“å¼€è§†é¢‘éƒ½åˆ·æ–°ï¼Œå¯ä»¥åŒºåˆ†ä¸åŒçš„ <code>log</code> çš„æ—¥å¿—é“¾ï¼Œå®šæ—¶ä¸Šä¼ æ¬¡æ•° <code>index</code> å¯ä»¥æ£€æŸ¥ä¸€æ®µ <code>log</code> çš„å®Œæ•´æ€§ã€‚</p><p>æˆ‘ä»¬çš„å•ä¸ªè§†é¢‘å¹³å‡æ—¶é•¿åœ¨<code>15åˆ†é’Ÿ</code>,é‚£ä¹ˆå¦‚æœæœ‰ä¸€æ¬¡å‘é€logæ—¥å¿—å¤±è´¥å¯¹æ€»ä½“è¿›åº¦å½±å“æ˜¯</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">15 * 60 &#x3D;900 s</span><br><span class="line">10 &#x2F; 900 &#x3D; 0.011111111 &#x3D; 1.11%</span><br></pre></td></tr></table></figure><p>ä¸ºäº†ä¸€æ¬¡æ—¥å¿—å¤±è´¥å¯¹æ€»ä½“è¿›åº¦çš„å½±å“ï¼Œæ‰€ä»¥é¢‘ç‡ç¡®å®šä¸º <code>5</code> ç§’ï¼Œä½†æ˜¯ç›¸å¯¹æ¥è¯´ï¼Œæ•°æ®åº“çš„éœ€è¦çš„å‚¨å­˜ç©ºé—´ä¹Ÿéœ€è¦æ‰©å¤§ä¸€å€</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">15 * 60 &#x3D;900 s</span><br><span class="line">5 &#x2F; 900 &#x3D; 0.005555556 &#x3D; 0.56%</span><br></pre></td></tr></table></figure><p>å•æ¡æ•°æ®ä¸¢å¤±å¯¹æ•´ä½“å½±å“ä¹Ÿç›´æ¥é™ä½ä¸€åŠã€‚</p><h2 id="æ“ä½œæ—¥å¿—"><a href="#æ“ä½œæ—¥å¿—" class="headerlink" title="æ“ä½œæ—¥å¿—"></a>æ“ä½œæ—¥å¿—</h2><p>ä¸Šé¢çš„å‡ å®¶å¹³å°éƒ½æœ‰åšæ“ä½œæ—¥å¿—çš„è®°å½•ï¼Œè¿™é‡Œå”¯ä¸€æ·»åŠ ä¸€ä¸ª <code>random</code> å­—æ®µï¼Œå–å€¼å’Œå®šæ—¶æ—¥å¿—æ¯æ¬¡ç”Ÿæˆçš„éšæœºå€¼ç›¸åŒï¼Œè¿™é‡Œæ“ä½œæ—¥å¿—åˆ†ä¸ºä»¥ä¸‹å‡ ç±»</p><h3 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h3><ul><li>è§†é¢‘id</li><li>å½“å‰ç”¨æˆ·id</li><li>éšæœºæ•° random</li><li>æ—¶é—´æˆ³</li><li>è§†é¢‘ä½ç½®</li><li>æ’­æ”¾è®¾å¤‡å¹³å°</li><li>æ—¥å¿—ç±»å‹ ï¼šstart</li></ul><h3 id="æš‚åœ"><a href="#æš‚åœ" class="headerlink" title="æš‚åœ"></a>æš‚åœ</h3><ul><li>è§†é¢‘id</li><li>å½“å‰ç”¨æˆ·id</li><li>éšæœºæ•° random</li><li>æ—¶é—´æˆ³</li><li>è§†é¢‘ä½ç½®</li><li>æ’­æ”¾è®¾å¤‡å¹³å°</li><li>æ—¥å¿—ç±»å‹ ï¼špause</li></ul><h3 id="å®Œæˆ"><a href="#å®Œæˆ" class="headerlink" title="å®Œæˆ"></a>å®Œæˆ</h3><ul><li>è§†é¢‘id</li><li>å½“å‰ç”¨æˆ·id</li><li>éšæœºæ•° random</li><li>æ—¶é—´æˆ³</li><li>è§†é¢‘ä½ç½®</li><li>æ’­æ”¾è®¾å¤‡å¹³å°</li><li>æ—¥å¿—ç±»å‹ ï¼šcomplete</li></ul><h3 id="é€€å‡º"><a href="#é€€å‡º" class="headerlink" title="é€€å‡º"></a>é€€å‡º</h3><ul><li>è§†é¢‘id</li><li>å½“å‰ç”¨æˆ·id</li><li>éšæœºæ•° random</li><li>æ—¶é—´æˆ³</li><li>è§†é¢‘ä½ç½®</li><li>æ’­æ”¾è®¾å¤‡å¹³å°</li><li>æ—¥å¿—ç±»å‹ ï¼šexit</li></ul><h3 id="æ‹–åŠ¨"><a href="#æ‹–åŠ¨" class="headerlink" title="æ‹–åŠ¨"></a>æ‹–åŠ¨</h3><ul><li>è§†é¢‘id</li><li>å½“å‰ç”¨æˆ·id</li><li>éšæœºæ•° random</li><li>è§†é¢‘åŸæœ‰ä½ç½®</li><li>è§†é¢‘ç°æœ‰ä½ç½®</li><li>æ—¶é—´æˆ³</li><li>æ’­æ”¾è®¾å¤‡å¹³å°</li><li>æ—¥å¿—ç±»å‹ ï¼šdrag</li></ul><h3 id="å€é€Ÿ"><a href="#å€é€Ÿ" class="headerlink" title="å€é€Ÿ"></a>å€é€Ÿ</h3><ul><li>è§†é¢‘id</li><li>å½“å‰ç”¨æˆ·id</li><li>éšæœºæ•° random</li><li>è§†é¢‘åŸæœ‰å€é€Ÿ</li><li>è§†é¢‘ç°æœ‰å€é€Ÿ</li><li>æ—¶é—´æˆ³</li><li>è§†é¢‘ä½ç½®</li><li>æ’­æ”¾è®¾å¤‡å¹³å°</li><li>æ—¥å¿—ç±»å‹ ï¼šspeed</li></ul><h1 id="å®æ–½"><a href="#å®æ–½" class="headerlink" title="å®æ–½"></a>å®æ–½</h1><ol><li>å®¢æˆ·ç«¯æ¯æ¬¡å°†æ—¥å¿—å‘é€åˆ°æœåŠ¡ç«¯</li><li>å¦‚æœæˆåŠŸï¼Œåˆ™æœ¬æ¬¡æ—¥å¿—æäº¤ç»“æŸ</li><li>å¦‚æœå¤±è´¥ï¼Œåˆ™å®¢æˆ·ç«¯éœ€è¦å°†æ—¥å¿—å­˜å‚¨åœ¨æœ¬åœ°</li><li>ç­‰å¾…æ—¶æœºåˆé€‚ï¼Œé‡æ–°æäº¤æ—¥å¿—</li><li>å¦‚æœæˆåŠŸï¼Œåˆ é™¤æœ¬åœ°å­˜å‚¨æ—¥å¿—ï¼Œæœ¬æ¬¡æ—¥å¿—æäº¤ç»“æŸ</li><li>å¦‚æœå¤±è´¥ï¼Œé‡å¤ç¬¬ <code>4</code> æ­¥</li></ol><!-- rebuild by neat -->]]></content>
      <categories>
        <category>å¼€å‘ç¬”è®°</category>
      </categories>
      <tags>
        <tag>æ—¥å¿—</tag>
      </tags>
  </entry>
  <entry>
    <title>macä¸Šå‡ ä¸ªæœ‰è¶£çš„å‘½ä»¤ï¼ˆä¸€ï¼‰</title>
    <url>/p/a074.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>é¦–å…ˆæˆ‘æ˜¯ä¸€ä¸ª Mac å…šï¼Œä½†æ˜¯å¯¹äº Linux ä¹Ÿå°¤ä¸ºå–œçˆ±ï¼Œä»–ä»¬ä¸Šé¢æœ‰é‚£ä¹ˆä¸€äº›å‘½ä»¤æ€»æ˜¯é‚£ä¹ˆé¥¶æœ‰è¶£å‘³ï¼Œåˆç”±äºéƒ½æ˜¯ç±» Unix ç³»ç»Ÿï¼Œå¾ˆå¤šå‘½ä»¤éƒ½æ˜¯é€šç”¨çš„ï¼Œæœ¬æ–‡çš„ä»£ç ä¹Ÿéƒ½æ˜¯åœ¨ Mac ä¸Šé¢å®Œæˆ</p><h2 id="curl"><a href="#curl" class="headerlink" title="curl"></a>curl</h2><p>ä¸€ä¸ªå¤§åé¼é¼çš„å‘½ä»¤ï¼Œä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œå¦‚æœ <code>curl</code> éƒ½ä¸çŸ¥é“ï¼Œé‚£å°±çœŸçš„å¾ˆå°´å°¬ï¼Œä¸»è¦æ˜¯åšç½‘ç»œè¯·æ±‚</p><h3 id="ç›´æ¥è¿”å›ä¸‹è½½æ–‡ä»¶å†…å®¹åˆ°ç»ˆç«¯"><a href="#ç›´æ¥è¿”å›ä¸‹è½½æ–‡ä»¶å†…å®¹åˆ°ç»ˆç«¯" class="headerlink" title="ç›´æ¥è¿”å›ä¸‹è½½æ–‡ä»¶å†…å®¹åˆ°ç»ˆç«¯"></a>ç›´æ¥è¿”å›ä¸‹è½½æ–‡ä»¶å†…å®¹åˆ°ç»ˆç«¯</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl baidu.com</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"refresh"</span> <span class="attr">content</span>=<span class="string">"0;url=http://www.baidu.com/"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ä¸‹è½½æ–‡ä»¶åˆ°æŒ‡å®šæ–‡ä»¶"><a href="#ä¸‹è½½æ–‡ä»¶åˆ°æŒ‡å®šæ–‡ä»¶" class="headerlink" title="ä¸‹è½½æ–‡ä»¶åˆ°æŒ‡å®šæ–‡ä»¶"></a>ä¸‹è½½æ–‡ä»¶åˆ°æŒ‡å®šæ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl baidu.com -o baidu.html</span><br><span class="line">$ cat baidu.html</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"refresh"</span> <span class="attr">content</span>=<span class="string">"0;url=http://www.baidu.com/"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ä¸‹è½½æ–‡ä»¶åˆ°é»˜è®¤æ–‡ä»¶"><a href="#ä¸‹è½½æ–‡ä»¶åˆ°é»˜è®¤æ–‡ä»¶" class="headerlink" title="ä¸‹è½½æ–‡ä»¶åˆ°é»˜è®¤æ–‡ä»¶"></a>ä¸‹è½½æ–‡ä»¶åˆ°é»˜è®¤æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl https://nodejs.org/dist/v8.12.0/node-v8.12.0.pkg -O</span><br><span class="line">$ ls node-v8.12.0.pkg</span><br><span class="line">node-v8.12.0.pkg</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹è¿”å›å¤´ä¿¡æ¯"><a href="#æŸ¥çœ‹è¿”å›å¤´ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹è¿”å›å¤´ä¿¡æ¯"></a>æŸ¥çœ‹è¿”å›å¤´ä¿¡æ¯</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl -i baidu.com</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HTTP&#x2F;1.1 200 OK</span><br><span class="line">Date: Sat, 20 Oct 2018 14:30:47 GMT</span><br><span class="line">Server: Apache</span><br><span class="line">Last-Modified: Tue, 12 Jan 2010 13:48:00 GMT</span><br><span class="line">ETag: &quot;51-47cf7e6ee8400&quot;</span><br><span class="line">Accept-Ranges: bytes</span><br><span class="line">Content-Length: 81</span><br><span class="line">Cache-Control: max-age&#x3D;86400</span><br><span class="line">Expires: Sun, 21 Oct 2018 14:30:47 GMT</span><br><span class="line">Connection: Keep-Alive</span><br><span class="line">Content-Type: text&#x2F;html</span><br><span class="line">Proxy-Connection: keep-alive</span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;meta http-equiv&#x3D;&quot;refresh&quot; content&#x3D;&quot;0;url&#x3D;http:&#x2F;&#x2F;www.baidu.com&#x2F;&quot;&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹è¯·æ±‚çš„æ•´ä¸ªè¿‡ç¨‹"><a href="#æŸ¥çœ‹è¯·æ±‚çš„æ•´ä¸ªè¿‡ç¨‹" class="headerlink" title="æŸ¥çœ‹è¯·æ±‚çš„æ•´ä¸ªè¿‡ç¨‹"></a>æŸ¥çœ‹è¯·æ±‚çš„æ•´ä¸ªè¿‡ç¨‹</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl -v baidu.com</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">* Rebuilt URL to: baidu.com&#x2F;</span><br><span class="line">*   Trying 123.125.115.110...</span><br><span class="line">* TCP_NODELAY set</span><br><span class="line">* Connected to baidu.com (123.125.115.110) port 80 (#0)</span><br><span class="line">&gt; GET &#x2F; HTTP&#x2F;1.1</span><br><span class="line">&gt; Host: baidu.com</span><br><span class="line">&gt; User-Agent: curl&#x2F;7.54.0</span><br><span class="line">&gt; Accept: *&#x2F;*</span><br><span class="line">&gt; </span><br><span class="line">&lt; HTTP&#x2F;1.1 200 OK</span><br><span class="line">&lt; Date: Sat, 20 Oct 2018 14:40:22 GMT</span><br><span class="line">&lt; Server: Apache</span><br><span class="line">&lt; Last-Modified: Tue, 12 Jan 2010 13:48:00 GMT</span><br><span class="line">&lt; ETag: &quot;51-47cf7e6ee8400&quot;</span><br><span class="line">&lt; Accept-Ranges: bytes</span><br><span class="line">&lt; Content-Length: 81</span><br><span class="line">&lt; Cache-Control: max-age&#x3D;86400</span><br><span class="line">&lt; Expires: Sun, 21 Oct 2018 14:40:22 GMT</span><br><span class="line">&lt; Connection: Keep-Alive</span><br><span class="line">&lt; Content-Type: text&#x2F;html</span><br><span class="line">&lt; </span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;meta http-equiv&#x3D;&quot;refresh&quot; content&#x3D;&quot;0;url&#x3D;http:&#x2F;&#x2F;www.baidu.com&#x2F;&quot;&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br><span class="line">* Connection #0 to host baidu.com left intact</span><br></pre></td></tr></table></figure><h3 id="å‘é€-Post-è¯·æ±‚"><a href="#å‘é€-Post-è¯·æ±‚" class="headerlink" title="å‘é€ Post è¯·æ±‚"></a>å‘é€ Post è¯·æ±‚</h3><h4 id="ä¸å¸¦å‚æ•°"><a href="#ä¸å¸¦å‚æ•°" class="headerlink" title="ä¸å¸¦å‚æ•°"></a>ä¸å¸¦å‚æ•°</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl -X POST baidu.com</span><br></pre></td></tr></table></figure><h4 id="formå½¢å¼"><a href="#formå½¢å¼" class="headerlink" title="formå½¢å¼"></a>formå½¢å¼</h4><p>å°†ä»¥ <code>Content-Type: application/x-www-form-urlencoded</code> å½¢å¼æäº¤</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl -X POST -d <span class="string">'a=b'</span> baidu.com</span><br></pre></td></tr></table></figure><h4 id="jsonå½¢å¼"><a href="#jsonå½¢å¼" class="headerlink" title="jsonå½¢å¼"></a>jsonå½¢å¼</h4><p>å°†ä»¥ <code>Content-Type: application/json</code> å½¢å¼æäº¤</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl -X POST baidu.com -H <span class="string">'content-type: application/json'</span> -d <span class="string">'&#123;"a":"b"&#125;'</span></span><br></pre></td></tr></table></figure><h3 id="å‘é€å…¶ä»–-method-è¯·æ±‚"><a href="#å‘é€å…¶ä»–-method-è¯·æ±‚" class="headerlink" title="å‘é€å…¶ä»– method è¯·æ±‚"></a>å‘é€å…¶ä»– method è¯·æ±‚</h3><p>å¦‚æœä½ ä»¬å…¬å¸ä¹Ÿåœ¨ç”¨ <code>restful api</code> ï¼Œå¾ˆå¹¸è¿çš„æ˜¯ <code>curl</code> ä¼šæ˜¯ä¸€ä¸ªå¥½å¸®æ‰‹</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl -X GET baidu.com</span><br><span class="line">$ curl -X POST baidu.com</span><br><span class="line">$ curl -X PUT baidu.com</span><br><span class="line">$ curl -X DELETE baidu.com</span><br></pre></td></tr></table></figure><h3 id="å‘é€å¸¦è‡ªå®šä¹‰-header-è¯·æ±‚"><a href="#å‘é€å¸¦è‡ªå®šä¹‰-header-è¯·æ±‚" class="headerlink" title="å‘é€å¸¦è‡ªå®šä¹‰ header è¯·æ±‚"></a>å‘é€å¸¦è‡ªå®šä¹‰ header è¯·æ±‚</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl -X POST -H <span class="string">'custom-key: custom-value'</span> baidu.com</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹å½“å‰-ip"><a href="#æŸ¥çœ‹å½“å‰-ip" class="headerlink" title="æŸ¥çœ‹å½“å‰ ip"></a>æŸ¥çœ‹å½“å‰ ip</h3><p>è¿™ç®—æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„æŠ€å·§äº†ï¼Œå› ä¸ºæˆ‘è¿™é‡Œå¼€äº†ä»£ç†ï¼Œæ‰€ä»¥ç½‘ç»œ ip æ˜¾ç¤ºçš„æ˜¯ç¾å›½</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl ip.cn</span><br><span class="line">å½“å‰ IPï¼š138.128.193.*** æ¥è‡ªï¼šç¾å›½</span><br></pre></td></tr></table></figure><h2 id="ping"><a href="#ping" class="headerlink" title="ping"></a>ping</h2><p><code>ping(packet internet groper)</code>é€šè¿‡å‘é€<code>icmp(internet control messages protocol)</code>åè®®åŒ…æŸ¥çœ‹å½“å‰æœºå™¨å’Œç›®æ ‡æœºå™¨çš„è¿é€šæ€§ï¼Œmacä¸Šé¢å¦‚æœä¸æŒ‡å®š <code>ping</code> æ¬¡æ•°ï¼Œåˆ™ä¼šä¸€ç›´æ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ping baidu.com</span><br></pre></td></tr></table></figure><p>ctrl-c å¼ºè¡Œåœæ­¢</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">PING baidu.com (123.125.115.110): 56 data bytes</span><br><span class="line">64 bytes from 123.125.115.110: icmp_seq&#x3D;0 ttl&#x3D;55 time&#x3D;111.843 ms</span><br><span class="line">64 bytes from 123.125.115.110: icmp_seq&#x3D;1 ttl&#x3D;55 time&#x3D;113.706 ms</span><br><span class="line">64 bytes from 123.125.115.110: icmp_seq&#x3D;2 ttl&#x3D;55 time&#x3D;26.261 ms</span><br><span class="line">64 bytes from 123.125.115.110: icmp_seq&#x3D;3 ttl&#x3D;55 time&#x3D;25.522 ms</span><br><span class="line">64 bytes from 123.125.115.110: icmp_seq&#x3D;4 ttl&#x3D;55 time&#x3D;26.935 ms</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>é€šè¿‡ <code>-c</code> æŒ‡å®šæ‰§è¡Œæ¬¡æ•°</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ping  -c3 baidu.com</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">PING baidu.com (123.125.115.110): 56 data bytes</span><br><span class="line">64 bytes from 123.125.115.110: icmp_seq&#x3D;0 ttl&#x3D;55 time&#x3D;232.282 ms</span><br><span class="line">64 bytes from 123.125.115.110: icmp_seq&#x3D;1 ttl&#x3D;55 time&#x3D;44.364 ms</span><br><span class="line">64 bytes from 123.125.115.110: icmp_seq&#x3D;2 ttl&#x3D;55 time&#x3D;38.667 ms</span><br><span class="line"></span><br><span class="line">--- baidu.com ping statistics ---</span><br><span class="line">3 packets transmitted, 3 packets received, 0.0% packet loss</span><br><span class="line">round-trip min&#x2F;avg&#x2F;max&#x2F;stddev &#x3D; 38.667&#x2F;105.104&#x2F;232.282&#x2F;89.958 ms</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æŸä¼šä¸€æ®µå¯¹æœ¬æ¬¡æ‰€ä»¥è¯·æ±‚çš„æ±‡æŠ¥ï¼Œå‘é€äº†å¤šå°‘æ¬¡åŒ…ï¼Œå¤šå°‘è¿”å›äº†ï¼Œå¤šå°‘ä¸¢å¤±äº†ï¼Œ<code>round-trip time</code> æ—¶é—´ <strong>æœ€çŸ­/å¹³å‡/æœ€é•¿/æ ‡å‡†å·®</strong></p><h2 id="traceroute"><a href="#traceroute" class="headerlink" title="traceroute"></a>traceroute</h2><p><code>traceroute</code> å…¶å®ä¹Ÿæ˜¯å‘é€ <code>icmp</code> åè®®æŠ¥æ–‡æŸ¥çœ‹åˆ°è¾¾ç›®æ ‡ <code>ip</code> ä¸­é—´ç»è¿‡æ‰€æœ‰çš„è·¯ç”±ä¿¡æ¯</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ traceroute www.baidu.com</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">traceroute: Warning: www.baidu.com has multiple addresses; using 61.135.169.121</span><br><span class="line">traceroute to www.a.shifen.com (61.135.169.121), 64 hops max, 52 byte packets</span><br><span class="line"> 1  * * *</span><br><span class="line"> 2  * * *</span><br><span class="line"> 3  * * *</span><br><span class="line"> 4  * * *</span><br></pre></td></tr></table></figure><p>å°´å°¬çš„æ˜¯åé¢ç›´æ¥æ˜Ÿå·äº†ï¼Œå› ä¸ºå¤§å¤šæ•°ç½‘å…³éƒ½ç¦æ­¢å¯¹ <code>icmp</code> æŠ¥æ–‡ä½œå‡ºå“åº”</p><!-- rebuild by neat -->]]></content>
      <categories>
        <category>å¼€å‘ç¬”è®°</category>
      </categories>
  </entry>
  <entry>
    <title>å®šåˆ¶åšå®¢</title>
    <url>/p/4e.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>è™½ç„¶é»˜è®¤çš„ next ä¸»é¢˜å·²ç»å¾ˆç¾äº†ï¼Œä½†æ˜¯ç½‘ä¸Šæœ‰ä¸€å †å¯¹ next è¿›è¡Œå®šåˆ¶çš„æ•™ç¨‹ï¼Œæœ¬ç€ä¼˜é›…ä¸ç‚«æŠ€çš„åŸåˆ™ï¼Œæˆ‘å¯¹åšå®¢ä½œäº†ä»¥ä¸‹ç®€å•çš„ä¼˜åŒ–ï¼š</p><h3 id="æ·»åŠ -hexo-admin-æ’ä»¶"><a href="#æ·»åŠ -hexo-admin-æ’ä»¶" class="headerlink" title="æ·»åŠ  hexo-admin æ’ä»¶"></a>æ·»åŠ  hexo-admin æ’ä»¶</h3><p><a href="https://github.com/jaredly/hexo-admin" target="_blank" rel="noopener">hexo-admin</a> ä¸ºä¸€å¥—hexo åšå®¢ç®¡ç†å·¥å…·ï¼Œæˆ‘å‡†å¤‡å°†åšå®¢çš„å¼€å‘ç¯å¢ƒä¹Ÿéƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šï¼Œè¿™æ ·å°±ä¸ç”¨å¼€æœ¬åœ°ç¯å¢ƒï¼Œæœ‰äº†å®ƒå°±å¯ä»¥åœ¨çº¿ç¼–è¾‘åšå®¢äº†ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p><ol><li><p>å®‰è£…ä¾èµ–åº“</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install --save hexo-admin</span><br></pre></td></tr></table></figure></li><li><p>å¯åŠ¨æœ¬åœ°åšå®¢ï¼Œå¹¶åœ¨æµè§ˆå™¨æ‰“å¼€</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo s </span><br><span class="line">$ open http://localhost:4000/admin</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœä¸å‡ºé”™çš„è¯ admin ç•Œé¢å°±å·²ç»å±•ç°åœ¨çœ¼å‰ï¼Œä½†æ˜¯å¾ˆå¤šæ—¶å€™æƒ³é…ç½®è´¦æˆ·å¯†ç å»ç™»å½•åˆ°è¿™ä¸ªç®¡ç†åå°ï¼Œå°±éœ€è¦æ¥ç€é…ç½®</p></li><li><p>åœ¨ admin çš„ç•Œé¢ ,å‰å¾€<code>Settings &gt;Setup authentification</code> å¯ä»¥çœ‹åˆ°<code>Username,Password,Secret</code> ï¼Œè¾“å…¥è‡ªå·±å¿ƒä»ªçš„è´¦æˆ·å¯†ç ä»¥åŠç§˜é’¥ï¼Œæ‹·è´ <code>hexo-admin authentification</code> ä¸‹çš„å†…å®¹</p></li><li><p>åœ¨åšå®¢æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æœ€åº•ä¸‹ç²˜è´´å¦‚ä¸‹é…ç½®</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">admin:</span></span><br><span class="line">  <span class="attr">username:</span> <span class="string">admin</span></span><br><span class="line">  <span class="attr">password_hash:</span> <span class="string">$2a$10$L.XAIqIWgTc5S1zpvV3MEu7/rH34p4Is/nq824smv8EZ3lIPCp1su</span></span><br><span class="line">  <span class="attr">secret:</span> <span class="string">wobuhuigaosunide</span></span><br></pre></td></tr></table></figure></li><li><p>é‡æ–°æ‰§è¡Œç¬¬ <code>2</code> æ­¥ï¼Œå‘ç°è¿™æ—¶å€™å·²ç»éœ€è¦ç™»å½•ï¼Œè¾“å…¥é…ç½®ä¸­çš„è´¦å·å’Œå¯†ç å³å¯</p></li></ol><h3 id="æ·»åŠ -åˆ†ç±»-å’Œ-æ ‡ç­¾"><a href="#æ·»åŠ -åˆ†ç±»-å’Œ-æ ‡ç­¾" class="headerlink" title="æ·»åŠ  åˆ†ç±» å’Œ æ ‡ç­¾"></a>æ·»åŠ  <strong>åˆ†ç±»</strong> å’Œ <strong>æ ‡ç­¾</strong></h3><p>æ¯ç¯‡æ–‡ç« å¯ä»¥æœ‰ä¸€ä¸ªåˆ†ç±»å’Œå¤šä¸ªæ ‡ç­¾ï¼Œè¿™ä¹Ÿæ˜¯åˆ†ç±»å’Œæ ‡ç­¾çš„æœ€å¤§çš„åŒºåˆ«ã€‚</p><h4 id="åˆ›å»º-åˆ†ç±»-é€‰é¡¹"><a href="#åˆ›å»º-åˆ†ç±»-é€‰é¡¹" class="headerlink" title="åˆ›å»º åˆ†ç±» é€‰é¡¹"></a>åˆ›å»º <strong>åˆ†ç±»</strong> é€‰é¡¹</h4><ol><li><p>ç”Ÿæˆ <strong>åˆ†ç±»</strong> é¡µå¹¶æ·»åŠ å±æ€§<code>type</code></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new page categories</span><br></pre></td></tr></table></figure></li><li><p>æ‰¾åˆ°ä¸Šé¢æç¤ºçš„ <code>index.md</code> æ–‡ä»¶è·¯å¾„ ï¼Œæ‰“å¼€å‘ç°æ˜¯è¿™æ ·</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: categories</span><br><span class="line">date: 2018-10-17 00:33:17</span><br><span class="line">---</span><br></pre></td></tr></table></figure><p>å°†å…¶ä¿®æ”¹ä¸º</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: åˆ†ç±»</span><br><span class="line">date: 2018-10-17 00:33:17</span><br><span class="line"><span class="built_in">type</span>: <span class="string">"categories"</span></span><br><span class="line">---</span><br></pre></td></tr></table></figure></li><li><p>åšå®¢æ ¹ç›®å½•ä¸‹ä¾æ¬¡æ‰“å¼€ <code>source &gt;_post</code> æ‰¾ä¸€ç¯‡åšå®¢æ‰“å¼€ï¼Œé¡¶éƒ¨æœ‰ä¸€äº›æ–‡ç« çš„é…ç½®ä¿¡æ¯ï¼Œä¸º <code>categories</code> å­—æ®µæ·»åŠ å±æ€§</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">title:</span> <span class="string">Hello</span> <span class="string">World</span></span><br><span class="line"><span class="attr">abbrlink:</span> <span class="string">3eeb</span></span><br><span class="line"><span class="attr">tags:</span> <span class="string">[]</span></span><br><span class="line"><span class="attr">categories:</span> <span class="string">éšç¬”</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2018</span><span class="number">-10</span><span class="number">-15</span> <span class="number">16</span><span class="string">:27:00</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure></li><li><p>ä¸€ç¯‡æ–‡ç« åªæœ‰ä¸€ä¸ªåˆ†ç±»ï¼Œå¦‚æœéœ€è¦äºŒçº§åˆ†ç±»çš„è¯å¯ä»¥å¦‚ä¸‹ä¿®æ”¹ï¼Œå¯ä»¥å‚è€ƒ<a href="https://hexo.io/zh-cn/docs/front-matter#%E5%88%86%E7%B1%BB%E5%92%8C%E6%A0%87%E7%AD%BE" target="_blank" rel="noopener">hexo åˆ†ç±»å’Œæ ‡ç­¾</a></p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">title:</span> <span class="string">Hello</span> <span class="string">World</span></span><br><span class="line"><span class="attr">abbrlink:</span> <span class="string">3eeb</span></span><br><span class="line"><span class="attr">tags:</span> <span class="string">[]</span></span><br><span class="line"><span class="attr">categories:</span> </span><br><span class="line"><span class="bullet">-</span> <span class="string">webå¼€å‘</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">ruby</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2018</span><span class="number">-10</span><span class="number">-15</span> <span class="number">16</span><span class="string">:27:00</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure></li></ol><h4 id="åˆ›å»º-æ ‡ç­¾-é€‰é¡¹"><a href="#åˆ›å»º-æ ‡ç­¾-é€‰é¡¹" class="headerlink" title="åˆ›å»º æ ‡ç­¾ é€‰é¡¹"></a>åˆ›å»º <strong>æ ‡ç­¾</strong> é€‰é¡¹</h4><ol><li><p>ç”Ÿæˆ <strong>æ ‡ç­¾</strong> é¡µå¹¶æ·»åŠ å±æ€§<code>type</code></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new page tags</span><br></pre></td></tr></table></figure></li><li><p>æ‰¾åˆ°ä¸Šé¢æç¤ºçš„ <code>index.md</code> æ–‡ä»¶è·¯å¾„ ï¼Œæ‰“å¼€å‘ç°æ˜¯è¿™æ ·</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: tags</span><br><span class="line">date: 2018-10-20 14:33:17</span><br><span class="line">---</span><br></pre></td></tr></table></figure><p>å°†å…¶ä¿®æ”¹ä¸º</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: æ ‡ç­¾</span><br><span class="line">date: 2018-10-20 14:33:17</span><br><span class="line"><span class="built_in">type</span>: <span class="string">"tags"</span></span><br><span class="line">---</span><br></pre></td></tr></table></figure></li><li><p>åšå®¢æ ¹ç›®å½•ä¸‹ä¾æ¬¡æ‰“å¼€ <code>source &gt;_post</code> æ‰¾ä¸€ç¯‡åšå®¢æ‰“å¼€ï¼Œé¡¶éƒ¨æœ‰ä¸€äº›æ–‡ç« çš„é…ç½®ä¿¡æ¯ï¼Œä¸º <code>tags</code> å­—æ®µæ·»åŠ å±æ€§</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">title:</span> <span class="string">Hello</span> <span class="string">World</span></span><br><span class="line"><span class="attr">abbrlink:</span> <span class="string">3eeb</span></span><br><span class="line"><span class="attr">tags:</span> </span><br><span class="line">  <span class="bullet">-</span> <span class="string">hexo</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hexo-admin</span></span><br><span class="line"><span class="attr">categories:</span> </span><br><span class="line">  <span class="bullet">-</span> <span class="string">éšç¬”</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2018</span><span class="number">-10</span><span class="number">-15</span> <span class="number">16</span><span class="string">:27:00</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure></li><li><p>æ‰“å¼€ä¸Šé¢çš„æ–‡ç« åº•éƒ¨ï¼Œå°±å¯ä»¥çœ‹åˆ°æ ‡ç­¾</p><p><img src="/images/material/WechatIMG51504.png" alt="æ ‡ç­¾"></p></li></ol><h3 id="æ·»åŠ åŠ è½½è¿›åº¦æ¡"><a href="#æ·»åŠ åŠ è½½è¿›åº¦æ¡" class="headerlink" title="æ·»åŠ åŠ è½½è¿›åº¦æ¡"></a>æ·»åŠ åŠ è½½è¿›åº¦æ¡</h3><p>ä¿®æ”¹ <code>pace: true</code> å¹¶è®¾ç½®è‡ªå·±å–œæ¬¢çš„ <code>pace_theme</code>ï¼Œå¯ä»¥æ¯ä¸ªéƒ½æµ‹è¯•ä¸€ä¸‹</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">pace:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">pace_theme:</span> <span class="string">pace-theme-flash</span></span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ èµèµ"><a href="#æ·»åŠ èµèµ" class="headerlink" title="æ·»åŠ èµèµ"></a>æ·»åŠ èµèµ</h3><ol><li><p>ä¿®æ”¹è‡ªå·±çš„å¾®ä¿¡æˆ–è€…æ”¯ä»˜å®çš„å›¾ç‰‡</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Reward</span></span><br><span class="line"><span class="attr">reward_comment:</span> <span class="string">åšæŒåŸåˆ›æŠ€æœ¯åˆ†äº«ï¼Œæ‚¨çš„æ”¯æŒå°†é¼“åŠ±æˆ‘ç»§ç»­åˆ›ä½œï¼</span></span><br><span class="line"><span class="comment">#wechatpay: /images/wechatpay.jpg</span></span><br><span class="line"><span class="attr">alipay:</span> <span class="string">/images/alipay.png</span></span><br><span class="line"><span class="comment">#bitcoin: /images/bitcoin.png</span></span><br></pre></td></tr></table></figure></li><li><p>ä½†æ˜¯æ‰“å¼€å‘ç°èµèµçš„æŒ‰é’®ä¸Šé¢çš„æ–‡å­—æ˜¯ <code>Donate</code>,çœ‹ç€å¾ˆå¥‡æ€ªï¼Œç¼–è¾‘ <code>themes/next/layout/_macro/reward.swig</code> æ–‡ä»¶ä¸­ç¬¬ 4 è¡Œï¼Œå°† <code>Donate</code> ä¿®æ”¹ä¸º <code>èµ</code></p></li></ol><h3 id="é¦–é¡µæ–‡ç« æ·»åŠ é˜…è¯»å…¨æ–‡"><a href="#é¦–é¡µæ–‡ç« æ·»åŠ é˜…è¯»å…¨æ–‡" class="headerlink" title="é¦–é¡µæ–‡ç« æ·»åŠ é˜…è¯»å…¨æ–‡"></a>é¦–é¡µæ–‡ç« æ·»åŠ é˜…è¯»å…¨æ–‡</h3><p>é˜…è¯»åŸæ–‡æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥å®ç°ï¼Œä¸€ç§æ˜¯è‡ªåŠ¨ï¼Œæ ¹æ®æ–‡å­—é•¿åº¦è‡ªåŠ¨åˆ‡å‰²ï¼Œå¦ä¸€ç§æ˜¯æ‰‹åŠ¨çš„ï¼Œæ·»åŠ  <code>more</code> æ ‡ç­¾ï¼Œåˆ™æ­¤æ ‡ç­¾ä»¥ä¸‹å°±ä¼šè¢«éšè—æ‰</p><ol><li><p>è‡ªåŠ¨ï¼Œç¼–è¾‘ <code>_config.yml</code>ï¼ŒæŒ‡å®šæ–‡å­—é•¿åº¦ï¼Œé»˜è®¤æ˜¯150</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">auto_excerpt:</span></span><br><span class="line"><span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">length:</span> <span class="number">150</span></span><br></pre></td></tr></table></figure></li><li><p>æ‰‹åŠ¨ï¼Œæ‰“å¼€ä»»æ„æ–‡ç« ï¼Œåœ¨æ–‡ç« çš„ä»»æ„è¡Œæ’å…¥ <code>&lt;!-- more --&gt;</code> è§‚å¯Ÿæ•ˆæœ</p></li></ol><!-- rebuild by neat -->]]></content>
      <categories>
        <category>hexo</category>
      </categories>
  </entry>
  <entry>
    <title>è‡ªå®šä¹‰GitHubPagesçš„åŸŸå</title>
    <url>/p/a916.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><p>ä»Šå¤©åœ¨é…ç½® githubpages è‡ªå®šä¹‰åŸŸåçš„æ—¶å€™æ€ä¹ˆä¹Ÿè¿ä¸é€šï¼Œé€šè¿‡æœç´ å‘ç°éœ€è¦åœ¨ git é¡¹ç›®æ ¹ç›®å½•ä¸‹<code>setting</code>ï¼Œé…ç½®<code>Custom domain</code>ä¸ºè‡ªå·±çš„è‡ªå®šä¹‰åŸŸåï¼Œè¿™æ—¶ github é…ç½®äº†ä¸€ä¸ªä¸´æ—¶çš„<em>CNAME</em>ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure><p>é‡æ–°éƒ¨ç½²ä¹‹åï¼Œgithub åˆä¼šå°†<code>Custom domain</code>ç½®ä¸ºç©ºï¼Œæ‰€ä»¥æ‰¾åˆ°æœ€ç»ˆç»“å±€æ–¹æ³•ï¼Œåœ¨ hexo é¡¹ç›®çš„<code>source</code>ç›®å½•ä¸‹æ·»åŠ  <code>CNAME</code> çš„æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹ä¸ºè‡ªå®šä¹‰çš„åŸŸåï¼šå¦‚ <code>blog.zoulux.top</code></p><!-- rebuild by neat -->]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>éƒ¨ç½²</tag>
      </tags>
  </entry>
  <entry>
    <title>å¦‚ä½•ä¼˜é›…çš„åˆ é™¤gitå­æ¨¡å—</title>
    <url>/p/b63b.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><ol><li><p>git submodule deinit $mod // é€†åˆå§‹åŒ–</p></li><li><p>git rm â€“cached $mode // åˆ é™¤å­æ¨¡å—ç¼“å­˜ä¿¡æ¯</p></li><li><p>git commit -am â€œRemove a $mode.â€ // æäº¤æ›´æ”¹</p></li></ol><!-- rebuild by neat -->]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/p/3eeb.html</url>
    <content><![CDATA[<!-- build time:Tue Aug 11 2020 13:42:33 GMT+0800 (China Standard Time) --><h1 id="Welcome"><a href="#Welcome" class="headerlink" title="Welcome"></a>Welcome</h1><p>æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢ï¼Œå¸Œæœ›æˆ‘èƒ½å‹¤å¿«ç‚¹ï¼Œæ¯å‘¨ä¸€æ›´ï¼</p><p>æ¯å­¦ä¸€é—¨æ–°è¯­è¨€çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ€»æ˜¯å¸Œæœ›èƒ½åœ¨æ§åˆ¶å°ä¸­å¿«é€Ÿè¾“å‡º<code>Hello world</code>ï¼Œè¿™æ¬¡ä¹Ÿä¸ç†å¤–ã€‚</p><p>ä¸–ç•Œï¼Œä½ å¥½ï¼Œæˆ‘æ¥äº†ï¼</p><blockquote><p>ä¸šç²¾äºå‹¤è’äºå¬‰ï¼Œè¡Œæˆäºæ€æ¯äºéšã€‚å…±å‹‰ï¼</p></blockquote><!-- rebuild by neat -->]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
  </entry>
</search>
